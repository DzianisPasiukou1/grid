function nFormatter(a,b){var c,d=[{value:1e18,symbol:"E"},{value:1e15,symbol:"P"},{value:1e12,symbol:"T"},{value:1e9,symbol:"G"},{value:1e6,symbol:"M"},{value:1e3,symbol:"k"}];for(c=0;c<d.length;c++)if(a>=d[c].value)return(a/d[c].value).toFixed(b).replace(/\.?0+$/,"")+d[c].symbol;return a}function columnGenerator(a,b){var c=[];if(c.push({field:"details",displayName:"",cellTemplate:b+"grid-templates/cell-templates/fields/details.html",headerCellTemplate:b+"grid-templates/cell-templates/cell.html",sortable:!1,width:60,minWidth:60,isColumn:!0}),a[0]){for(var d=0;d<a.length;d++)if(a[d].isColumn)return;for(var e in a[0])c.push({field:e,displayName:e,headerCellTemplate:b+"grid-templates/cell-templates/cell.html",isColumn:!0})}return c.push({field:"action",displayName:"",cellTemplate:b+"grid-templates/cell-templates/fields/action.html",headerCellTemplate:b+"grid-templates/cell-templates/cell.html",sortable:!1,width:300,minWidth:150,isColumn:!0}),c}function columnsCompare(a,b){if(!Array.isArray(a)||!Array.isArray(b)||a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c].field!=b[c].field)return!1;return!0}function convertFilterOptions(a){for(var b={filterText:""},c=0;c<a.length;c++)a[c].filter&&(b.filterText+=a[c].label+":"+a[c].filter+";");return b}function getWindowWidth(){var a=0;return"number"==typeof window.innerWidth?a=window.innerWidth:document.documentElement&&document.documentElement.clientWidth?a=document.documentElement.clientWidth:document.body&&document.body.clientWidth&&(a=document.body.clientWidth),a}function getWindowHeight(){var a=0;return"number"==typeof window.innerHeight?a=window.innerHeight:document.documentElement&&document.documentElement.clientHeight?a=document.documentElement.clientHeight:document.body&&document.body.clientHeight&&(a=document.body.clientHeight),a}function ngGridActionsPlugin(a,b){var c=this;c.grid=null,c.scope=null,c.opts=a,c.compile=b,c.init=function(a,b,d){c.domUtilityService=d.DomUtilityService,c.grid=b,c.scope=a;var e=function(){setTimeout(function(){c.grid.rowCache.forEach(function(a){a&&(a.actions=angular.copy(c.opts),a.actions.isCheck=!1,a.actions.setToggle=g,a.actions.setCheck=l,a.actions.copyRow=n,a.actions.deleteRow=o,a.actions.editRow=p,a.actions.historyRow=q,a.actions.history=[],a.actions.tab=2,a.actions.select=function(a){a.elm.addClass("selected"),c.grid.rowCache.forEach(function(a){a.actions.isSelect&&(a.actions.isSelect=!1)}),this.isSelect=!0},void 0===a.actions.values.options.callback&&(a.actions.values.options.callback=function(b){b.isEdit?a.actions.editRow(a):b.isCopy?a.actions.copyRow(a):b.isDelete?a.actions.deleteRow(a.entity,c.scope.data,a):b.isHistory&&a.actions.historyRow(a)}))}),void 0===c.opts.contentOptions.checks.options.callback&&(c.opts.contentOptions.checks.options.callback=function(a){a&&(a.isAll?c.grid.rowCache.forEach(function(a){a.actions.isCheck=!0}):a.isNoOne?c.grid.rowCache.forEach(function(a){a.actions.isCheck=!1}):a.isMarked?c.grid.rowCache.forEach(function(a){}):a.isNotMarked&&c.grid.rowCache.forEach(function(a){a.actions.isCheck=!a.actions.isCheck}))}),c.scope.$apply()}),c.scope.toggleRow&&(k(c.scope.toggleRow.clone,c.scope.detailsClass,m(c.scope.toggleRow.actions.detailsTemplate,c.scope.toggleRow.actions.detailsCondition,c.scope.toggleRow.entity,c.scope.toggleRow.rowIndex),c.scope.rowHeight,!0),c.scope.toggleRow=void 0),setTimeout(f,1)},f=function(){if(c.scope.toggleRow){var a=!1;for(idx in c.scope.renderedRows)c.scope.renderedRows[idx].orig.actions&&(c.scope.renderedRows[idx].orig.actions.isToggle?(c.scope.renderedRows[idx].elm.hasClass("toggle")||h(c.scope.renderedRows[idx],c.scope.rowHeight,c.scope.step,m(c.scope.toggleRow.actions.detailsTemplate,c.scope.toggleRow.actions.detailsCondition,c.scope.toggleRow.entity,c.scope.toggleRow.rowIndex)),a=!0):c.scope.renderedRows[idx].elm.removeClass("toggle"));a?c.grid.$canvas.css("height",c.scope.newCanvasHeight+"px"):(angular.element(".details-template").parent().removeClass("toggle"),angular.element(".details-template").remove())}c.scope.catHashKeys=function(){var a,b="";for(a in c.scope.renderedRows)b+=c.scope.renderedRows[a].$$hashKey,c.scope.renderedRows[a].orig.actions&&(c.scope.renderedRows[a].orig.actions.isSelect?(c.scope.renderedRows[a].elm.addClass("selected"),c.scope.renderedRows[a].orig.actions.values.isShow=!0):(c.scope.renderedRows[a].elm.removeClass("selected"),c.scope.renderedRows[a].orig.actions.values.isShow=!1));return b}};c.grid.$viewport.scroll(function(){var a=!1;for(idx in c.scope.renderedRows)c.scope.renderedRows[idx].orig.actions.isToggle?(c.scope.renderedRows[idx].elm.hasClass("toggle")||(idx!=c.scope.renderedRows.length-1,h(c.scope.renderedRows[idx],c.scope.rowHeight,c.scope.step,m(c.scope.toggleRow.actions.detailsTemplate,c.scope.toggleRow.actions.detailsCondition,c.scope.toggleRow.entity,c.scope.toggleRow.rowIndex))),a=!0):c.scope.renderedRows[idx].elm.removeClass("toggle");a?c.grid.$canvas.css("height",c.scope.newCanvasHeight+"px"):(angular.element(".details-template").parent().removeClass("toggle"),angular.element(".details-template").remove())});var g=function(a,b,d){if(b){if(c.scope.toggleRow){for(var e,f=0;f<c.grid.rowCache.length;f++)if(angular.equals(c.grid.rowCache[f],c.scope.toggleRow)){e=c.grid.rowCache[f];break}j(e,c.scope.detailsClass,m(c.scope.toggleRow.actions.detailsTemplate,c.scope.toggleRow.actions.detailsCondition,c.scope.toggleRow.entity,c.scope.toggleRow.rowIndex),c.scope.rowHeight)}c.scope.toggleRow=a,c.scope.detailsClass=d,i(a.clone,c.scope.detailsClass,m(c.scope.toggleRow.actions.detailsTemplate,c.scope.toggleRow.actions.detailsCondition,c.scope.toggleRow.entity,c.scope.toggleRow.rowIndex),c.scope.rowHeight)}else k(a.clone,d,m(c.scope.toggleRow.actions.detailsTemplate,c.scope.toggleRow.actions.detailsCondition,c.scope.toggleRow.entity,c.scope.toggleRow.rowIndex),c.scope.rowHeight),c.scope.toggleRow=void 0},h=function(a,b,d,e){if(e){var f,d=d;if("html"==e.substr(e.length-4))$.get(e,function(a){angular.element(".details-template").remove(),f=angular.element(a)}).fail(function(){angular.element(".details-template").remove(),f=angular.element(e)}).always(function(){a.elm.append(f),c.compile(f)(c.scope),angular.element(".details-template").css("top",b+"px"),a.elm.addClass("toggle");for(var e=Math.round(a.elm.position().top),g=angular.element(a.elm).parent().children(),h=0;h<g.length;h++)parseInt(angular.element(g[h]).css("top").replace("px",""))>e&&(angular.element(g[h]).css("top",d+"px"),d+=b)});else{angular.element(".details-template").remove(),f=angular.element(e),a.elm.append(f),c.compile(f)(c.scope),angular.element(".details-template").css("top",b+"px"),a.elm.addClass("toggle");for(var g=Math.round(a.elm.position().top),h=angular.element(a.elm).parent().children(),i=0;i<h.length;i++)parseInt(angular.element(h[i]).css("top").replace("px",""))>g&&(angular.element(h[i]).css("top",d+"px"),d+=b)}}else{a.elm.addClass("toggle"),angular.element(a.elm).css("height",a.elm.context.scrollHeight+"px");for(var g=Math.round(a.elm.position().top),h=angular.element(a.elm).parent().children(),d=d,i=0;i<h.length;i++)parseInt(angular.element(h[i]).css("top").replace("px",""))>g&&(angular.element(h[i]).css("top",d+"px"),d+=b)}},i=function(a,b,d,e){if(a.elm.addClass(b),a.isToggle=!0,d){var f;if("html"==d.substr(d.length-4))$.get(d,function(a){angular.element(".details-template").remove(),f=angular.element(a)}).fail(function(){angular.element(".details-template").remove(),f=angular.element(d)}).always(function(){a.elm.append(f),c.compile(f)(c.scope),angular.element(".details-template").css("top",a.elm.height()+"px");var b=(Math.round(a.elm.position().top),angular.element(a.elm).parent().children()),d=a.elm.position().top+a.elm.find(".details-template").height()+e;c.scope.step=d,c.canvasHeight=c.grid.$canvas.height(),c.grid.$canvas.css("height",c.canvasHeight+a.elm.context.scrollHeight+"px"),c.scope.newCanvasHeight=c.canvasHeight+a.elm.context.scrollHeight,angular.element(a.elm).css("height",a.elm.context.scrollHeight+"px");for(var g=0;g<b.length;g++)if(angular.element(b[g]).css("top").replace("px","")==a.elm.position().top)for(var h=g+1;h<b.length;h++)angular.element(b[h]).css("top",d+"px"),d+=e});else{angular.element(".details-template").remove(),f=angular.element(d),a.elm.append(f),c.compile(f)(c.scope),angular.element(".details-template").css("top",a.elm.height()+"px");var g=Math.round(a.elm.position().top),h=angular.element(a.elm).parent().children(),i=a.elm.position().top+a.elm.find(".details-template").height()+e;c.scope.step=i,c.canvasHeight=c.grid.$canvas.height(),c.grid.$canvas.css("height",c.canvasHeight+a.elm.context.scrollHeight+"px"),c.scope.newCanvasHeight=c.canvasHeight+a.elm.context.scrollHeight,angular.element(a.elm).css("height",a.elm.context.scrollHeight+"px");for(var j=0;j<h.length;j++)if(angular.element(h[j]).css("top").replace("px","")==a.elm.position().top)for(var k=j+1;k<h.length;k++)angular.element(h[k]).css("top",i+"px"),i+=e}}else{var g=Math.round(a.elm.position().top),h=angular.element(a.elm).parent().children(),i=a.elm.position().top+a.elm.context.scrollHeight;c.scope.step=i,c.canvasHeight=c.grid.$canvas.height(),c.grid.$canvas.css("height",c.canvasHeight+a.elm.context.scrollHeight+"px"),c.scope.newCanvasHeight=c.canvasHeight+a.elm.context.scrollHeight,angular.element(a.elm).css("height",a.elm.context.scrollHeight+"px");for(var j=0;j<h.length;j++)parseInt(angular.element(h[j]).css("top").replace("px",""))>g&&(angular.element(h[j]).css("top",i+"px"),i+=e);c.scope.toggleElm=a.elm.clone()}},j=function(a,b,d,e,f){void 0===e&&(e=60),a.clone.elm.removeClass("toggle"),angular.element(".details-template").remove(),a.actions.isToggle=!1,c.grid.$canvas.css("height",c.canvasHeight+"px"),c.scope.newCanvasHeight=c.canvasHeight;var g=Math.round(a.clone.elm.position().top),h=angular.element(a.clone.elm).parent().children(),i=a.clone.elm.position().top+e;angular.element(a.clone.elm).css("height",e+"px");for(var j=0;j<h.length;j++)parseInt(angular.element(h[j]).css("top").replace("px",""))>g&&(angular.element(h[j]).css("top",i+"px"),i+=e);f&&(c.scope.toggleRow=void 0)},k=function(a,b,d,e,f){a.elm.removeClass("toggle"),angular.element(".details-template").remove(),a.orig.actions.isToggle=!1,c.grid.$canvas.css("height",c.canvasHeight+"px"),c.scope.newCanvasHeight=c.canvasHeight;var g=Math.round(a.elm.position().top),h=angular.element(a.elm).parent().children(),i=a.elm.position().top+e;angular.element(a.elm).css("height",e+"px");for(var j=0;j<h.length;j++)parseInt(angular.element(h[j]).css("top").replace("px",""))>g&&(angular.element(h[j]).css("top",i+"px"),i+=e);f&&(c.scope.toggleRow=void 0)},l=function(a){a.actions.onCheck(c.grid.rowCache)},m=function(a,b,c,d){return void 0!==b&&void 0!==b(c,d)&&(a=b(c,d)),a},n=function(a){var b=JSON.stringify(a.entity);if(window.clipboardData&&clipboardData.setData)clipboardData.setData("text",b),$.cursorMessage&&$.cursorMessage("Row is copied to clipboard.");else{angular.element(a.clone.elm).append('<input id="holdtext" style="display: none"/>');var c=angular.element("#holdtext");c.val(b),c.select();try{document.execCommand("copy"),$.cursorMessage&&$.cursorMessage("Row is copied to clipboard.")}catch(d){$.cursorMessage&&$.cursorMessage("Copied ended with error.",{backgroundColor:"rgb(143, 59, 59)"})}finally{c.remove("#holdtext")}}},o=function(a,b,d){for(var e=0;e<c.grid.rowCache.length;e++)if(c.grid.rowCache[e].entity==a){c.grid.rowCache.splice(e,1);break}for(var f=!1,e=0;e<c.scope.renderedRows.length;e++){if(c.scope.renderedRows[e].entity==a){c.scope.renderedRows.splice(e,1);break}c.scope.toggleRow&&c.scope.renderedRows[e].entity==c.scope.toggleRow.entity&&(f=!0)}c.grid.setRenderedRows(c.scope.renderedRows),b.splice(b.indexOf(a),1),c.scope.toggleRow&&(c.scope.toggleRow.entity==a?j(c.scope.toggleRow,"toggle",c.scope.toggleRow.actions.detailsTemplate,c.scope.rowHeight,!0):f||(c.scope.step-=60,h(c.scope.toggleRow.clone,c.scope.rowHeight,c.scope.step,c.scope.toggleRow.actions.detailsTemplate)))},p=function(a){0!=angular.element("div[modal]").length&&angular.element("div[modal]").remove(),c.scope.rowEditing=a,angular.element("body").append('<div modal value="rowEditing" enable-save="true" body-template-url="'+templatesPath+'directive-templates/edit-entity.html"></modal>');var b=angular.element("div[modal]");c.compile(b)(c.scope)},q=function(a){0!=angular.element("div[modal]").length&&angular.element("div[modal]").remove(),c.scope.rowHistoried=a,angular.element("body").append('<div modal value="rowHistoried.actions.history"  body-template-url="'+templatesPath+'directive-templates/history.html"></history>');var b=angular.element("div[modal]");c.compile(b)(c.scope)};c.scope.$watch("catHashKeys()",f),c.scope.$watch(c.grid.config.data,e)},c.refreshOpt=function(a){c.opts=a},c.refreshCallback=function(){c.opts.contentOptions.checks.options.callback=function(a){a&&(a.isAll?c.grid.rowCache.forEach(function(a){a.actions.isCheck=!0}):a.isNoOne?c.grid.rowCache.forEach(function(a){a.actions.isCheck=!1}):a.isMarked?c.grid.rowCache.forEach(function(a){}):a.isNotMarked&&c.grid.rowCache.forEach(function(a){a.actions.isCheck=!a.actions.isCheck}))}}}function ngGridCsvExportPlugin(a){var b=this;b.grid=null,b.scope=null,b.init=function(c,d,e){function f(){function b(a){return null==a?"":"number"==typeof a?""+a:"boolean"==typeof a?a?"TRUE":"FALSE":"string"==typeof a?a.replace(/"/g,'""'):JSON.stringify(a).replace(/"/g,'""')}function c(a){var b=a.substr(0,a.length-1);return b+"\n"}var e=[];for(var f in d.config.columnDefs)e.push(d.config.columnDefs[f].field);var g="";for(var h in e)g+='"'+b(e[h])+'",';g=c(g);var i=d.data;for(var j in i){for(h in e){var k;k=null!=a&&null!=a.columnOverrides&&null!=a.columnOverrides[e[h]]?a.columnOverrides[e[h]](i[j][e[h]]):i[j][e[h]],g+='"'+b(k)+'",'}g=c(g)}var l=d.$root.find(".ngFooterPanel"),m=d.$root.find(".ngFooterPanel .csv-data-link-span");null!=m&&m.remove();var n='<span class="csv-data-link-span">';n+='<br><a href="data:text/csv;charset=UTF-8,',n+=encodeURIComponent(g),n+='" download="Export.csv">CSV Export</a></br></span>',l.append(n)}b.grid=d,b.scope=c,setTimeout(f,0),c.catHashKeys=function(){var a="";for(var b in c.renderedRows)a+=c.renderedRows[b].$$hashKey;return a},c.$watch("catHashKeys()",f)}}function ngGridFlexibleHeightPlugin(a){var b=this;b.grid=null,b.scope=null,b.init=function(c,d,e){b.domUtilityService=e.DomUtilityService,b.grid=d,b.scope=c;var f=function(){setTimeout(g,1)},g=function(){var c=b.grid.gridId,d="."+c+" .ngFooterPanel",e=b.grid.$topPanel.height()+angular.element(d).height();console.log("extra="+e);var f=b.grid.$canvas.height()+1;null!=a&&null!=a.minHeight&&f+e<a.minHeight&&(f=a.minHeight-e-2);var g=f+2;b.scope.baseViewportHeight&&b.scope.baseViewportHeight===g||(b.grid.$viewport.css("height",g+"px"),console.log("resetting height to "+(g+e)),b.grid.$root.css("height",g+e+"px"),b.scope.baseViewportHeight=g,b.domUtilityService.UpdateGridLayout(b.scope,b.grid)),b.grid.$root.css("height","600px")};b.scope.catHashKeys=function(){var a,c="";for(a in b.scope.renderedRows)c+=b.scope.renderedRows[a].$$hashKey;return c},b.scope.$watch("catHashKeys()",g),b.scope.$watch(b.grid.config.data,f)}}angular.module("gridTaskApp",["ngGrid","ui.grid","ui.grid.selection","ui.grid.expandable","ui.select2","pascalprecht.translate"]).value("templatesPath","/src/app/templates/");var templatesPath="/src/app/templates/";angular.module("gridTaskApp").constant("CONTENT",{checks:{options:{actions:{all:{label:"All",isAll:!0},noOne:{label:"No one",isNoOne:!0},marked:{label:"Marked",isMarked:!0},notMarked:{label:"Not marked",isNotMarked:!0}}}},mores:{options:{label:"More",values:[{label:"View reports"}],isMenu:!0}},exports:{options:{label:"Export to: ",values:[{label:"Excel",isExcel:!0},{label:"Pdf",isPdf:!0}],callback:function(a){}}},views:{options:{label:"View: ",values:[{label:"Ng Grid",isGrid:!0,isTiles:!1},{label:"Tiles",isGrid:!1,isTiles:!0},{label:"UI Grid",isUiGrid:!0}],callback:function(a){}}},listSelector:".page-content__list",loadingTemplate:'<loading ng-show="contentOptions.isLoading"></loading>',gridName:"Default grid",ngGridOpt:{data:"data",multiSelect:!1,rowTemplate:templatesPath+"grid-templates/row-templates/row-with-detalis.html",filterOptions:{filterText:""},rowHeight:60,headerRowHeight:40,showFooter:!0,footerRowHeight:30,footerTemplate:templatesPath+"grid-templates/grid-footer.html",detailsTemplate:templatesPath+"grid-templates/details-templates/details.html",rowActions:{options:{label:"Actions",values:[{label:"Edit",isEdit:!0,priority:4},{label:"Copy",isCopy:!0,priority:3},{label:"History",isHistory:!0,priority:2},{label:"Delete",isDelete:!0,priority:1}],isMenu:!0},isShow:!1},rowCheckAction:function(a){var b=a.filter(function(a){return a.actions.isCheck?!0:void 0});0==b.length?this.contentOptions.checks.options.selected=this.contentOptions.checks.options.actions.noOne:b.length==a.length?this.contentOptions.checks.options.selected=this.contentOptions.checks.options.actions.all:this.contentOptions.checks.options.selected=this.contentOptions.checks.options.actions.marked}},uiGridOpt:{data:"data",rowHeight:60,showGridFooter:!0,enableColumnMenus:!1,enableRowSelection:!0,enableGridMenu:!1,multiSelect:!1,modifierKeysToMultiSelect:!1,noUnselect:!0,enableExpandable:!0,enableRowHeaderSelection:!1,expandableRowTemplate:templatesPath+"grid-templates/details-templates/details.html",expandableRowHeight:220,selectionRowHeaderWidth:35,enableExpandableRowHeader:!1,enableFiltering:!0,rowTemplate:templatesPath+"ui-grid-templates/row.html",expandableRowScope:{subGridVariable:"subGridScopeVariable"},gridFooterTemplate:'<div class="grid-footer"></div>',headerTemplate:templatesPath+"ui-grid-templates/header.html",headerCellTemplate:templatesPath+"ui-grid-templates/cell-templates/header.html",reInit:!0,enableDetails:!0,detailsCellTemplate:templatesPath+"ui-grid-templates/cell-templates/details.html",detailsWidth:60,detailsMinWidth:60,enableAction:!0,actionsCellTemplate:templatesPath+"ui-grid-templates/cell-templates/action.html",actionsWidth:250,actionsMinWidth:115,columnMinWidth:80,cellClass:function(a,b,c,d,e){return b.isChecked?"checked":b.isExpanded?"expanded":void 0},enableColumnFilter:!1},cardsOptions:{cards:{views:{label:"Total Touchpoints",count:191e4,graphs:[{style:{"background-color":"rgb(10, 124, 130)",height:"30px"}},{style:{"background-color":"rgb(165, 25, 215)",height:"50px"}},{style:{"background-color":"rgb(165, 200, 208)",height:"60px"}},{style:{"background-color":"rgb(30, 201, 135)",height:"25px"}},{style:{"background-color":"rgb(57, 124, 100)",height:"30px"}}]},conversion:{label:"Reached Goal",count:2010,graphs:[{style:{"background-color":"rgb(233, 44, 130)",height:"20px"}},{style:{"background-color":"rgb(165, 189, 300)",height:"30px"}},{style:{"background-color":"rgb(1, 215, 208)",height:"45px"}},{style:{"background-color":"rgb(251, 201, 54)",height:"34px"}},{style:{"background-color":"rgb(57, 33, 130)",height:"60px"}}]},spend:{label:"Potential Reach",count:2150,graphs:[{style:{"background-color":"rgb(10, 124, 130)",height:"10px"}},{style:{"background-color":"rgb(165, 189, 55)",height:"5px"}},{style:{"background-color":"rgb(165, 231, 208)",height:"50px"}},{style:{"background-color":"rgb(251, 201, 29)",height:"30px"}},{style:{"background-color":"rgb(57, 124, 1)",height:"34px"}}]}},startDate:new Date((new Date).setDate((new Date).getDate()-1)),endDate:new Date,dateRange:Math.abs((new Date).getTime()-new Date((new Date).setDate((new Date).getDate()-1)).getTime()),margin:270},filterOptions:function(a){var b=[];if(Array.isArray(a)&&a[0])for(var c in a[0])"$$hashKey"!=c&&b.push({label:c,isColumn:!0});return b},searchOptions:function(a){var b=[];if(b.push({label:"everywhere",isEverywhere:!0}),Array.isArray(a)&&a[0])for(var c in a[0])"$$hashKey"!=c&&b.push({label:c,isColumn:!0});return b},eventType:{options:{actions:[{label:"Simple event"},{label:"Medium event"}],selected:{label:"Simple event"}},selectOpt:{}},segments:{options:{actions:[{label:"People"},{label:"Trees"},{label:"Nodes"},{label:"Graphs"},{label:"Credentials"}]},selectOpt:{inheritClass:!0,includeSelectAllOption:!0}},campaign:{options:{actions:[{label:"AIX"},{label:"UI Campaign"},{label:"Design"},{label:"Modes"},{label:"KJ Entertainment"}]},selectOpt:{inheritClass:!0,includeSelectAllOption:!0}},sankeyFilters:{dateRange:{start:moment(new Date((new Date).setDate((new Date).getDate()-7))),end:moment(new Date)}},sankeyPath:"data/sankey/my-graphs.json",debugCard:{id:"debug",text:"Debug",templateUrl:templatesPath+"directive-templates/debug.html"},datepickerOptions:{config:{singleMonth:!0,showShortcuts:!1,showTopbar:!1}}}),angular.module("gridTaskApp").constant("DATA",{count:100,startDate:new Date(2e3,1,1)}),angular.module("gridTaskApp").constant("HISTOGRAM",{data:[{name:"1",value:1e5},{name:"2",value:15e4},{name:"3",value:17e4},{name:"4",value:3e5},{name:"5",value:35e4},{name:"6",value:4e5},{name:"7",value:5e5},{name:"8",value:55e4},{name:"9",value:6e5},{name:"10",value:7e5}]}),angular.module("gridTaskApp").constant("LOADING",{parentSelector:".page-content__body"}),angular.module("gridTaskApp").constant("MENU",{parentSelector:".page-content",parentMinWidth:500}),angular.module("gridTaskApp").constant("OVERLAY",{overlaySelector:".custom-overlay",heighterSelector:"#chart[max-heighter]",alignTopSelector:".page-content__cards",toggleMinWidth:30}),angular.module("gridTaskApp").constant("SANKEY",{data:{links:[{source:"View video",target:"Log in",value:"1"},{source:"View video",target:"Add to Cart",value:"1.5"},{source:"Ad Imression",target:"Log in",value:"1"},{source:"Ad Imression",target:"Ad Click",value:"1"},{source:"Ad Click",target:"Log in",value:".75"},{source:"Log in",target:"Purchase Complete",value:"1"},{source:"Add to Cart",target:"Purchase Complete",value:"1"},{source:"Add to Cart",target:"Carting",value:1},{source:"Carting",target:"Init",value:.5},{source:"Carting",target:"Log out",value:.5},{source:"Log out",target:"Log in",value:1},{source:"Log in",target:"Information",value:1},{source:"Information",target:"Examination",value:1}],nodes:[{name:"View video",color:"rgb(62,145,95)",transform:"0,0",mx:"0",my:"0",val:"50",mouseover:{type:{isSimple:"true"},header:"Video: ID: 124856",data:[{campaignId:"657H836",adId:"904743"},{campaignId:"657H836",adId:"904743"}]}},{name:"Log in",color:"rgb(133,133,133)",transform:"445,0",mx:"445",my:"0",val:"65",mouseover:{type:{isMedium:"true"},header:"Event: Log In",data:{topSegments:["Moms_2014","Affiluent_buyers","Auto-Inteders","Star Wars","Female 25 -34"],topCampaings:["C1_Dx_1","F2_DX_2","Gofundme DX3","Test campaign","Random Campaign"]}}},{name:"Ad Imression",color:"rgb(211,46,53)",transform:"0,415.55555555555554",mx:"0",my:"415.55555555555554",val:"15",mouseover:{type:{isSimple:"true"},header:"Video: ID: 124856",data:[{campaignId:"657H836",adId:"904743"},{campaignId:"657H836",adId:"904743"}]}},{name:"Ad Click",color:"rgb(20,0,254)",transform:"699,567.7777777777778",mx:"699",my:"567.7777777777778",val:"20",mouseover:{type:{isSimple:"true"},header:"Video: ID: 124856",data:[{campaignId:"657H836",adId:"904743"},{campaignId:"657H836",adId:"904743"}]}},{name:"Add to Cart",color:"rgb(157,226,141)",transform:"827,333.18181818181824",mx:"827",my:"333.18181818181824",val:"30",mouseover:{type:{isSimple:"true"},header:"Video: ID: 124856",data:[{campaignId:"657H836",adId:"904743"},{campaignId:"657H836",adId:"904743"}]}},{name:"Purchase Complete",color:"rgb(20,58,173)",transform:"1118,405.55555555555554",mx:"1118",my:"405.55555555555554",val:"12",mouseover:{type:{isSimple:"true"},header:"Video: ID: 124856",data:[{campaignId:"657H836",adId:"904743"},{campaignId:"657H836",adId:"904743"}]}},{name:"Carting",color:"rgb(123,20,56)",transform:"1172,3.6327926195491926",mx:"1172",my:"3.6327926195491926",val:"55",mouseover:{type:{isSimple:"true"},header:"Video: ID: 124856",data:[{campaignId:"657H836",adId:"904743"},{campaignId:"657H836",adId:"904743"}]}},{name:"Init",color:"rgb(0,23,76)",transform:"1390,82.6327926195492",mx:"1390",my:"82.6327926195492",val:"65",mouseover:{type:{isSimple:"true"},header:"Video: ID: 124856",data:[{campaignId:"657H836",adId:"904743"},{campaignId:"657H836",adId:"904743"}]}},{name:"Log out",color:"rgb(78,66,12)",transform:"756,0",mx:"756",my:"0",val:"23",mouseover:{type:{isSimple:"true"},header:"Video: ID: 124856",data:[{campaignId:"657H836",adId:"904743"},{campaignId:"657H836",adId:"904743"}]}},{name:"Information",color:"rgb(66,66,66)",transform:"1060,162.6327926195492",mx:"1060",my:"162.6327926195492",val:"33",mouseover:{type:{isSimple:"true"},header:"Video: ID: 124856",data:[{campaignId:"657H836",adId:"904743"},{campaignId:"657H836",adId:"904743"}]}},{name:"Examination",color:"rgb(12,51,128)",transform:"1455,390.63279261954915",mx:"1455",my:"390.63279261954915",val:"76",mouseover:{type:{isSimple:"true"},header:"Video: ID: 124856",data:[{campaignId:"657H836",adId:"904743"},{campaignId:"657H836",adId:"904743"}]}}]}});var directiveName="anyOtherClick";angular.module("gridTaskApp").directive("anyOtherClick",["$parse","anyOtherClickFactory",function(a,b){return{restrict:"A",link:function(c,d,e,f){var g,h;g=a(e[directiveName]),h=function(a){var b=d[0]!==a.target&&0===d.find(a.target).length;b&&c.$apply(function(){g(c,{})})},b._register(h),c.$on("$destroy",function(){b._destroy(h)})}}}]),angular.module("gridTaskApp").controller("cardsCtrl",["$scope","cardsFactory",function(a,b){b.register(a.cardsOptions.cards,a.contentOptions.datepickerOptions.startDate,a.contentOptions.datepickerOptions.endDate,a.cardsOptions.margin,a.contentOptions),angular.extend(a,b.getInstance()),a.refresh=function(c){b.refresh(c),angular.extend(a,b.getInstance())},a.enableDebugging=function(a){b.enableDebugging(a)},a.flipAll=function(){b.flipAll()},a.clear=function(){b.clear()}}]),angular.module("gridTaskApp").directive("cards",["templatesPath","$timeout",function(a,b){return{restrict:"EA",templateUrl:a+"directive-templates/cards.html",scope:{cardsOptions:"=cards",contentOptions:"="},controller:"cardsCtrl",link:function(a,c,d){a.contentOptions.enableDebugging&&(a.$on("debugFlip",function(b,d){c.find("#"+a.contentOptions.debugCard.id).flip()}),b(function(){a.enableDebugging(!0)})),a.$watch("cardsOptions.cards",function(d){a.refresh(d),a.$on("cardFlip",function(a,b){c.find("#"+b).flip()}),b(function(){a.flipAll()})}),a.$on("$destroy",function(){a.clear()})}}}]),angular.module("gridTaskApp").controller("chartSegmentCtrl",["$scope",function(a){a.panel={header:{text:"Selected Users"},btn:{text:"Create Segment"}},a.deleteUser=function(b,c){a.selectedUsers.splice(c,1)}}]),angular.module("gridTaskApp").directive("chartSegment",["templatesPath",function(a){return{retstrict:"EA",scope:{selectedUsers:"="},replace:!0,controller:"chartSegmentCtrl",templateUrl:a+"directive-templates/chart-segment.html"}}]),angular.module("gridTaskApp").controller("checkboxSelectCtrl",["$scope",function(a){void 0===a.options.selected&&(a.options.selected={}),a.options.callback&&a.$on("checkboxSelect",function(b,c){a.options.callback(c)}),a.$watch("options.selected",function(a){a&&(a.isAll?a.check=!0:a.check=!1)}),a.toggle=function(){a.isShow=!a.isShow},a.turnOff=function(){a.isShow=!1},a.select=function(b){a.turnOff(),a.options.selected=b,a.$emit("checkboxSelect",b)},a.checked=function(b){a.turnOff(),b?a.options.selected=a.options.actions.all:a.options.selected=a.options.actions.noOne,a.$emit("checkboxSelect",a.options.selected)}}]),angular.module("gridTaskApp").directive("checkboxSelect",["templatesPath",function(a){return{restrict:"EA",scope:{options:"=checkboxSelect"},replace:!0,templateUrl:a+"directive-templates/checkbox-select.html",controller:"checkboxSelectCtrl",link:function(a,b,c){}}}]),angular.module("gridTaskApp").controller("coreDiagramCtrl",["chartFactory","$scope","$parse",function(a,b,c){b.chart=a.getChart(b.data,b.opt),b.mouseOverInit=function(a){b.type=c("mouseover.type")(a),b.value={header:c("mouseover.header")(a),data:c("mouseover.data")(a)}}}]),angular.module("gridTaskApp").directive("coreDiagram",["templatesPath","$compile",function(a,b){return{restrict:"EA",templateUrl:a+"directive-templates/core-diagram.html",controller:"coreDiagramCtrl",scope:{opt:"=coreDiagram",data:"=sankeyData"},link:function(a,c,d){a.$watch("data",function(b){b&&(a.chart.clearHtml(c.find("#chart")),a.chart.refreshData(b),a.chart.fullRenderSankey())}),a.$on("mouseover",function(d,e){a.mouseOverInit(e),angular.element("mouse-over").remove(),a.parentTop=c.offset().top,c.append("<mouse-over type='type' parent-top='parentTop' value='value'></mouse-over>"),b(angular.element("mouse-over"))(a)}),a.$on("mouseout",function(){angular.element("mouse-over").remove()}),a.$on("drag",function(b,c,d){d3.select(d).attr("transform","translate("+(c.x=Math.max(0,Math.min(a.chart.width-c.dx,d3.event.x)))+","+(c.y=Math.max(0,Math.min(a.chart.height-c.dy,d3.event.y)))+")"),a.chart.sankey.relayout(),a.chart.link.attr("d",a.chart.path)}),a.$on("$destroy",function(){a.chart.destroy()})}}}]),angular.module("gridTaskApp").controller("customDatepickerCtrl",["$scope","$element",function(a,b){a.dateBtnSelector=".date-btn__toggle",a.toggle=function(){a.isShow=!a.isShow,a.isShow?b.find(a.dateBtnSelector).data("dateRangePicker").open():angular.element(a.dateBtnSelector).data("dateRangePicker").close()},a.close=function(){a.isShow=!1,b.find(a.dateBtnSelector).data("dateRangePicker").close()}}]),angular.module("gridTaskApp").directive("customDatepicker",["templatesPath",function(a){return{restrict:"EA",templateUrl:a+"directive-templates/custom-datepicker.html",scope:{opt:"=customDatepicker"},controller:"customDatepickerCtrl",link:function(a,b,c){b.find(a.dateBtnSelector).dateRangePicker(a.opt.config).bind("datepicker-change",function(b,c){a.opt.startDate=c.date1,a.opt.endDate=c.date2,a.opt.dateRange=Math.abs(a.opt.endDate.getTime()-a.opt.startDate.getTime()),a.$apply()}).bind("datepicker-close",function(){a.isShow=!1,"$apply"!=a.$root.$$phase&&"$digest"!=a.$root.$$phase&&a.$apply()})}}}]),angular.module("gridTaskApp").controller("customGridCtrl",["$scope","templatesPath",function(a,b){}]),angular.module("gridTaskApp").directive("customGrid",["templatesPath",function(a){return{restrict:"EA",controller:"customGridCtrl",scope:{data:"=gridData",exportTo:"=",options:"=gridOptions"},require:["?^gridData","?^gridOptions"],templateUrl:a+"directive-templates/custom-grid.html",link:function(a,b,c){}}}]),angular.module("gridTaskApp").controller("gridMenuCtrl",["$scope","MENU","$window",function(a,b,c){a.options=a.options.menu,void 0===a.options&&(a.options={}),void 0===a.options.isMenu&&(a.options.isMenu=!1),void 0===a.options.label&&(a.options.label=""),void 0===a.options.values&&(a.options.values=[]),void 0===a.options.isCheckbox&&(a.options.isCheckbox=!0),void 0===a.options.onCheck&&(a.options.onCheck=function(b,c){a.columns[c].toggleVisible(),a.resize(b)}),void 0===a.options.withSave&&(a.options.withSave=!1),void 0===a.options.onSave&&(a.options.onSave=function(){}),void 0===a.options.callback&&(a.options.callback=function(a){}),void 0===a.options.parentSelector&&(a.options.parentSelector=b.parentSelector),void 0===a.options.parentMinWidth&&(a.options.parentMinWidth=b.parentMinWidth),a.resize=function(b){for(var d=a.columns.reduce(function(a,b){return b.visible?a+b.minWidth:a},0),e=0;e<a.colCache.length;e++)a.colCache[e].label==b.label&&a.colCache.splice(e,1);angular.element(c).width()<d?angular.element(a.options.parentSelector).css("minWidth",d+"px"):angular.element(a.options.parentSelector).css("minWidth",a.options.parentMinWidth+"px")}}]),angular.module("gridTaskApp").directive("gridMenu",["templatesPath","$window",function(a,b){return{restrict:"EA",templateUrl:a+"directive-templates/grid-menu.html",controller:"gridMenuCtrl",link:function(a,c,d){a.$watch("columns",function(c){if(Array.isArray(c)&&c.length>0){a.colCache=[],a.options.values=[];var d=c.reduce(function(a,b){return a+b.minWidth;
},0);if(angular.element(b).width()<d)for(var e=c.length-2;e>1&&(c[e].visible&&(c[e].toggleVisible(),d-=c[e].minWidth,a.colCache.push({label:c[e].field,element:c[e]})),!(angular.element(b).width()>d));e--);(a.colCache.length>0||a.$parent.options.showResponsMenu)&&(a.isShow=!0);for(var e=0;e<c.length;e++)a.options.values.push({label:c[e].field,element:c[e],isVisible:c[e].visible})}});var e=function(){var c=a.columns.reduce(function(a,b){return b.visible?a+b.minWidth:a},0);if(angular.element(b).width()<c)for(var d=a.columns.length-2;d>1&&(a.columns[d].visible&&(a.columns[d].toggleVisible(),c-=a.columns[d].minWidth,a.colCache.push({label:a.columns[d].field,element:a.columns[d]})),!(angular.element(b).width()>c));d--);else for(var d=0;d<a.columns.length;d++)if(!a.columns[d].visible){a.columns[d].toggleVisible(),c+=a.columns[d].minWidth;for(var e=0;e<a.colCache.length;e++)a.colCache[e].label==a.columns[d].field&&a.colCache.splice(e,1);if(angular.element(b).width()<c){a.columns[d].toggleVisible(),c-=a.columns[d].minWidth;for(var f=!1,e=0;e<a.colCache.length;e++)a.colCache[e].label==a.columns[d].field&&(f=!0);if(f){a.colCache=[];for(var e=0;e<a.columns.length;e++)a.columns[e].visible||a.colCache.push({label:a.columns[e].field,element:a.columns[e]})}else a.colCache.push({label:a.columns[d].field,element:a.columns[d]});break}}a.options.values=[];for(var d=0;d<a.columns.length;d++)a.options.values.push({label:a.columns[d].field,element:a.columns[d],isVisible:a.columns[d].visible});a.colCache.length>0||a.$parent.options.showResponsMenu?a.isShow=!0:a.isShow=!1};angular.element(b).resize(e),a.$on("$destroy",function(){angular.element(b).off("resize",e)})}}}]),angular.module("gridTaskApp").directive("rowCheck",[function(){return{restrict:"EAC",scope:{value:"=rowCheck"},link:function(a,b,c){a.$watch("value.orig.actions.isCheck",function(a){a?b.parent().addClass("checked"):b.parent().removeClass("checked")})}}}]),angular.module("gridTaskApp").controller("customUiGridCtrl",["$scope","templatesPath","$compile","$rootScope",function(a,b,c,d){a.options.onRegisterApi=function(b){a.gridApi=b,b.core.on.rowsRendered(a,function(){a.gridApi.grid.rows.forEach(function(b){a.options.enableAction?(b.actions=angular.copy(a.options.rowActions),b.actions["static"]=new Row(b,d,c),b.actions.history=[],b.actions.options.callback=function(c){c.isEdit?b.actions["static"].edit():c.isCopy?b.actions["static"].copy():c.isDelete?b.actions["static"]["delete"](a.data):c.isHistory&&b.actions["static"].history()}):b.actions={},a.options.enableDetails&&(b.actions.tab=2,b.actions.expand=function(){a.gridApi.expandable.toggleRowExpansion(b.entity)},b.actions.disableCheck=a.options.disableCheck),a.contentOptions.checks&&(b.actions.setCheck=function(){var b=a.gridApi.grid.rows,c=b.filter(function(a){return a.isCheck?!0:void 0});0==c.length?a.contentOptions.checks.options.selected=a.contentOptions.checks.options.actions.noOne:c.length==b.length?a.contentOptions.checks.options.selected=a.contentOptions.checks.options.actions.all:a.contentOptions.checks.options.selected=a.contentOptions.checks.options.actions.marked,a.gridApi.grid.refresh()})})}),a.gridApi.grid.registerRowsProcessor(a.singleFilter,200),a.options.enableDetails&&b.expandable.on.rowExpandedStateChanged(a,function(b){b.isExpanded&&a.gridApi.grid.rows.forEach(function(a){a.isExpanded&&b.entity!=a.entity&&a.actions.expand()})}),a.contentOptions.checks&&(a.contentOptions.checks.options.callback=function(b){b&&(b.isAll?a.gridApi.grid.rows.forEach(function(a){a.isCheck=!0}):b.isNoOne?a.gridApi.grid.rows.forEach(function(a){a.isCheck=!1}):b.isMarked?a.gridApi.grid.rows.forEach(function(a){}):b.isNotMarked&&a.gridApi.grid.rows.forEach(function(a){a.isCheck=!a.isCheck}))})},a.singleFilter=function(b){var c=a.options.filterOptions.filterText.split(";");if(1==c.length&&-1==c[0].indexOf(":")){var d=new RegExp(a.options.filterOptions.filterText);b.forEach(function(b){var c=!1;a.options.columnDefs.forEach(function(a){void 0!==b.entity[a.field]&&b.entity[a.field].toString().match(d)&&(c=!0)}),c||(b.visible=!1)})}else for(var e=0;e<c.length&&""!=c[e];e++){var f=c[e].substr(0,c[e].indexOf(":")),g=c[e].substr(c[e].indexOf(":")+1),d=new RegExp(g);b.forEach(function(b){var c=!1;a.options.columnDefs.forEach(function(a){void 0!==b.entity[f]&&b.entity[f].toString().match(d)&&(c=!0)}),c||(b.visible=!1)})}return b},a.rowChangedClass=function(a){return a},a.$watch("options.filterOptions.filterText",function(b){a.gridApi.grid.refresh()}),a.$watch("data",function(b){if(a.options.reInit){var c=[];if(a.options.enableDetails&&c.push({field:"details",displayName:"",headerCellTemplate:a.options.headerCellTemplate,cellTemplate:a.options.detailsCellTemplate,enableSorting:!1,width:a.options.detailsWidth,minWidth:a.options.detailsMinWidth,enableFiltering:a.options.enableColumnFilter,cellClass:a.options.cellClass}),b[0]){for(var d=0;d<b.length;d++)if(b[d].isColumn)return;for(var e in b[0])"$$hashKey"!=e&&c.push({field:e,displayName:e,enableFiltering:a.options.enableColumnFilter,minWidth:a.options.columnMinWidth,cellClass:a.options.cellClass})}a.options.enableAction&&c.push({field:"action",displayName:"",cellTemplate:a.options.actionsCellTemplate,headerCellTemplate:a.options.headerCellTemplate,enableSorting:!1,width:a.options.actionsWidth,minWidth:a.options.actionsMinWidth,enableFiltering:a.options.enableColumnFilter,cellClass:a.options.cellClass}),a.options.columnDefs=c}})}]),angular.module("gridTaskApp").directive("customUiGrid",["templatesPath",function(a){return{restrict:"EA",scope:{data:"=gridData",options:"=gridOptions",contentOptions:"="},controller:"customUiGridCtrl",require:["?^gridData","?^gridOptions"],templateUrl:a+"directive-templates/custom-ui-grid.html",link:function(a,b,c){}}}]),angular.module("gridTaskApp").controller("uiGridMenuCtrl",["$scope","MENU","uiGridGridMenuService","$window",function(a,b,c,d){void 0===a.options.menu&&(a.options.menu={}),void 0===a.options.menu.parentSelector&&(a.parentSelector=b.parentSelector),void 0===a.options.menu.parentMinWidth&&(a.parentMinWidth=b.parentMinWidth),a.options.showResponsMenu&&(a.options.enableGridMenu=!0),a.getTotalWidth=function(){var b=a.gridApi.grid.columns.reduce(function(a,b){return b.visible?a+b.minWidth:a},0);return b},a.changeMinWidth=function(b){angular.element("body")[0].scrollWidth<b?angular.element(a.parentSelector).css("minWidth",b+"px"):angular.element(a.parentSelector).css("minWidth",a.parentMinWidth+"px")},a.resize=function(b){if(angular.element("body")[0].scrollWidth<b)for(var e=a.gridApi.grid.columns.length-2;e>1&&(a.gridApi.grid.columns[e].visible&&(c.toggleColumnVisibility(a.gridApi.grid.columns[e]),b-=a.gridApi.grid.columns[e].minWidth),!(angular.element(d).width()>b));e--);else for(var e=0;e<a.gridApi.grid.columns.length;e++)if(!a.gridApi.grid.columns[e].visible){if(angular.element(d).width()<b+a.gridApi.grid.columns[e].minWidth)break;c.toggleColumnVisibility(a.gridApi.grid.columns[e]),b+=a.gridApi.grid.columns[e].minWidth}}}]),angular.module("gridTaskApp").directive("uiGridCustomMenu",["$timeout","$window",function(a,b){return{restrict:"EA",controller:"uiGridMenuCtrl",link:function(c,d,e){var f={};f.scope=c,a(function(){this.scope.gridApi.core.on.columnVisibilityChanged(this.scope,function(){var a=c.getTotalWidth();c.changeMinWidth(a)}.bind(this));var a=c.getTotalWidth();c.resize(a);for(var d=!0,e=0;e<this.scope.gridApi.grid.columns.length;e++)this.scope.gridApi.grid.columns[e].visible||(d=!1);d||f.scope.options.enableGridMenu||(f.scope.options.enableGridMenu=!0);var g=function(){var a=c.getTotalWidth();if(c.resize(a),!f.scope.options.showResponsMenu){for(var b=!0,d=0;d<this.scope.gridApi.grid.columns.length;d++)this.scope.gridApi.grid.columns[d].visible||(b=!1);b?f.scope.options.enableGridMenu=!1:f.scope.options.enableGridMenu=!0}}.bind(this);angular.element(b).resize(g),c.$on("$destroy",function(){angular.element(b).off("resize",g)})}.bind(f))}}}]),angular.module("gridTaskApp").directive("details",["$compile","$timeout",function(a,b){return{restict:"A",scope:{row:"=",detailsClass:"="},link:function(a,b,c){b.click(function(){a.row.orig.actions.isToggle=!a.row.orig.actions.isToggle,a.row.orig.actions.setToggle(a.row.orig,a.row.orig.actions.isToggle,a.detailsClass)})}}}]),angular.module("gridTaskApp").controller("dropdownCtrl",["$scope",function(a){void 0===a.options&&(a.options={}),a.options.isMenu?a.options.selected={}:(a.options.selected=a.options.values[0],a.options.callback&&a.options.callback(a.options.selected)),a.select=function(b){a.options.selected=b,a.options.callback&&a.options.callback(b),a.isShow=!1}}]),angular.module("gridTaskApp").directive("dropdown",["templatesPath",function(a){return{restrict:"EA",scope:{options:"=dropdown"},controller:"dropdownCtrl",templateUrl:a+"directive-templates/dropdown.html",link:function(a,b,c){}}}]),angular.module("gridTaskApp").directive("dynamicDropdown",["templatesPath","$compile","$timeout","$window",function(a,b,c,d){return{restrict:"EA",scope:{origOpt:"=",dropdownOpt:"=",col:"=",row:"=",reInit:"=",toResize:"="},templateUrl:a+"grid-templates/dynamic-actions.html",link:function(a,b,c){var e=function(){for(var c=0;c<a.dynamicOpt.values.length;c++)if(!a.dynamicOpt.values[c].isVisible){if(a.totalWidth+=a.dynamicOpt.values[c].width,a.totalWidth+a.offset.left>angular.element("body").prop("scrollWidth")){a.totalWidth-=a.dynamicOpt.values[c].width;break}a.dynamicOpt.values[c].toggleVisible(!0)}if(a.$apply(),a.dropdownOpt.isVisible){void 0===a.dropdownOpt.width&&(a.dropdownOpt.width=b.parent().find("div[dropdown]").width()),a.totalWidth+=a.dropdownOpt.width;for(var c=0;c<a.dynamicOpt.values.length;c++)a.dynamicOpt.values[c].isVisible?a.dropdownOpt.values.splice(a.dropdownOpt.values.indexOf(a.dynamicOpt.values[c]),1):-1==a.dropdownOpt.values.indexOf(a.dynamicOpt.values[c])&&a.dropdownOpt.values.push(a.dynamicOpt.values[c])}else a.totalWidth-=a.dropdownOpt.width;if(a.totalWidth+a.offset.left>angular.element("body").prop("scrollWidth")){for(var c=a.dynamicOpt.values.length-1;c>-1&&!(a.dynamicOpt.values[c].isVisible&&(a.dynamicOpt.values[c].toggleVisible(!1),a.totalWidth-=a.dynamicOpt.values[c].width,a.totalWidth+a.offset.left<angular.element("body").prop("scrollWidth")));c--);for(var c=0;c<a.dynamicOpt.values.length;c++)a.dynamicOpt.values[c].isVisible?a.dropdownOpt.values.splice(a.dropdownOpt.values.indexOf(a.dynamicOpt.values[c]),1):-1==a.dropdownOpt.values.indexOf(a.dynamicOpt.values[c])&&a.dropdownOpt.values.push(a.dynamicOpt.values[c])}},f=function(){for(var c=a.dynamicOpt.values.length-1;c>-1&&!(a.dynamicOpt.values[c].isVisible&&(a.dynamicOpt.values[c].toggleVisible(!1),a.totalWidth-=a.dynamicOpt.values[c].width,a.totalWidth+a.offset.left<angular.element("body").prop("scrollWidth")));c--);if(a.$apply(),a.dropdownOpt.isVisible){void 0===a.dropdownOpt.width&&(a.dropdownOpt.width=b.parent().find("div[dropdown]").width()),a.totalWidth+=a.dropdownOpt.width;for(var c=0;c<a.dynamicOpt.values.length;c++)a.dynamicOpt.values[c].isVisible?a.dropdownOpt.values.splice(a.dropdownOpt.values.indexOf(a.dynamicOpt.values[c]),1):-1==a.dropdownOpt.values.indexOf(a.dynamicOpt.values[c])&&a.dropdownOpt.values.push(a.dynamicOpt.values[c])}else a.totalWidth-=a.dropdownOpt.width;if(a.totalWidth+a.offset.left>angular.element("body").prop("scrollWidth")){for(var c=a.dynamicOpt.values.length-1;c>-1&&!(a.dynamicOpt.values[c].isVisible&&(a.dynamicOpt.values[c].toggleVisible(!1),a.totalWidth-=a.dynamicOpt.values[c].width,a.totalWidth+a.offset.left<angular.element("body").prop("scrollWidth")));c--);for(var c=0;c<a.dynamicOpt.values.length;c++)a.dynamicOpt.values[c].isVisible?a.dropdownOpt.values.splice(a.dropdownOpt.values.indexOf(a.dynamicOpt.values[c]),1):-1==a.dropdownOpt.values.indexOf(a.dynamicOpt.values[c])&&a.dropdownOpt.values.push(a.dynamicOpt.values[c])}};a.dynamicOpt=angular.copy(a.origOpt),a.dropdownOpt=angular.copy(a.origOpt),a.dropdownOpt.values=[],a.dropdownOpt.style={"z-index":"-1"},a.dropdownOpt.isVisible=!0;for(var g=0;g<a.dynamicOpt.values.length;g++)a.dynamicOpt.values[g].isVisible=!0,a.dynamicOpt.values[g].toggleVisible=function(a){this.isVisible=a};a.$on("ngRepeatFinished",function(c){a.totalWidth=20,a.offset=b.parent().offset();for(var d=0;d<a.dynamicOpt.values.length;d++)a.dynamicOpt.values[d].width=b.find("."+a.dynamicOpt.values[d].label).width(),a.totalWidth+=a.dynamicOpt.values[d].width;a.totalWidth+a.offset.left<angular.element("body").prop("scrollWidth")?e():f();for(var g=0,d=0;d<a.dynamicOpt.values.length;d++)a.dynamicOpt.values[d].isVisible&&(g+=1,g>2&&(g-=1,a.dynamicOpt.values[d].toggleVisible(!1)));g>0?a.dropdownOpt.label="More":a.dropdownOpt.label="Actions",a.dropdownOpt.style={"z-index":"9"}});var h=function(){0!=b.parent().offset().left&&(a.offset=b.parent().offset()),a.totalWidth=20;for(var c=0;c<a.dynamicOpt.values.length;c++)a.dynamicOpt.values[c].isVisible&&(a.totalWidth+=a.dynamicOpt.values[c].width);if(a.dropdownOpt.isVisible&&(a.totalWidth+=a.dropdownOpt.width),a.totalWidth+a.offset.left<angular.element("body").prop("scrollWidth")){a.dynamicOpt.values.sort(function(a,b){return a.priority>b.priority?-1:a.priority<b.priority?1:0});for(var d=0,c=0;c<a.dynamicOpt.values.length&&(a.dynamicOpt.values[c].isVisible&&(a.totalWidth-=a.dynamicOpt.values[c].width,a.dynamicOpt.values[c].toggleVisible(!1)),a.totalWidth+a.offset.left+a.dynamicOpt.values[c].width<angular.element("body").prop("scrollWidth")&&(a.totalWidth+=a.dynamicOpt.values[c].width,a.dynamicOpt.values[c].toggleVisible(!0),d+=1),2!=d);c++);d>0?a.dropdownOpt.label="More":a.dropdownOpt.label="Actions"}else{a.dynamicOpt.values.sort(function(a,b){return a.priority>b.priority?1:a.priority<b.priority?-1:0});for(var d=0,c=0;c<a.dynamicOpt.values.length&&(a.dynamicOpt.values[c].isVisible&&(a.totalWidth-=a.dynamicOpt.values[c].width,a.dynamicOpt.values[c].toggleVisible(!1)),a.totalWidth+a.offset.left+a.dynamicOpt.values[c].width<angular.element("body").prop("scrollWidth")&&(a.totalWidth+=a.dynamicOpt.values[c].width,a.dynamicOpt.values[c].toggleVisible(!0),d+=1),2!=d);c++);d>0?a.dropdownOpt.label="More":a.dropdownOpt.label="Actions"}a.dropdownOpt.values=[];for(var c=0;c<a.dynamicOpt.values.length;c++)a.dynamicOpt.values[c].isVisible||a.dropdownOpt.values.push(a.dynamicOpt.values[c]);a.$apply()};angular.element(d).resize(h),a.$on("$destroy",function(){angular.element(d).off("resize",h)})}}}]),angular.module("gridTaskApp").controller("filterCtrl",["$scope","$element",function(a,b){a.listState=!1,a.filterClick=function(){a.listState=!a.listState,a.listState&&a.filterOptions.forEach(function(a){a.filter=""})},a.showRecords=function(){a.listState=!1,a.filtrate(a.filterOptions)}}]),angular.module("gridTaskApp").controller("filterListCtrl",["$scope",function(a){a.filter=function(){a.isFiltrate=!0}}]),angular.module("gridTaskApp").directive("filterList",["templatesPath",function(a){return{restrict:"EA",templateUrl:a+"directive-templates/filter-list.html",controller:"filterListCtrl",link:function(a,b,c){}}}]),angular.module("gridTaskApp").directive("filter",["templatesPath",function(a){return{restrict:"EA",scope:{filterOptions:"=filter",filtrate:"=onFiltrate"},controller:"filterCtrl",templateUrl:a+"directive-templates/filter.html",link:function(a,b,c){}}}]),angular.module("gridTaskApp").directive("grTemplate",["myTemplateService","templatesPath",function(a,b){return{restrict:"EAC",scope:{template:"=grTemplate",name:"@grName"},replace:!0,require:"?^grName",templateUrl:b+"directive-templates/gr-template.html",link:function(b,c,d){a.put(b.template,b.name),b.templateUrl=b.name}}}]),angular.module("gridTaskApp").directive("graphs",["templatesPath",function(a){return{restrict:"EA",scope:{graphs:"="},templateUrl:a+"directive-templates/graphs.html",link:function(a,b,c){}}}]),angular.module("gridTaskApp").directive("hideRender",["$timeout",function(a){return{restrict:"AC",priority:1e3,compile:function(a,b){return{pre:function(a,b,c){b.hide()},post:function(a,b,c){b.show()}}}}}]),angular.module("gridTaskApp").controller("histogramCtrl",["$scope",function(a){a.selectedUsers=[],a.select=function(b){"1"!=b.name?a.selectedUsers.push({touchpoints:b.name+" touchpoints"}):a.selectedUsers.push({touchpoints:b.name+" touchpoint"}),a.$apply()}}]),angular.module("gridTaskApp").directive("histogram",["templatesPath","$compile",function(a,b){return{restrict:"EA",controller:"histogramCtrl",scope:{data:"=histogramData"},require:"?histogramData",templateUrl:a+"directive-templates/histogram.html",link:function(a,b,c){a.$watch("data",function(c){if(c){b.find(".chart").remove(),b.find(".histogram").append('<svg class="chart"></svg>');var d={top:50,right:30,bottom:60,left:90},e=700-d.left-d.right,f=340-d.top-d.bottom,g=d3.scale.ordinal().domain(c.map(function(a){return a.name})).rangeRoundBands([0,e],.1),h=d3.scale.linear().domain([0,9e5]).range([f,0]),i=d3.svg.axis().scale(g).orient("bottom"),j=d3.svg.axis().scale(h).orient("left"),k=d3.select(".chart").attr("width",e+d.left+d.right).attr("height",f+d.top+d.bottom).append("g").attr("transform","translate("+d.left+","+d.top+")");k.selectAll(".bar").data(c).enter().append("rect").attr("class","bar").attr("x",function(a){return g(a.name)+38}).attr("y",function(a){return h(a.value)}).attr("height",function(a){return f-h(a.value)}).attr("width",g.rangeBand()/2).on("click",function(b){a.select(b)}),k.append("g").attr("class","y axis").call(j).append("text").attr("transform","rotate(-90)").attr("x",-f/2).attr("y",-10-d.bottom).attr("dy",".1em").attr("dx","40px").style("text-anchor","end").text("Population"),k.append("g").attr("class","x axis").attr("transform","translate(0,"+f+")").call(i).append("text").attr("x",e/2).attr("y",d.bottom-25).attr("dy",".71em").style("text-anchor","end").text("Touchpoint #"),k.append("text").text("Potential Rich histogram").attr("x",200).attr("class","title")}})}}}]),angular.module("gridTaskApp").directive("kxDateRange",["$parse","$translate",function(a,b){return{restrict:"CAE",require:"?ngModel",compile:function(a,c){return c.disableEdit?a.append('<span class="kx-daterangepicker">\n  <span class="add-on glyph-calendar">\n    <i class="icon-calendar icon-large"></i>\n  </span>\n  <form ng-submit="onHitReturn()">\n    <input kx-stealth-input\n    ng-model="inputValue"\n    ng-change="onInputChange()"\n    ng-class="{\'ng-invalid\': isInvalid}" readonly></input>\n  </form>\n</span>'):a.append('<span class="kx-daterangepicker">\n  <span class="add-on glyph-calendar">\n    <i class="icon-calendar icon-large"></i>\n  </span>\n  <form ng-submit="onHitReturn()">\n    <input kx-stealth-input\n    ng-model="inputValue"\n    ng-change="onInputChange()"\n    ng-class="{\'ng-invalid\': isInvalid}"></input>\n  </form>\n</span>'),a.after('<span ng-show="isInvalid" class="help-inline calendar-invalid-msg">{{"Incorrect Date" | translate}}</span>'),function(a,c,d,e){var f,g,h,i,j,k,l,m,n;return h=function(a){var b,c,e;return e=a.start,b=a.end,c=e.isValid()&&b.isValid(),c&&("future"===d.timeRange?e&&b&&moment()<=e&&b>=e:"past"===d.timeRange?e&&b&&b>=e&&b<=moment():e&&b)},i=c.offset(),l=i.left<=400?"right":"left",f=d.format||"MMM DD, YYYY",n=d.separator||" - ",m=function(a){return a.start.format(f)+n+a.end.format(f)},j=_.bind(function(b,c){return b.isSame(e.$viewValue.start)&&c.isSame(e.$viewValue.end)?void 0:(a.inputValue=m({start:b,end:c}),e.$setViewValue({start:b,end:c}),e.$setValidity("parses",!0))}),a.onHitReturn=function(){var a;return a=c.data("daterangepicker"),j(a.startDate,a.endDate)},a.onInputChange=function(){var b,d,e;return b=a.inputValue.split(n),2===b.length?(e={start:moment(b[0],f,!0),end:moment(b[1],f,!0)},d=c.data("daterangepicker"),d.setStartDate(e.start),d.setEndDate(e.end),a.isInvalid=!h(e)):a.isInvalid=!0},k=function(b){var d,e,f,g;return b&&b.start?(g=b.start,e=b.end,d=c.data("daterangepicker"),d.oldStartDate=g,d.oldEndDate=e,d.startDate=g,d.endDate=e,d.updateView(),d.updateCalendars(),f=m(b),a.inputValue=f,f):void 0},e.$parsers.push(function(a){var b,c;return _.isString(a)?(b=a.split(n),c={start:moment(b[0],f,!0),end:moment(b[1],f,!0)},e.$setValidity("parses",h(c)),h(c)?c:void 0):a}),g=e.$render,e.$render=function(){return g(),c.trigger("keyup")},b(["Today","Yesterday","Last 7 Days","Last 30 Days","This Month","Last Month","Last 3 Months","Apply","Cancel","From","To","W","Custom Range"]).then(function(a){var b,g,h,i,m,o,p,q;for(e.$formatters.push(k),p=[[a.Today,[moment(),moment()]],[a.Yesterday,[moment().subtract(1,"days"),moment().subtract(1,"days")]],[a["Last 7 Days"],[moment().subtract(7,"days"),moment().subtract(1,"days")]],[a["Last 30 Days"],[moment().subtract(30,"days"),moment().subtract(1,"days")]],[a["This Month"],[moment().startOf("month"),moment().subtract(1,"days")]],[a["Last Month"],[moment().subtract(1,"months").startOf("month"),moment().subtract(1,"months").endOf("month")]],[a["Last 3 Months"],[moment().subtract(3,"months").startOf("month"),moment().subtract(1,"months").endOf("month")]]],m={"kx-date-range":_.object(p),exceptToday:_.object(_.rest(p)),lastYear:{}},h=i=11;i>=0;h=--i)b=function(){return moment().subtract("months",h)},q=b().startOf("month"),g=0===h?b():b().endOf("month"),m.lastYear[b().format("MMM YYYY")]=[q,g];return o={format:f,separator:n,startDate:moment().subtract("day",6),endDate:moment(),locale:{applyLabel:a.Apply,cancelLabel:a.Cancel,fromLabel:a.From,toLabel:a.To,weekLabel:a.W,customRangeLabel:a["Custom Range"]}},"future"===d.timeRange?_.extend(o,{minDate:moment()}):"past"===d.timeRange&&_.extend(o,{maxDate:moment(),opens:l,ranges:m[d.kxDateRange]}),c.daterangepicker(o),k(e.$modelValue)||k({start:o.startDate,end:o.endDate}),c.on("apply.daterangepicker",function(a,b){return j(b.startDate,b.endDate)}),angular.element(".daterangepicker.dropdown-menu").css("display","none"),e.$render()})}}}}]),angular.module("gridTaskApp").directive("kxMultiselect",["$timeout",function(a){return{restrict:"A",scope:{options:"=kxMultiselect"},link:function(b,c,d){a(function(){c.multipleSelect(b.options)})}}}]),function(){angular.module("gridTaskApp").directive("kxMenu",[function(){return{restrict:"AE",link:function(a,b,c){var d,e,f,g;return e=null,d=null,g=null,f=null,a.session={user:{id:1}},a.$watch("session.user.id",function(c){var h,i,j,k,l,m,n;return c&&(null!=(n=a.navigationTree)?n.length:void 0)>0?(e=b.children("ul").children("li"),sessionStorage.selectedNav&&(m=JSON.parse(sessionStorage.selectedNav),g=e.eq(1),g.addClass("kx-menu-selected")),j=function(){return e.mouseenter(k),e.mouseleave(l)},k=function(a){return d=e.filter(this),d.addClass("kx-menu-open"),f=d.children(".kx-submenu").find("a"),f.click(h)},l=function(a){return d?i():void 0},h=function(a){return g&&g.removeClass("kx-menu-selected"),g=d,g.addClass("kx-menu-selected"),m={index:_.indexOf(e,g[0])},sessionStorage.selectedNav=JSON.stringify(m),i()},i=function(){return d.removeClass("kx-menu-open"),d=null,f.off("click"),f=null},j()):void 0})}}}])}.call(this),angular.module("gridTaskApp").controller("kxNavBarCtrl",["$scope",function(a){}]),angular.module("gridTaskApp").directive("kxNavBar",["templatesPath",function(a){return{restrict:"A",controller:"kxNavBarCtrl",scope:{},templateUrl:a+"directive-templates/kx-nav-bar.html",link:function(a,b,c){}}}]),angular.module("gridTaskApp").controller("NavigationCtrl",["$scope","NavigationTree",function(a,b){return a.navigationTree=b.get()}]),angular.module("gridTaskApp").directive("kxStealthInput",[function(){return{restrict:"CAE",link:function(a,b,c){var d,e,f;return d=!1,e=!1,f=function(){return b.toggleClass("stealth-mode",!(d||e))},b.focus(function(){return d=!0,f()}),b.blur(function(){return d=!1,f()}),b.mouseover(function(){return e=!0,f()}),b.mouseout(function(){return e=!1,f()}),f()}}}]),angular.module("gridTaskApp").controller("loadingCtrl",["$scope","LOADING",function(a,b){var c=this;void 0===c.parent&&(c.parent=b.parentSelector),c.resize=function(){c.disabled={height:angular.element(c.parent).height()+"px",width:angular.element(c.parent).width()+"px",top:0}}}]),angular.module("gridTaskApp").directive("loading",["templatesPath","LOADING","$window",function(a,b,c){return{restrict:"EA",scope:{parent:"="},templateUrl:a+"directive-templates/loading.html",controller:"loadingCtrl",controllerAs:"ctrl",link:function(a,b,d,e){e.resize(),angular.element(c).resize(e.resize),a.$on("$destroy",function(){angular.element(c).off("resize",e.resize)})}}}]),angular.module("gridTaskApp").directive("maxHeighter",["$timeout","$window",function(a,b){function c(a){getWindowHeight()-a.offset().top>0?a.css("max-height",getWindowHeight()-a.offset().top-10+"px"):a.css("max-height","100px")}return{restrict:"EAC",scope:{},compile:function(d,e){return d.onPositionChanged(function(){c(d)},0),{post:function(d,e,f){var g=function(){c(e)};a(function(){c(e)}),angular.element(b).resize(g),d.$on("$destroy",function(){angular.element(b).off("resize",g)})}}}}}]),angular.module("gridTaskApp").controller("modalCtrl",["$scope","$element","$timeout",function(a,b,c){a.isModal=!0,a.fields=[],a.myEntity=angular.copy(a.value.entity),a.modal="modal-ctrl",a.save=function(){Array.isArray(a.value.actions.history)||(a.value.actions.history=[]),a.value.actions.history.push({dateChange:new Date,oldObj:angular.copy(a.value.entity),newObj:angular.copy(a.myEntity)});for(var b in a.myEntity)a.value.entity[b]=a.myEntity[b];a.close()},a.close=function(){a.myEntity={},a.isModal=!1},a.resize=function(){a.fade={height:b.find(".dialog").prop("scrollHeight")+60+"px",width:b.find(".dialog").prop("scrollWidth")+"px"}},a.onInclude=function(){c(function(){a.fade={height:b.find("."+a.modal).prop("scrollHeight")+"px"}})}}]),angular.module("gridTaskApp").directive("modal",["templatesPath","$timeout","$window",function(a,b,c){return{restrict:"EA",templateUrl:a+"directive-templates/modal.html",scope:{value:"=",bodyTemplateUrl:"@",bodyTemplate:"@",enableSave:"="},controller:"modalCtrl",link:function(a,d,e){var f;f=function(){a.resize()},angular.element(c).resize(f),a.$on("$destroy",function(){angular.element(c).off("resize",f)}),a.$watch("isModal",function(c){b(function(){c?(a.resize(),angular.element("body").css("overflow","hidden")):(angular.element(d).remove(),angular.element("body").css("overflow","inherit"))})})}}}]),angular.module("gridTaskApp").directive("mouseOver",["templatesPath","$timeout","$window",function(a,b,c){return{restrict:"E",scope:{type:"=",value:"=",parentTop:"=parentTop"},templateUrl:a+"directive-templates/mouse-over.html",link:function(a,d,e){a.style={visibility:"hidden"},void 0===a.parentTop&&(a.parentTop=0),b(function(){$.cursorMessageData.mouseY+d.find(".mouse-over").height()<angular.element(c).height()?a.style.top=$.cursorMessageData.mouseY-a.parentTop+15+"px":a.style.top=$.cursorMessageData.mouseY-d.find(".mouse-over").height()-a.parentTop-20+"px",$.cursorMessageData.mouseX+10+d.find(".mouse-over").width()<angular.element(c).width()?a.style.left=$.cursorMessageData.mouseX+10+"px":a.style.left=angular.element(c).width()-d.find(".mouse-over").width()-10+"px",a.style.visibility="visible"})}}}]),angular.module("gridTaskApp").directive("numberFormat",[function(){return{restrict:"A",scope:{number:"=numberFormat"},link:function(a,b,c){b.html(nFormatter(a.number,1)),a.$watch("number",function(a){b.html(nFormatter(a,1))})}}}]),angular.module("gridTaskApp").directive("onFinishRender",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){b.$last===!0&&a(function(){b.$emit("ngRepeatFinished")})}}}]),angular.module("gridTaskApp").controller("overlayCtrl",["$scope","OVERLAY","$timeout","$element","$window",function(a,b,c,d,e){void 0===a.selectors&&(a.selectors={}),void 0===a.selectors.overlaySelector&&(a.selectors.overlaySelector=b.overlaySelector),void 0===a.selectors.heighterSelector&&(a.selectors.heighterSelector=b.heighterSelector),void 0===a.selectors.alignTopSelector&&(a.selectors.alignTopSelector=b.alignTopSelector),void 0===a.toggleMinWidth&&(a.toggleMinWidth=b.toggleMinWidth),a.style={left:getWindowWidth()-a.toggleMinWidth+"px",transition:"",overflow:"hidden"},a.transcludeStyle={},a.setToggle=function(b){c(function(){a.state?(getWindowWidth()+650>1750?a.style.left="650px":a.style.left=0,a.transcludeStyle.width=angular.element("body").prop("scrollWidth")-a.style.left.toString().replace("px","")-a.toggleMinWidth-5+"px"):(a.style.left=angular.element("body").prop("scrollWidth")-a.toggleMinWidth+"px",a.style.overflow="hidden",(void 0===a.state||b)&&(a.style.transition="none")),void 0===a.state||b||(a.style.transition="");var c=10,f=300;angular.element(e).height()-angular.element(a.selectors.heighterSelector).offset().top-c>f?(a.style.minHeight=angular.element("body").prop("scrollHeight")-angular.element(a.selectors.heighterSelector).offset().top-c+"px",a.style.top=0):(a.style.minHeight=angular.element("body").prop("scrollHeight")-angular.element(a.selectors.alignTopSelector).offset().top-8+"px",angular.element(a.selectors.alignTopSelector).offset().top-d.offset().top!=0&&(a.style.top=angular.element(a.selectors.alignTopSelector).offset().top-d.offset().top+"px"))})}}]),angular.module("gridTaskApp").directive("overlay",["$timeout","templatesPath","$window",function(a,b,c){return{restrict:"EAC",scope:{selectors:"=",toggleMinWidth:"="},controller:"overlayCtrl",templateUrl:b+"directive-templates/overlay.html",transclude:!0,replace:!0,link:function(b,d,e){var f=function(){b.setToggle(!0),b.$apply()};a(function(){b.$watch("state",function(a){b.setToggle(),0==a&&d.scrollTop(0)})}),d.parent().onPositionChanged(f,0),angular.element(c).resize(f),b.$on("$destroy",function(){d.parent().off("onPositionChanged",f),angular.element(c).off("resize",f)})}}}]),angular.module("gridTaskApp").controller("contentOptionsCardsCtrl",["$scope",function(a){a.$watch("options.searchValue",function(b){a.options.searchOptions&&("everywhere"==a.options.searchOptions.selected.label?a.options.search(b):a.options.search(a.options.searchOptions.selected.label+":"+b))})}]),angular.module("gridTaskApp").directive("contentOptionsCards",["templatesPath",function(a){return{restrict:"EA",controller:"contentOptionsCardsCtrl",scope:{options:"="},templateUrl:a+"directive-templates/content-options-cards.html"}}]),angular.module("gridTaskApp").directive("pageContentCards",["templatesPath","CONTENT","$compile",function(a,b,c){return{restrict:"EA",scope:{data:"=gridData",contentOptions:"=",uiGridOptions:"=",cardsOptions:"="},templateUrl:a+"directive-templates/page-content-cards.html",link:function(d,e){var f=new Initializer(d,e,b,a,c);f.initCards(),d.$watch("contentOptions.datepickerOptions.dateRange",function(a){if(a)for(var b in d.cardsOptions.cards)d.cardsOptions.cards[b].counter&&(d.cardsOptions.cards[b].count=d.cardsOptions.cards[b].counter.calculate(d.contentOptions.datepickerOptions.startDate,d.contentOptions.datepickerOptions.endDate))})}}}]),angular.module("gridTaskApp").controller("contentOptionsD3Ctrl",["$scope",function(a){a.$watch("options.searchValue",function(b){a.options.searchOptions&&("everywhere"==a.options.searchOptions.selected.label?a.options.search(b):a.options.search(a.options.searchOptions.selected.label+":"+b))})}]),angular.module("gridTaskApp").directive("contentOptionsD3",["templatesPath",function(a){return{restrict:"EA",controller:"contentOptionsD3Ctrl",scope:{options:"=",filters:"=",loading:"=",onDataRangeChanged:"=",past:"="},templateUrl:a+"directive-templates/content-options-d3.html"}}]),angular.module("gridTaskApp").directive("pageContentD3",["templatesPath","CONTENT","$compile","jsonService","HISTOGRAM","SANKEY",function(a,b,c,d,e,f){return{restrict:"EA",scope:{contentOptions:"=",cardsOptions:"=",sankeyData:"=",histogramData:"=",filters:"="},templateUrl:a+"directive-templates/page-content-d3.html",link:function(g,h){h.addClass("page-content-d3");var i=new Initializer(g,h,b,a,c,d,e,f);i.initSankey(),g.contentOptions.refresh=function(){i.refreshSankey()},g.filters.onDateRangeChange=function(){for(var a in g.cardsOptions.cards)g.cardsOptions.cards[a].counter&&(g.cardsOptions.cards[a].count=g.cardsOptions.cards[a].counter.calculate(this.dateRange.start.toDate(),this.dateRange.end.toDate()));
}}}}]),angular.module("gridTaskApp").controller("contentOptionsCtrl",["$scope",function(a){a.$watch("options.searchValue",function(b){a.options.searchOptions&&("everywhere"==a.options.searchOptions.selected.label?a.options.search(b):a.options.search(a.options.searchOptions.selected.label+":"+b))})}]),angular.module("gridTaskApp").directive("contentOptions",["templatesPath",function(a){return{restrict:"E",controller:"contentOptionsCtrl",scope:{options:"="},templateUrl:a+"directive-templates/content-options.html"}}]),angular.module("gridTaskApp").directive("pageContentBody",[function(){return{restrict:"EA",link:function(a,b,c){b.append(a.contentOptions.contentBodyTemplate),a.$watch("contentOptions.contentBodyTemplate",function(a){b.html(""),b.append(a)})}}}]),angular.module("gridTaskApp").directive("pageContentFooter",[function(){return{restrict:"EA",link:function(a,b,c){b.append(a.contentOptions.contentFooterTempalte),a.$watch("contentOptions.contentFooterTempalte",function(a){b.html(""),b.append(a)})}}}]),angular.module("gridTaskApp").directive("pageContentHeader",[function(){return{restrict:"EA",link:function(a,b,c){b.append(a.contentOptions.contentHeaderTempalte),a.$watch("contentOptions.contentHeaderTempalte",function(a){b.html(""),b.append(a)})}}}]),angular.module("gridTaskApp").directive("pageContent",["templatesPath","CONTENT","$compile",function(a,b,c){return{restrict:"EA",scope:{data:"=gridData",contentOptions:"=",grid:"=",gridOptions:"=",uiGridOptions:"="},templateUrl:a+"directive-templates/page-content.html",link:function(d,e){var f=new Initializer(d,e,b,a,c);f.init(),d.$watch("contentOptions",function(a){f.init(),f.refreshOpt()}),d.$watch("data",function(a){Array.isArray(a)&&f.refreshData(a)}),d.$watch("data.length",function(){Array.isArray(d.data)&&(d.grid.count=d.data.length)}),d.$watch("views.options.selected",function(a){a&&(f.refreshOpt(),a.isGrid&&f.refreshCheckCallback())})}}}]),angular.module("gridTaskApp").directive("resizeOn",["$window",function(a){function b(a,b,c){a.css("width",angular.element(b).position().left+angular.element(b).width()+"px"),a.width()<a.css("min-width").replace("px","")?a.css({right:"auto",width:c+"px",left:angular.element(b).position().left+"px"}):a.css({right:0,left:"auto"})}return{restrict:"AC",scope:{event:"=resizeOn",parent:"@",width:"=resizeWidth"},link:function(c,d,e){c.width=c.width||450,d.css("top",angular.element(c.parent).height()+"px");var f=function(){b(d,c.parent,c.width)};angular.element(a).resize(f),c.$on("$destroy",function(){angular.element(a).off("resize",f)}),c.$watch("event",function(a){a&&b(d,c.parent,c.width)})}}}]),angular.module("gridTaskApp").controller("searchCtrl",["$scope",function(a){a.edited=!1,a.clear=function(){a.searchValue=""},a.$watch("searchValue",function(b){b.length>0?a.edited=!1:a.edited=!0})}]),angular.module("gridTaskApp").directive("search",["templatesPath",function(a){return{restrict:"E",scope:{searchValue:"=",edited:"="},controller:"searchCtrl",templateUrl:a+"directive-templates/search.html",link:function(a,b,c){}}}]),angular.module("gridTaskApp").controller("splitButtonCtrl",["$scope",function(a){a.actions||(a.actions=[]),a.typehead||(a.actions.everywhere={label:"everywhere",isEverywhere:!0},a.actions.selected=a.actions.everywhere),a.select=function(b){a.actions.selected=b,a.search="",a.close()},a.toggle=function(){a.isShow=!a.isShow},a.close=function(){a.isShow=!1}}]),angular.module("gridTaskApp").directive("splitButton",["templatesPath",function(a){return{restrict:"E",scope:{actions:"=",selected:"=",search:"=",typehead:"="},templateUrl:a+"directive-templates/split-button.html",controller:"splitButtonCtrl",link:function(a,b,c){}}}]),angular.module("gridTaskApp").directive("upload",["templatesPath",function(a){return{restrict:"EA",templateUrl:a+"directive-templates/upload.html",scope:{upload:"=uploadCallback",label:"="},link:function(a,b,c){b.find(":file").change(function(){var c=this.files[0];if(-1!=c.name.indexOf("json")){var d=new FileReader;d.readAsText(c),d.onloadend=function(){var b=d.result;a.jsonData=JSON.parse(b),a.upload&&a.upload(a.jsonData)},b.find(":file").val("")}else b.find(":file").val("")})}}}]);var Counter=function(){function a(a){this.card=a}return a.prototype.calculate=function(a,b){for(var c=b.getDate()-a.getDate(),d=Math.floor(1e3*Math.random()+1),e=0;e<this.card.graphs.length;e++){var f=Math.floor(60*Math.random()+1);this.card.graphs[e].style.height=f+"px"}return d*c},a}(),Initializer=function(){function a(a,b,c,d,e,f,g,h){this.scope=a,this.element=b,this.content=c,this.templatesPath=d,this.$compile=e,this.jsonService=f,this.HISTOGRAM=g,this.SANKEY=h}return a.prototype.init=function(){this.initContentOpt(),this.initGrid(),this.initGridOpt(),this.initUiGridOpt()},a.prototype.initCards=function(){this.initContentCardsOpt(),this.initCardsGrid(),this.initUiGridOpt(),this.initCardsOpt()},a.prototype.initSankey=function(){this.initCardsOpt(),this.initSankeyContentOpt()},a.prototype.refreshSankey=function(){this.scope.cardsOptions.cards=this.content.cardsOptions.cards,this.scope.cardsOptions.startDate=this.content.cardsOptions.startDate,this.scope.cardsOptions.endDate=this.content.cardsOptions.endDate,this.scope.cardsOptions.margin=525,this.jsonService.get("data/sankey/my-graphs.json").then(function(a){this.scope.sankeyData=a}.bind(this)),this.jsonService.get("data/histogram/default.json").then(function(a){this.scope.histogramData=a}.bind(this))},a.prototype.initSankeyContentOpt=function(){void 0===this.scope.contentOptions&&(this.scope.contentOptions={}),void 0===this.scope.contentOptions.eventType&&(this.scope.contentOptions.eventType=this.content.eventType),void 0===this.scope.contentOptions.segments&&(this.scope.contentOptions.segments=this.content.segments),void 0===this.scope.contentOptions.campaign&&(this.scope.contentOptions.campaign=this.content.campaign),void 0===this.scope.contentOptions.debugCard&&(this.scope.contentOptions.debugCard={}),void 0===this.scope.contentOptions.debugCard.id&&(this.scope.contentOptions.debugCard.id=this.content.debugCard.id),void 0===this.scope.contentOptions.debugCard.text&&(this.scope.contentOptions.debugCard.text=this.content.debugCard.text),void 0===this.scope.contentOptions.debugCard.body&&(this.scope.contentOptions.debugCard.body=this.content.debugCard.body),void 0===this.scope.contentOptions.debugCard.templateUrl&&void 0===this.scope.contentOptions.debugCard.template&&(this.scope.contentOptions.debugCard.templateUrl=this.content.debugCard.templateUrl),void 0===this.scope.contentOptions.datepickerOptions&&(this.scope.contentOptions.datepickerOptions={}),void 0===this.scope.contentOptions.datepickerOptions.startDate&&(this.scope.contentOptions.datepickerOptions.startDate=this.content.cardsOptions.startDate),void 0===this.scope.contentOptions.datepickerOptions.endDate&&(this.scope.contentOptions.datepickerOptions.endDate=this.content.cardsOptions.endDate),void 0===this.scope.contentOptions.datepickerOptions.dateRange&&(this.scope.contentOptions.datepickerOptions.dateRange=this.content.cardsOptions.dateRange),void 0===this.scope.contentOptions.datepickerOptions.config&&(this.scope.contentOptions.datepickerOptions.config={singleMonth:!0,showShortcuts:!1,showTopbar:!1}),void 0===this.scope.filters&&(this.scope.filters=this.content.sankeyFilters),void 0===this.scope.sankeyData&&(this.scope.sankeyData=this.SANKEY.data),void 0===this.scope.histogramData&&(this.scope.histogramData=this.HISTOGRAM.data)},a.prototype.initCardsOpt=function(){if(void 0===this.scope.cardsOptions&&(this.scope.cardsOptions={}),void 0===this.scope.cardsOptions.cards){this.scope.cardsOptions.cards=this.content.cardsOptions.cards,void 0===this.scope.cardsOptions.margin&&(this.scope.cardsOptions.margin=this.content.cardsOptions.margin);for(var a in this.scope.cardsOptions.cards)"clicks"!=a&&(this.scope.cardsOptions.cards[a].counter=new Counter(this.scope.cardsOptions.cards[a]));angular.element(document).click(function(a){this.scope.cardsOptions.cards.clicks&&(this.scope.cardsOptions.cards.clicks.count+=1,this.scope.$apply())}.bind(this))}},a.prototype.initContentOpt=function(){void 0===this.scope.contentOptions&&(this.scope.contentOptions={}),this.scope.contentOptions.loading&&(this.scope.contentOptions.isLoading=!0,0==angular.element("loading").length&&(this.element.find(this.content.listSelector).append(this.content.loadingTemplate),this.$compile(angular.element("loading"))(this.scope))),void 0===this.scope.contentOptions.checks&&(this.scope.contentOptions.checks=this.content.checks),void 0===this.scope.contentOptions.mores&&(this.scope.contentOptions.mores=this.content.mores),void 0===this.scope.contentOptions.filtrate&&(this.scope.contentOptions.filtrate=function(a){this.scope.gridOptions.filterOptions.filterText=convertFilterOptions(a).filterText,this.scope.uiGridOptions.filterOptions.filterText=convertFilterOptions(a).filterText}.bind(this)),void 0===this.scope.contentOptions.search&&(this.scope.contentOptions.search=function(a){this.scope.gridOptions.filterOptions.filterText=a,this.scope.uiGridOptions.filterOptions.filterText=a}.bind(this)),void 0===this.scope.contentOptions.refresh&&(this.scope.contentOptions.refresh=function(){this.scope.contentOptions.loading&&(this.scope.contentOptions.isLoading=!0),this.scope.contentOptions.refreshCallback()}.bind(this)),(this.scope.contentOptions.withUpload||void 0!==this.scope.contentOptions.upload)&&(this.scope.contentOptions.isDynamic=!0,void 0===this.scope.contentOptions.upload&&(this.scope.contentOptions.upload=function(a){this.scope.contentOptions.loading&&(this.scope.contentOptions.isLoading=!0),this.scope.data=a,this.scope.grid.count=this.scope.data.length,this.scope.$apply()}.bind(this)))},a.prototype.initContentCardsOpt=function(){void 0===this.scope.contentOptions&&(this.scope.contentOptions={}),void 0===this.scope.contentOptions.filtrate&&(this.scope.contentOptions.filtrate=function(a){this.scope.uiGridOptions.filterOptions.filterText=convertFilterOptions(a).filterText}.bind(this)),void 0===this.scope.contentOptions.search&&(this.scope.contentOptions.search=function(a){this.scope.uiGridOptions.filterOptions.filterText=a}.bind(this)),this.scope.contentOptions.filterOptions=this.content.filterOptions(this.scope.data),this.scope.contentOptions.searchOptions=this.content.searchOptions(this.scope.data),this.scope.contentOptions.searchOptions.selected=this.scope.contentOptions.searchOptions[0],this.scope.contentOptions.searchValue="",void 0===this.scope.contentOptions.datepickerOptions&&(this.scope.contentOptions.datepickerOptions={}),void 0===this.scope.contentOptions.datepickerOptions.startDate&&(this.scope.contentOptions.datepickerOptions.startDate=this.content.cardsOptions.startDate),void 0===this.scope.contentOptions.datepickerOptions.endDate&&(this.scope.contentOptions.datepickerOptions.endDate=this.content.cardsOptions.endDate),void 0===this.scope.contentOptions.datepickerOptions.dateRange&&(this.scope.contentOptions.datepickerOptions.dateRange=this.content.cardsOptions.dateRange),void 0===this.scope.contentOptions.datepickerOptions.config&&(this.scope.contentOptions.datepickerOptions.config={singleMonth:!0,showShortcuts:!1,showTopbar:!1})},a.prototype.initCardsGrid=function(){void 0===this.scope.exports&&(this.scope.exports=this.content.exports,this.scope.exports.options.callback=function(a){this.scope["export"]=a}.bind(this))},a.prototype.initGrid=function(){void 0===this.scope.exports&&(this.scope.exports=this.content.exports,this.scope.exports.options.callback=function(a){this.scope["export"]=a}.bind(this)),void 0===this.scope.views&&(this.scope.views=this.content.views,this.scope.views.options.callback=function(a){this.scope.view=a}.bind(this)),void 0===this.scope.grid&&(this.scope.grid={},this.scope.grid.name=this.content.gridName,Array.isArray(this.scope.data)&&(this.scope.grid.count=this.scope.data.length)),void 0===this.scope.grid.name&&(this.scope.grid.name=this.content.gridName),void 0===this.scope.grid.count&&Array.isArray(this.scope.data)&&(this.scope.grid.count=this.scope.data.length)},a.prototype.initGridOpt=function(){if(void 0===this.scope.gridOptions&&(this.scope.gridOptions={}),void 0===this.scope.gridOptions.data&&(this.scope.gridOptions.data=this.content.ngGridOpt.data),void 0===this.scope.gridOptions.multiSelect&&(this.scope.gridOptions.multiSelect=this.content.ngGridOpt.multiSelect),void 0===this.scope.gridOptions.rowTemplate&&(this.scope.gridOptions.rowTemplate=this.content.ngGridOpt.rowTemplate),void 0===this.scope.gridOptions.filterOptions&&(this.scope.gridOptions.filterOptions=this.content.ngGridOpt.filterOptions),void 0===this.scope.gridOptions.rowHeight&&(this.scope.gridOptions.rowHeight=this.content.ngGridOpt.rowHeight),void 0===this.scope.gridOptions.headerRowHeight&&(this.scope.gridOptions.headerRowHeight=this.content.ngGridOpt.headerRowHeight),void 0===this.scope.gridOptions.showFooter&&(this.scope.gridOptions.showFooter=this.content.ngGridOpt.showFooter),void 0===this.scope.gridOptions.footerRowHeight&&(this.scope.gridOptions.footerRowHeight=this.content.ngGridOpt.footerRowHeight),void 0===this.scope.gridOptions.footerTemplate&&(this.scope.gridOptions.footerTemplate=this.content.ngGridOpt.footerTemplate),void 0===this.scope.gridOptions.init&&this.scope.contentOptions.loading&&(this.scope.gridOptions.init=function(a,b){this.scope.contentOptions.isLoading=!1}.bind(this)),void 0===this.scope.gridOptions.detailsTemplate&&this.scope.gridOptions.withDetails&&(this.scope.gridOptions.detailsTemplate=this.content.ngGridOpt.detailsTemplate),void 0===this.scope.gridOptions.rowActions&&(this.scope.gridOptions.rowActions=this.content.ngGridOpt.rowActions),void 0===this.scope.gridOptions.rowCheckAction&&(this.scope.gridOptions.rowCheckAction=this.content.ngGridOpt.rowCheckAction),void 0===this.scope.gridOptions.beforeSelectionChange&&(this.scope.gridOptions.beforeSelectionChange=function(a,b){return!1}.bind(this)),this.scope.pluginActionOpt={values:this.scope.gridOptions.rowActions,detailsTemplate:this.scope.gridOptions.detailsTemplate,detailsCondition:this.scope.gridOptions.detailsCondition,onCheck:this.scope.gridOptions.rowCheckAction.bind(this.scope),contentOptions:this.scope.contentOptions},void 0===this.scope.gridOptions.plugins)this.scope.gridOptions.plugins=[],this.scope.gridOptions.plugins.push(new ngGridActionsPlugin(this.scope.pluginActionOpt,this.$compile));else{for(var a=!1,b=0;b<this.scope.gridOptions.plugins.length;b++)if("ngGridActionsPlugin"==this.scope.gridOptions.plugins[b].constructor.name){a=!0;break}a||this.scope.gridOptions.plugins.push(new ngGridActionsPlugin(this.scope.pluginActionOpt,this.$compile))}},a.prototype.initUiGridOpt=function(){void 0===this.scope.uiGridOptions&&(this.scope.uiGridOptions={});for(var a in this.content.uiGridOpt)void 0===this.scope.uiGridOptions[a]&&(this.scope.uiGridOptions[a]=this.content.uiGridOpt[a]);void 0===this.scope.uiGridOptions.filterOptions&&(this.scope.uiGridOptions.filterOptions=this.content.ngGridOpt.filterOptions),void 0===this.scope.uiGridOptions.rowActions&&(this.scope.uiGridOptions.rowActions=this.content.ngGridOpt.rowActions)},a.prototype.refreshOpt=function(){this.scope.contentOptions.filterOptions=this.content.filterOptions(this.scope.data),this.scope.contentOptions.searchOptions=this.content.searchOptions(this.scope.data),this.scope.contentOptions.searchOptions.selected=this.scope.contentOptions.searchOptions[0],this.scope.contentOptions.searchValue="",this.scope.contentOptions.checks.options.selected=this.scope.contentOptions.checks.options.actions.noOne;for(var a=!1,b=0,c=0;c<this.scope.gridOptions.plugins.length;c++)if("ngGridActionsPlugin"==this.scope.gridOptions.plugins[c].constructor.name){a=!0,b=c;break}a||(this.scope.pluginActionOpt={values:this.scope.gridOptions.rowActions,detailsTemplate:this.scope.gridOptions.detailsTemplate,detailsCondition:this.scope.gridOptions.detailsCondition,onCheck:this.scope.gridOptions.rowCheckAction.bind(this.scope),contentOptions:this.scope.contentOptions},this.scope.gridOptions.plugins[b].refreshOpt(this.scope.pluginActionOpt)),this.scope.contentOptions.loading&&(this.scope.contentOptions.isLoading=!1)},a.prototype.refreshCheckCallback=function(){for(var a=0;a<this.scope.gridOptions.plugins.length;a++)if("ngGridActionsPlugin"==this.scope.gridOptions.plugins[a].constructor.name){isFindAct=!0,indexAct=a;break}this.scope.gridOptions.plugins[indexAct].refreshCallback()},a.prototype.refreshData=function(a){this.refreshOpt(),this.scope.grid.count=this.scope.data.length,this.scope.gridOptions.filterOptions.filterText="",this.scope.uiGridOptions.filterOptions.filterText="";var b=angular.copy(this.scope.gridOptions.columnDefs),c=columnGenerator(a,this.templatesPath);void 0===this.scope.gridOptions.reInit?columnsCompare(b,c)||(this.scope.gridOptions.columnDefs=c,this.scope.view&&this.scope.view.isGrid&&this.$compile(angular.element("div[custom-grid]"))(this.scope)):this.scope.view&&this.scope.view.isGrid&&this.$compile(angular.element("div[custom-grid]"))(this.scope),this.scope.contentOptions.loading&&(this.scope.contentOptions.isLoading=!1)},a}(),templatesPath="/src/app/templates/",Row=function(){function a(a,b,c){this.elm=a,this.scope=b.$new(),this.compile=c}return a.prototype.edit=function(){0!=angular.element("modal").length&&angular.element("modal").remove(),this.scope.editingRow=this.elm,angular.element("body").append('<div modal value="editingRow" enable-save="true" body-template-url="'+templatesPath+'directive-templates/edit-entity.html"></modal>');var a=angular.element("div[modal]");this.compile(a)(this.scope)},a.prototype["delete"]=function(a){a.splice(a.indexOf(this.elm.entity),1)},a.prototype.history=function(){0!=angular.element("history").length&&angular.element("history").remove(),this.scope.historiedRow=this.elm,angular.element("body").append('<div modal value="historiedRow.actions.history"  body-template-url="'+templatesPath+'directive-templates/history.html"></history>');var a=angular.element("div[modal]");this.compile(a)(this.scope)},a.prototype.copy=function(){var a=JSON.stringify(this.elm.entity);if(window.clipboardData&&clipboardData.setData)clipboardData.setData("text",a),$.cursorMessage&&$.cursorMessage("Row is copied to clipboard.");else{angular.element("body").append('<input id="holdtext" style="display: none"/>');var b=angular.element("#holdtext");b.val(a),b.select();try{document.execCommand("copy"),$.cursorMessage&&$.cursorMessage("Row is copied to clipboard.")}catch(c){$.cursorMessage&&$.cursorMessage("Copied ended with error.",{backgroundColor:"rgb(143, 59, 59)"})}finally{b.remove("#holdtext")}}},a}();angular.element.fn.center=function(){return this.css("position","absolute"),this.css("top",Math.max(0,(angular.element(this.parent()).height()-angular.element(this).outerHeight())/2+angular.element(this.parent()).scrollTop())+"px"),this.css("left",Math.max(0,(angular.element(this.parent()).width()-angular.element(this).outerWidth())/2+angular.element(this.parent()).scrollLeft())+"px"),this.css("z-index",1e4),this},angular.element&&!function(){angular.element.cursorMessageData={},angular.element(window).ready(function(a){0==angular.element(".cursor-message").length&&(angular.element("body").append('<div class="cursor-message">&nbsp;</div>'),angular.element(".cursor-message").hide()),angular.element("body").mousemove(function(a){angular.element.cursorMessageData.mouseX=a.pageX,angular.element.cursorMessageData.mouseY=a.pageY,void 0!=angular.element.cursorMessageData.options&&angular.element._showCursorMessage()})}),angular.element.extend({cursorMessage:function(a,b){void 0==b&&(b={}),void 0==b.offsetX&&(b.offsetX=5),void 0==b.offsetY&&(b.offsetY=5),void 0==b.hideTimeout&&(b.hideTimeout=2e3),angular.element(".cursor-message").html(a).fadeIn("slow"),void 0!=angular.element.cursorMessageData.hideTimeoutId&&clearTimeout(angular.element.cursorMessageData.hideTimeoutId),b.hideTimeout>0&&(angular.element.cursorMessageData.hideTimeoutId=setTimeout(angular.element.hideCursorMessage,b.hideTimeout)),angular.element.cursorMessageData.options=b,angular.element._showCursorMessage()},hideCursorMessage:function(){angular.element(".cursor-message").fadeOut("slow")},_showCursorMessage:function(){angular.element(".cursor-message").css({top:angular.element.cursorMessageData.mouseY+angular.element.cursorMessageData.options.offsetY+30+"px",left:angular.element.cursorMessageData.mouseX+angular.element.cursorMessageData.options.offsetX-150}),angular.element.cursorMessageData.options.backgroundColor&&angular.element(".cursor-message").css({"background-color":angular.element.cursorMessageData.options.backgroundColor})}})}(angular.element),angular.element.fn.onPositionChanged=function(a,b){null==b&&(b=100);var c=angular.element(this[0]);if(c.length<1)return c;var d=null,e=null;return setInterval(function(){if(null==c||c.length<1)return c;null==d&&(d=c.position()),null==e&&(e=c.offset());var b=c.position(),f=c.offset();(d.top!=b.top||d.left!=b.left)&&(angular.element(this).trigger("onPositionChanged",{lastPos:d,newPos:b}),"function"==typeof a&&a(d,b),d=c.position()),(e.top!=f.top||e.left!=f.left)&&(angular.element(this).trigger("onOffsetChanged",{lastOff:e,newOff:f}),"function"==typeof a&&a(e,f),e=c.offset())},b),c},d3.sankey=function(){function a(){n.forEach(function(a){a.sourceLinks=[],a.targetLinks=[]}),o.forEach(function(a){var b=a.source,c=a.target;"number"==typeof b&&(b=a.source=n[a.source]),"number"==typeof c&&(c=a.target=n[a.target]),b.sourceLinks.push(a),c.targetLinks.push(a)})}function b(){n.forEach(function(a){a.value=Math.max(d3.sum(a.sourceLinks,i),d3.sum(a.targetLinks,i))})}function c(){for(var a,b=n,c=0;b.length;)a=[],b.forEach(function(b){b.x=c,b.dx=k,b.sourceLinks.forEach(function(b){a.push(b.target)})}),b=a,++c;d(c),e((m[0]-k)/(c-1))}function d(a){n.forEach(function(b){b.sourceLinks.length||(b.x=a-1)})}function e(a){n.forEach(function(b){b.x*=a})}function f(a){function b(){var a=d3.min(g,function(a){return(m[1]-(a.length-1)*l)/d3.sum(a,i)});g.forEach(function(b){b.forEach(function(b,c){b.y=c,b.dy=b.value*a})}),o.forEach(function(b){b.dy=b.value*a})}function c(a){function b(a){return h(a.source)*a.value}g.forEach(function(c,d){c.forEach(function(c){if(c.targetLinks.length){var d=d3.sum(c.targetLinks,b)/d3.sum(c.targetLinks,i);c.y+=(d-h(c))*a}})})}function d(a){function b(a){return h(a.target)*a.value}g.slice().reverse().forEach(function(c){c.forEach(function(c){if(c.sourceLinks.length){var d=d3.sum(c.sourceLinks,b)/d3.sum(c.sourceLinks,i);c.y+=(d-h(c))*a}})})}function e(){g.forEach(function(a){var b,c,d,e=0,g=a.length;for(a.sort(f),d=0;g>d;++d)b=a[d],c=e-b.y,c>0&&(b.y+=c),e=b.y+b.dy+l;if(c=e-l-m[1],c>0)for(e=b.y-=c,d=g-2;d>=0;--d)b=a[d],c=b.y+b.dy+l-e,c>0&&(b.y-=c),e=b.y})}function f(a,b){return a.y-b.y}var g=d3.nest().key(function(a){return a.x}).sortKeys(d3.ascending).entries(n).map(function(a){return a.values});b(),e();for(var j=1;a>0;--a)d(j*=.99),e(),c(j),e()}function g(){function a(a,b){return a.source.y-b.source.y}function b(a,b){return a.target.y-b.target.y}n.forEach(function(c){c.sourceLinks.sort(b),c.targetLinks.sort(a)}),n.forEach(function(a){var b=0,c=0;a.sourceLinks.forEach(function(a){a.sy=b,b+=a.dy}),a.targetLinks.forEach(function(a){a.ty=c,c+=a.dy})})}function h(a){return a.y+a.dy/2}function i(a){return a.value}var j={},k=24,l=8,m=[1,1],n=[],o=[];return j.nodeWidth=function(a){return arguments.length?(k=+a,j):k},j.nodePadding=function(a){return arguments.length?(l=+a,j):l},j.nodes=function(a){return arguments.length?(n=a,j):n},j.links=function(a){return arguments.length?(o=a,j):o},j.size=function(a){return arguments.length?(m=a,j):m},j.layout=function(d){return a(),b(),c(),f(d),g(),j},j.relayout=function(){return g(),j},j.link=function(){function a(a){var c=a.source.x+a.source.dx,d=a.target.x,e=d3.interpolateNumber(c,d),f=e(b),g=e(1-b),h=a.source.y+a.sy+a.dy/2,i=a.target.y+a.ty+a.dy/2;return"M"+c+","+h+"C"+f+","+h+" "+g+","+i+" "+d+","+i}var b=.5;return a.curvature=function(c){return arguments.length?(b=+c,a):b},a},j},angular.module("gridTaskApp").constant("LOCATIONS_EN",{}),angular.module("gridTaskApp").constant("LOCATIONS_RU",{}),angular.module("gridTaskApp").config(["$translateProvider","LOCATIONS_RU","LOCATIONS_EN",function(a,b,c){function d(b,c){angular.forEach(c,function(c,d){a.translations(b)[d]=c})}a.translations("en",{"Selected Users":"Selected Users",usersInteract:"Users who have interacted with at least ",filterList:"Filter list",showRecords:"Show records",back:"Back",save:"Save",filter:"Filter",history:"History",oldValue:"Old value",newValue:"New value",dateChange:"Date change",historyEmpty:"History is empty",editEntity:"Edit entity",close:"Close",topSegments:"Top Segments",topCampaigns:"Top campaigns",records:"records",choose:"Choose",upload:"Upload"}),a.translations("ru",{"Selected Users":"Выбранные пользователи",filterList:"Список фильтров",showRecords:"Показать записи",back:"Назад",save:"Сохранить",filter:"Фильтр",history:"История",oldValue:"Старое значение",newValue:"Новое значение",dateChange:"Дата изменения",historyEmpty:"История пуста",editEntity:"Изменить сущность",close:"Закрыть",topSegments:"Лучшие сегменты",topCampaigns:"Лучшие кампании",records:"записей",choose:"Выбрать",upload:"Загрузить"}),d("en",c),d("ru",b),a.preferredLanguage("en")}]);var templatesPath="/src/app/templates/";angular.module("gridTaskApp").factory("anyOtherClickFactory",["$document",function(a){var b=[];return{_register:function(c){a.on("click",c),b.push(c)},_getHandlers:function(){return b},_getCountHandlers:function(){return b.length},_destroy:function(c){a.off("click",c),b.splice(c,1)}}}]),angular.module("gridTaskApp").factory("cardsFactory",["$rootScope",function(a){var b={},c=40,d=50,e="cardFlip",f="debugFlip";return{register:function(a,e,f,g,h){angular.extend(b,{cards:a,startDate:e,endDate:f,margin:g,startLeft:c,groupMarginRight:d,isDebug:h.enableDebugging,debugCard:h.debugCard,groupStyle:{}})},getInstance:function(){return b},refresh:function(a){b.cards=a},enableDebugging:function(a){a&&(this.flipDebug(b.debugCard.id),b.debugCard.style={left:b.startLeft},b.startLeft+=b.margin)},flipAll:function(){var a=b.startLeft;for(var c in b.cards)this.flipCard(c),b.cards[c].style={left:a},a+=b.margin;angular.extend(b.groupStyle,{width:a+b.groupMarginRight})},flipCard:function(b){a.$broadcast(e,b)},flipDebug:function(b){a.$broadcast(f,b)},clear:function(){b={},c=40,d=50}}}]),angular.module("gridTaskApp").factory("chartFactory",["$rootScope",function(a){var b=function(){function b(a,b){this.units="Widgets",this.margin={top:0,right:10,bottom:10,left:10},this.width=1500-this.margin.left-this.margin.right,this.height=740-this.margin.top-this.margin.bottom,this.format=function(a){return this.formatNumber(a)+" "+this.units},this.formatNumber=d3.format(",.0f"),this.color=d3.scale.category20(),this.data=a,this.opt=b,this.handlers=[]}return b.prototype.clearHtml=function(a){a.html("")},b.prototype._transform=function(){return"translate("+this.margin.left+","+this.margin.top+")"},b.prototype._renderSvg=function(){this.svg=d3.select("#chart").append("svg").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom).append("g").attr("transform",this._transform.bind(this))},b.prototype._renderSankey=function(){this.sankey=d3.sankey().nodeWidth(25).nodePadding(35).size([this.width,this.height])},b.prototype._renderLink=function(){this.path=this.sankey.link(),this.link=this.svg.append("g").selectAll(".link").data(this.data.links).enter().append("path").attr("class","link").attr("d",this.path).style("stroke-width",function(a){return Math.max(1,a.dy)}).style("stroke",function(a){return a.source.color?a.source.color:a.source.color=this.color(a.source.name.replace(/ .*/,""))}.bind(this))},b.prototype._renderNode=function(){this.node=this.svg.append("g").selectAll(".node").data(this.data.nodes).enter().append("g").attr("class","node").attr("transform",function(a){return"translate("+a.x+","+a.y+")"}).call(d3.behavior.drag().origin(function(a){return a}).on("dragstart",function(){this.parentNode.appendChild(this)}).on("drag",function(b){a.$broadcast("drag",b,this)})),this.handlers.push({remove:function(){this.svg.selectAll(".node").on("dragstart",null),this.svg.selectAll(".node").on("drag",null)}.bind(this)}),this.node.append("rect").attr("height",function(a){return a.dy}).attr("width",this.sankey.nodeWidth()).style("fill",function(a){return a.color?a.color=a.color:a.color=this.color(a.name.replace(/ .*/,""))}.bind(this)).style("stroke",function(a){return d3.rgb(a.color).darker(2)}).on("mouseover",this.mouseover.bind(this)).on("mouseout",this.mouseout.bind(this)),this.handlers.push({remove:function(){this.node.selectAll("rect").on("mouseover",null),this.node.selectAll("rect").on("mouseout",null)}.bind(this)}),this.node.append("text").attr("x",-6).attr("y",function(a){return a.dy/2}).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text(function(a){return a.name}).filter(function(a){return a.x<this.width/2}.bind(this)).attr("x",6+this.sankey.nodeWidth()).attr("text-anchor","start"),this.node.append("text").attr("x",20).attr("y",function(a){return a.dy/2}).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text(function(a){return a.val}).filter(function(a){return a.x<this.width/2}.bind(this)).attr("x",-20+this.sankey.nodeWidth()).attr("text-anchor","start")},b.prototype._initNodeMap=function(){var a={};this.data.nodes.forEach(function(b){a[b.name]=b}),this.data.links=this.data.links.map(function(b){return{source:a[b.source],target:a[b.target],value:b.value}})},b.prototype._initSankey=function(){this.sankey.nodes(this.data.nodes).links(this.data.links).layout(32)},b.prototype.mouseover=function(b){a.$broadcast("mouseover",b)},b.prototype.mouseout=function(b){a.$broadcast("mouseout",b)},b.prototype.fullRenderSankey=function(){this._renderSvg(),this._renderSankey(),this._initNodeMap(),this._initSankey(),this._renderLink(),this._renderNode()},b.prototype.refreshData=function(a){this.data=a},b.prototype._removeListeners=function(){angular.forEach(this.handlers,function(a){a.remove()})},b.prototype.destroy=function(){this._removeListeners(),this.svg&&this.svg.remove(),this.svg=this.node=this.link=this.path=this.sankey=null},b}();return{getChart:function(a,c){return new b(a,c)}}}]),angular.module("gridTaskApp").service("jsonService",["$http","$q",function(a,b){this.get=function(c){var d=b.defer();return a.get(c).success(function(a){d.resolve(a)}).error(function(){d.reject("Failed to json.")}),d.promise}}]),angular.module("gridTaskApp").service("myTemplateService",["$http","$templateCache",function(a,b){this.put=function(a,c){b.put(c,a)}}]),angular.module("gridTaskApp").factory("NavigationTree",[function(){return{menu:[],get:function(){return this.menu=this.NAV_TREE},generate:function(){var a,b,c,d,e,f;for(c=[],e=this.NAV_TREE,a=0,b=e.length;b>a;a++)d=e[a],f=this.subTree(d),_.isEmpty(f)||c.push(f);return c},subTree:function(a){var b,c,d,e,f,g;if(g={},null!=a.nodes){for(g={name:a.name,nodes:[]},e=a.nodes,b=0,c=e.length;c>b;b++)d=e[b],f=this.subTree(d),_.isEmpty(f)||g.nodes.push(f);0===g.nodes.length&&(g={})}else null!=a.permissions&&this.checkPermission(a.permissions)&&(g={name:a.name,description:a.description,state:a.state,link:a.link});return g},checkPermission:function(a){return"none"===a[0]||arrayUtils.intersects(session.allow,a)},NAV_TREE:[{name:"PEOPLE",nodes:[{name:"Actions",nodes:[{name:"Manage Segments",description:"Create segments from 1st and 3rd party data to use in audience targeting, audience insights, and personalization.",state:"segments.switchPage.segmentList",link:"/segments/list",permissions:["segments","segments_ro"]},{name:"Manage Events",description:"Create and manage events to get detailed insights on any user action such as clicks, form submissions, video views and more.",state:"events.list",
link:"/events/list",permissions:["events","events_ro"]},{name:"Manage Funnels",description:"Create funnels to track sequence of events and optimize customer funnel for higher conversions.",state:"funnels.funnelList",link:"/funnels/list",permissions:["funnels","funnels_ro"]}]},{name:"Insights",nodes:[{name:"Segment Insights",description:"View segment specific statistics and insights.",state:"audience.switchPage.discovery",link:"/audience/discovery",permissions:["segments","segments_ro"]},{name:"Segment Overlaps",description:"View population overlap for all your segments.",state:"audience.overlaps",link:"/audience/overlaps",permissions:["segment_overlaps_report"]},{name:"Attributes",description:"View trends for attribute values.",state:"audience.attributesReport",link:"/audience/attributes-report",permissions:["attributes_report"]},{name:"Data Providers",description:"Compare data provider population with Krux’s  people-data universe.",state:"audience.dataprovidersReport",link:"/audience/dataproviders-report",permissions:["dataproviders_report"]},{name:"Reach Opportunities",description:"Reach and convert people who are similar to your most valuable customers.",state:"opportunities.base2ndParty.chart",link:"/opportunities/secondPartyChart/",permissions:["opportunities","opportunities_ro"]},{name:"Audience Profile",description:"Audience Profile Report Organization Level.",state:"audience.profileReportOrgLevel",link:"/audience/audience_profile/",permissions:[]}]},{name:"Analytics",nodes:[{name:"Audience",description:" ",state:"audience.audienceAnalytics",link:"/audience/audience-analytics",permissions:["audience_analytics"]},{name:"Engagement",description:" ",state:"audience.engagement",link:"/audience/engagement",permissions:["user_engagement_distribution"]},{name:"Loyalty",description:" ",state:"audience.loyalty",link:"/audience/loyalty",permissions:["loyalty_report"]},{name:"Social Sharing",description:"",state:"audience.socialSharing",link:"/audience/socialSharing",permissions:[]}]}]},{name:"MARKETING",nodes:[{name:"Performance",nodes:[{name:"Segments",description:"View segment specific performance details.",state:"marketing.segmentPerformance",link:"/marketing/performance/?activeTab=audienceSegments",permissions:["marketing_performance"]},{name:"Campaigns",description:"View campaign specific performance details.",state:"marketing.campaignPerformance",link:"/marketing/performance/?activeTab=campaigns",permissions:["marketing_performance"]},{name:"Sites",description:"View site specific performance details.",state:"marketing.campaignPerformance",link:"/marketing/performance/?activeTab=sites",permissions:["marketing_performance"]},{name:"Reach and Overlap",description:"View reach overlap across channels for campaigns or segments to increase precision.",state:"marketing.reachOverlap",link:"/marketing/reach_overlap",permissions:["reach_and_overlap"]}]},{name:"Real Time Bidding",nodes:[{name:"Manage Campaigns",description:"",state:"rtb.campaign.list",link:"/rtb/campaign",permissions:["ic_extend","ic_extend_ro"]},{name:"Manage Creatives",description:"",state:"rtb.creative.list",link:"/rtb/creative",permissions:["ic_extend","ic_extend_ro"]}]},{name:"Customer Journey",nodes:[{name:"Manage Campaign Attribution",description:"",state:"marketing.campaignAttribution",link:"/marketing/campaign_attribution",permissions:["manage_goals"]},{name:"Attribution Report",description:"",state:"marketing.attribution",link:"/marketing/attribution",permissions:["manage_goals","attribution_report"]}]},{name:"Global Frequency",nodes:[{name:"Manage Frequency",description:"Control and fine-tune frequency across all execution systems.",state:"marketing.globalFrequencyManagement",link:"/marketing/global_frequency_management",permissions:["global_frequency_management"]},{name:"Frequency Distribution",description:"Monitor under-performing and wasteful campaign frequency.",state:"marketing.frequencyDistributionReport",link:"/frequency-reports",permissions:["frequency_reports"]}]}]},{name:"LINK",nodes:[{name:"Buyer",nodes:[{name:"Search",description:"",state:"buyersConsole.search",link:"/buyersConsole/search",permissions:["search_audience_segments"]},{name:"Manage Orders",description:"",state:"order.manageOrders",link:"/order/manageOrders",permissions:["ic_brokerage_ui","ic_brokerage_ui_ro"]},{name:"Cart",description:"",state:"order.cart",link:"/order/cart",permissions:["purchase_segments_manage_orders","purchase_segments_manage_orders_ro","search_audience_segments"]},{name:"Billing",description:"",state:"buyersConsole.buyerBilling",link:"/buyersConsole/buyer_billing",permissions:["purchase_segments_manage_orders"]}]},{name:"Seller",nodes:[{name:"Manage LinK",description:"",state:"interchange.brokerage.list",link:"/interchange/link",permissions:["ic_brokerage_ui","ic_brokerage_ui_ro"]},{name:"Manage Orders",description:"",state:"interchange.brokerage.orders.list",link:"/interchange/link/orders",permissions:["ic_brokerage_ui","ic_brokerage_ui_ro"]},{name:"Billing",description:"",state:"buyersConsole.sellerBilling",link:"/buyersConsole/seller_billing",permissions:["ic_brokerage_ui","ic_brokerage_ui_ro"]}]}]},{name:"INTERCHANGE",nodes:[{name:"Performance",nodes:[{name:"Yield Analytics",description:"",state:"yieldAnalytics.aggregate",link:"/interchange/yield_analytics",permissions:["yield_analytics","yield_analytics_ro"]}]},{name:"Partner Management",nodes:[{name:"Manage Accounts",description:"",state:"partnerEnablementFramework.list",link:"/partner_management",permissions:["manage_partners"]}]}]},{name:"SUPERTAG",nodes:[{name:"Actions",nodes:[{name:"List Tags",description:"",state:"supertag.listTags",link:"/supertag/list_tags",permissions:["supertag_full","supertag_readonly"]},{name:"Pending Approval",description:"",state:"supertag.pendingApproval.list",link:"/supertag/pendingApproval",permissions:["supertag_approve"]},{name:"Library Tags",description:"",state:"supertag.libraryTags",link:"/supertag/library_tags",permissions:[]},{name:"Rule manager",description:"Manage supertag named rules",state:"supertag.tagRules",link:"/supertag/tag_rules",permissions:["supertag_full"]}]},{name:"Reports",nodes:[{name:"Tag Summary",description:"",state:"supertag.reports.list",link:"/supertag/reports",permissions:["supertag_full","supertag_readonly"]},{name:"Tag Inspector",description:"",state:"supertag.tagInspectorCode",link:"/supertag/tag_inspector?auto_inspect",permissions:["supertag_full","supertag_readonly"]}]}]},{name:"DATA SENTRY",nodes:[{name:"Dashboard",description:"",state:"dataSentry.globalDashboard",link:"/dataSentry/globalDashboard",permissions:["data_sentry"]}]},{name:"TOOLS",nodes:[{name:"Settings",nodes:[{name:"Manage Users",description:"",state:"account.usersList",link:"/account/users",permissions:["manage_users"]},{name:"Manage Sites",description:"",state:"account.sites",link:"/account/sites",permissions:["manage_sites"]},{name:"Manage Settings",description:"",state:"account.settings",link:"/account/settings",permissions:["none"]}]},{name:"Internal",nodes:[{name:"Create Organization",description:"",state:"organization.create",link:"/organization/create",permissions:[]},{name:"Organization Settings",description:"",state:"organization.edit",link:"/organization/edit/",permissions:[]},{name:"Internal Dashboard",description:"",state:"internal.dashboard",link:"/internal/dashboard",permissions:[]},{name:"Traffic Trends",description:"",state:"internal.traffic_trends",link:"/internal/traffic_trends",permissions:[]},{name:"Pipeline Dashboard",description:"",state:"dataPipeline",link:"/pipeline",permissions:[]}]},{name:"Platform Commands",nodes:[{name:"Generate Krux Standard Segments",description:"",state:"platform.generate",link:"/platform/generate",permissions:[]}]}]}]}}]),angular.module("gridTaskApp").run(["$templateCache",function(a){"use strict";a.put("/src/app/templates/directive-templates/cards.html",'<div class="cards-group" ng-style="groupStyle">\r\n	<div class="my-card" id="{{contentOptions.debugCard.id}}" ng-if="contentOptions.enableDebugging" ng-style="contentOptions.debugCard.style">\r\n		<div class="front">\r\n			<div class="my-card__header">\r\n				<span class="my-card__header__icon card-font icon-info"></span>\r\n				<span class="my-card__header__text">{{contentOptions.debugCard.text | translate}}</span>\r\n			</div>\r\n			<div class="my-card__body">\r\n				<span>{{contentOptions.debugCard.body | translate}}</span>\r\n			</div>\r\n		</div>\r\n		<div class="back">\r\n			<div class="my-card__header">\r\n				<span class="my-card__header__icon card-font icon-circle-left"></span>\r\n				<span class="my-card__header__text">{{contentOptions.debugCard.text | translate}}</span>\r\n			</div>\r\n			<div class="my-card__body">\r\n				<div ng-if="contentOptions.debugCard.templateUrl" ng-include="contentOptions.debugCard.templateUrl">\r\n				</div>\r\n				<div ng-if="!contentOptions.debugCard.templateUrl" gr-template="contentOptions.debugCard.template" gr-name="debugTemplate"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="my-card" ng-repeat="(id, card) in cards" id="{{id}}" ng-style="card.style">\r\n		<div class="front">\r\n			<div class="my-card__header">\r\n				<span class="my-card__header__icon card-font icon-info"></span>\r\n				<span class="my-card__header__text">{{card.label | translate}}</span>\r\n			</div>\r\n			<div ng-if="card.counter">\r\n				<div class="my-card__body" ng-init="card.count = card.counter.calculate(startDate, endDate) || card.count">\r\n					<span number-format="card.count"></span>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="back">\r\n			<div class="my-card__header">\r\n				<span class="my-card__header__icon card-font icon-circle-left"></span>\r\n				<span class="my-card__header__text">{{card.label | translate}}</span>\r\n			</div>\r\n			<div class="my-card__body">\r\n				<div class="my-card__body__graphs" graphs="card.graphs"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>'),a.put("/src/app/templates/directive-templates/chart-segment.html",'<div class="chart-segment">\r\n	<div class="chart-segment__list">\r\n		<div class="chart-segment__list__header">\r\n			<span class="chart-segment__list__header__text">{{panel.header.text | translate}}</span>\r\n		</div>\r\n		<div class="chart-segment__list__body">\r\n			<div ng-repeat="user in selectedUsers" class="chart-segment__list__body__user" ng-class="{\'even\' : $even, \'odd\': $odd}">\r\n				<span class="chart-segment__list__body__user__icon icon-close" ng-click="deleteUser(user, $index)"></span>\r\n				<span class="chart-segment__list__body__user__text">{{::\'usersInteract\' | translate}}{{user.touchpoints}}</span>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="chart-segment__btn">\r\n		<button class="kx-btn">{{::panel.btn.text | translate}}</button>\r\n	</div>\r\n</div>'),a.put("/src/app/templates/directive-templates/checkbox-select.html",'<div class="checkbox-select" any-other-click="isShow=false">\r\n	<div class="checkbox-select__check">\r\n		<label class="checkbox-select__input-control">\r\n			<input type="checkbox" ng-model="options.selected.check" ng-change="checked(options.selected.check)" />\r\n			<span class="checkbox-select__input-control__span" ng-class="{\'marked\':options.selected.isMarked || options.selected.isNotMarked}"></span>\r\n		</label>\r\n	</div>\r\n	<button type="button" class="checkbox-select__btn" ng-class="{\'opened\' : isShow}" ng-click="toggle()">\r\n		<span class="checkbox-select__expand" ng-class="{\'icon-menu-down\': !isShow, \'icon-menu-up\': isShow}"></span>\r\n	</button>\r\n\r\n	<ul class="checkbox-select__list" ng-show="isShow">\r\n		<li ng-repeat="action in options.actions" ng-click="select(action)"><a>{{action.label | translate}}</a></li>\r\n	</ul>\r\n</div>\r\n\r\n'),a.put("/src/app/templates/directive-templates/content-options-cards.html",'<div class="options">\r\n	<div class="options__block">\r\n		<div custom-datepicker="options.datepickerOptions"></div>\r\n	</div>\r\n	<div class="options__filter">\r\n		<split-button class="options__show" actions="options.searchOptions" selected="options.show" search="options.searchValue"></split-button>\r\n		<search class="options__search" search-value="options.searchValue"></search>\r\n		<div class="options__filt" filter="options.filterOptions" on-filtrate="options.filtrate"></div>\r\n	</div>\r\n</div>\r\n'),a.put("/src/app/templates/directive-templates/content-options-d3.html",'<div class="options">\r\n	<div class="options__block">\r\n		<div class="input-prepend">\r\n			<div kx-date-range="kx-date-range" time-range="past" name="dateRange" ng-model="filters.dateRange" ng-disabled="loading" ng-change="filters.onDateRangeChange()" class="date-range-picker"></div>\r\n		</div>\r\n	</div>\r\n	<div class="options__select">\r\n		<select class="options__event" ui-select2="options.eventType.selectOpt" ng-model="options.eventOpt.options.selected" data-placeholder="Choose Event" ng-required="true">\r\n			<option value=""></option>\r\n			<option value="{{action}}" ng-repeat="action in options.eventType.options.actions">{{action.label|translate}}</option>\r\n		</select>\r\n		<select class="options__segments kx-multiselect" kx-multiselect="options.segments.selectOpt" ng-change="options.segments.options.onChange()" ng-model="options.segments.options.selected" multiple="true" data-placeholder="{{::\'Choose Segments\' | translate}}">\r\n			<option value="{{action}}" ng-repeat="action in options.segments.options.actions">{{action.label|translate}}</option>\r\n		</select>\r\n		<select class="options__campaign kx-multiselect" kx-multiselect="options.campaign.selectOpt" ng-change="options.campaign.options.onChange()" ng-model="options.campaign.options.selected" data-placeholder="{{::\'Choose Campaigns\' | translate}}" multiple="true">\r\n			<option value="{{action}}" ng-repeat="action in options.campaign.options.actions">{{action.label|translate}}</option>\r\n		</select>\r\n	</div>\r\n	<button class="kx-btn" ng-click="options.refresh()">Update</button>\r\n</div>\r\n'),a.put("/src/app/templates/directive-templates/content-options.html",'<div class="options">\r\n	<div class="options__block">\r\n		<div checkbox-select="options.checks.options" class="options__check"></div>\r\n		<button class="options__refresh" ng-click="options.refresh()">Refresh</button>\r\n		<div dropdown="options.mores.options" class="options__more"></div>\r\n		<upload class="options__upload" ng-show="options.upload" upload-callback="options.upload"></upload>\r\n	</div>\r\n	<div class="options__filter">\r\n		<search class="options__search" search-value="options.searchValue"></search>\r\n		<split-button class="options__show" actions="options.searchOptions" selected="options.show" search="options.searchValue"></split-button>\r\n		<div class="options__filt" filter="options.filterOptions" on-filtrate="options.filtrate"></div>\r\n	</div>\r\n</div>\r\n'),a.put("/src/app/templates/directive-templates/core-diagram.html",'<p id="chart" max-heighter>\r\n'),a.put("/src/app/templates/directive-templates/custom-datepicker.html",'<button class="date-btn" ng-click="close()">\r\n	<span class="date-btn__icon glyph-calendar"></span>\r\n	<span class="date-btn__text">{{opt.startDate | date}} - {{opt.endDate | date}}</span>\r\n	<button class="date-btn__toggle" ng-click="toggle()" ng-class="{\'opened\': isShow}">\r\n		<span class="expand" ng-class="{ \'icon-menu-up\': isShow, \'icon-menu-down\': !isShow }">\r\n		</span>\r\n	</button>\r\n	<div class="date-btn__datepicker" ng-if="isShow">\r\n	</div>\r\n</button>\r\n'),a.put("/src/app/templates/directive-templates/custom-grid.html",'<div class="custom-grid" ng-grid="options">\r\n	<div grid-menu class="custom-grid__menu"></div>\r\n</div>\r\n\r\n'),a.put("/src/app/templates/directive-templates/custom-ui-grid.html",'<div ui-grid="options" class="custom-ui-grid" ui-grid-selection ui-grid-expandable ui-grid-custom-menu>\r\n</div>'),a.put("/src/app/templates/directive-templates/debug.html",'<div class="debug">\r\n	<div class="debug__back">\r\n		<button class="debug__back__btn" onclick="location.href = \'/navigation\'">{{::\'back\' | translate}}</button>\r\n	</div>\r\n	<div class="debug__uploader">\r\n		<upload class="debug__uploader__btn" upload-callback="contentOptions.uploadCards" label="\'Upload Cards\'"></upload>\r\n		<upload class="debug__uploader__btn" upload-callback="contentOptions.uploadSankey" label="\'Upload Sankey\'"></upload>\r\n		<upload class="debug__uploader__btn" upload-callback="contentOptions.uploadHistogram" label="\'Upload Histogram\'"></upload>\r\n	</div>\r\n</div>\r\n'),a.put("/src/app/templates/directive-templates/dropdown.html",'<div class="my-dropdown" any-other-click="isShow=false">\r\n	<button type="button" class="my-dropdown__btn" ng-show="!options.isMenu" ng-click="isShow = !isShow" ng-class="{\'opened\' : isShow}">\r\n		<span class="my-dropdown__text">{{options.label | translate}}{{options.selected.label | translate}}</span>\r\n		<span class="my-dropdown__expand" ng-class="{\'icon-menu-up\': isShow, \'icon-menu-down\' : !isShow}"></span>\r\n	</button>\r\n	<button type="button" class="my-dropdown__btn" ng-show="options.isMenu" ng-click="isShow = !isShow" ng-class="{\'opened\' : isShow}">\r\n		<span class="my-dropdown__text">{{options.label | translate}}</span>\r\n		<span class="my-dropdown__expand" ng-class="{\'icon-menu-up\': isShow, \'icon-menu-down\' : !isShow}"></span>\r\n	</button>\r\n\r\n	<ul class="my-dropdown__list" ng-show="isShow">\r\n		<li ng-repeat="action in options.values">\r\n			<div ng-if="options.isCheckbox">\r\n				<div class="my-dropdown__list__check">\r\n					<label class="my-dropdown__list__input-control">\r\n						<input type="checkbox" ng-model="action.isVisible" ng-change="options.onCheck(action, $index)" id="{{action.label | translate}}">\r\n						<span class="my-dropdown__list__input-control__span"></span>\r\n					</label>\r\n				</div>\r\n				<label class="my-dropdown__list__label" for="{{action.label | translate}}">{{action.label | translate}}</label>\r\n			</div>\r\n			<a ng-click="select(action)" ng-if="!options.isCheckbox">{{action.label | translate}}</a>\r\n		</li>\r\n		<button ng-if="options.withSave" ng-click="options.onSave()" class="my-dropdown__save">{{::\'save\' | translate}}</button>\r\n	</ul>\r\n</div>\r\n'),a.put("/src/app/templates/directive-templates/edit-entity.html",'<h1>{{::\'editEntity\' | translate}}</h1>\r\n<div ng-repeat="(key, value) in myEntity" class="dialog__entity">\r\n	<span class="dialog__key">{{key}}</span><input class="dialog__value" ng-model="myEntity[key]" />\r\n</div>\r\n'),a.put("/src/app/templates/directive-templates/filter-list.html",'<div class="filter-list">\r\n	<div class="filter-list__header">\r\n		{{::\'filterList\' | translate}}\r\n	</div>\r\n	<div class="filter-list__options">\r\n		<div class="filter-list__options__value" ng-repeat="opt in filterOptions">\r\n			<div class="filter-list__options__value__header">\r\n				{{opt.label | translate}}\r\n			</div>\r\n			<div class="filter-list__options__value__input">\r\n				<input type="text" ng-model="opt.filter" />\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div>\r\n		<button class="filter-list__button" ng-click="showRecords()">{{::\'showRecords\' | translate}}</button>\r\n	</div>\r\n</div>'),a.put("/src/app/templates/directive-templates/filter.html",'<div class="filter" any-other-click="listState=false" ng-class="{\'filter-selected\' : listState}">\r\n	<button class="filter__btn" ng-click="filterClick()">\r\n		<span class="filter__icon icon-filter"></span>\r\n		<span class="filter__name">{{::\'filter\'|translate}}</span>\r\n		<span class="expand" ng-class="{\'icon-menu-up\': listState, \'icon-menu-down\' : !listState}"></span>\r\n	</button>\r\n	<div ng-show="listState">\r\n		<div class="filter__list" filter-list resize-on="listState" parent=".filter"></div>\r\n	</div>\r\n</div>\r\n'),a.put("/src/app/templates/directive-templates/gr-template.html",'<div ng-include="templateUrl">\r\n</div>'),a.put("/src/app/templates/directive-templates/graphs.html",'<div ng-repeat="graph in graphs" class="graphs" ng-style="graph.style">\r\n	<div class="graph">\r\n	</div>\r\n</div>'),a.put("/src/app/templates/directive-templates/grid-menu.html",'<div class="grid-menu" ng-show="isShow">\r\n	<div class="grid-menu__options" dropdown="options"></div>\r\n</div>'),a.put("/src/app/templates/directive-templates/histogram.html",'<div class="histogram">\r\n	<svg class="chart">\r\n	</svg>\r\n</div>\r\n<div chart-segment selected-users="selectedUsers"></div>\r\n'),a.put("/src/app/templates/directive-templates/history.html",'<h1>{{::\'history\' | translate}}</h1>\r\n<div class="message" ng-if="value.length == 0">{{::\'historyEmpty\' | translate}}.</div>\r\n<div class="history__content" ng-repeat="hist in value">\r\n	<div class="dialog__oldVal">\r\n		{{::\'oldValue\' | translate}}: <div ng-repeat="(key, value) in hist.oldObj" class="dialog__entity">\r\n	<span class="dialog__key">{{key | translate}}</span>:<span class="dialog__value">{{value | translate}}</span>\r\n</div>\r\n	</div>\r\n	<div class="dialog__newVal">\r\n		{{::\'newValue\' | translate}}: <div ng-repeat="(key, value) in hist.newObj" class="dialog__entity">\r\n	<span class="dialog__key">{{key | translate}}</span>:<span class="dialog__value">{{value | translate}}</span>\r\n</div>\r\n	</div>\r\n	<div class="dialog__dateChange">\r\n		{{::\'dateChange\' | translate}}: <span>{{hist.dateChange | date}}</span>\r\n	</div>\r\n	<hr />\r\n</div>\r\n'),a.put("/src/app/templates/directive-templates/kx-nav-bar.html",'<nav class="kx-nav row-fluid">\r\n	<div class="span12">\r\n		<div class="row-fluid">\r\n			<div class="kx-menu span8" ng-controller="NavigationCtrl" kx-menu>\r\n				<a class="brand kx-navbar-icon"><img class="main-logo"></a>\r\n				<ul>\r\n					<li ng-repeat="node in navigationTree">\r\n						<a>{{node.name}}</a>\r\n						<div class="kx-submenu">\r\n							<div class="kx-submenu-inner">\r\n								<div ng-repeat="subNode in node.nodes">\r\n									<h4 ng-if="subNode.nodes">{{subNode.name | translate}}</h4>\r\n									<ul ng-if="subNode.nodes">\r\n										<li ng-repeat="path in subNode.nodes">\r\n											<a>{{path.name | translate}}</a>\r\n										</li>\r\n									</ul>\r\n									<ul ng-if="!subNode.nodes">\r\n										<li>\r\n											<a>{{subNode.name | translate}}</a>\r\n										</li>\r\n									</ul>\r\n								</div>\r\n							</div>\r\n						</div>\r\n					</li>\r\n				</ul>\r\n			</div>\r\n			<div class="menu-util span4">\r\n				<ul class="row-fluid">\r\n					<li class="span7">\r\n						<div class="org-switcher-off" ng-hide="session.other_organizations.length">\r\n							<span class="ng-binding">Krux Demo Client</span>\r\n						</div>\r\n					</li>\r\n					<li class="span5 account-util dropdown">\r\n						<a class="dropdown-toggle" data-toggle="dropdown" href="">\r\n							<i class="icon-user"></i> krux-user\r\n							<b class="caret"></b>\r\n						</a>\r\n						<ul class="account-util-menu" role="menu" aria-labelledby="dLabel">\r\n							<li><a href="">{{"Account" | translate}}</a></li>\r\n							<li><a href="">{{"Logout" | translate}}</a></li>\r\n						</ul>\r\n					</li>\r\n				</ul>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</nav>'),a.put("/src/app/templates/directive-templates/loading.html",'<div class="loading" ng-style="ctrl.element">\r\n	<div class="loading-disabled" ng-style="ctrl.disabled">\r\n	</div>\r\n	<div class="spinner">\r\n		<div class="spinner-container container1">\r\n			<div class="circle1"></div>\r\n			<div class="circle2"></div>\r\n			<div class="circle3"></div>\r\n			<div class="circle4"></div>\r\n		</div>\r\n		<div class="spinner-container container2">\r\n			<div class="circle1"></div>\r\n			<div class="circle2"></div>\r\n			<div class="circle3"></div>\r\n			<div class="circle4"></div>\r\n		</div>\r\n		<div class="spinner-container container3">\r\n			<div class="circle1"></div>\r\n			<div class="circle2"></div>\r\n			<div class="circle3"></div>\r\n			<div class="circle4"></div>\r\n		</div>\r\n	</div>\r\n</div>\r\n'),a.put("/src/app/templates/directive-templates/modal.html",'<div class="modal" ng-class="modal" ng-if="isModal">\r\n	<div class="fade" ng-style="fade">\r\n	</div>\r\n	<div class="dialog">\r\n		<div ng-include="bodyTemplateUrl" ng-if="!bodyTemplate" onload="onInclude()">\r\n		</div>\r\n		<div ng-if="bodyTemplate" gr-template="bodyTemplate" gr-name="editEntityTemplate">\r\n		</div>\r\n		<div class="dialog-btn">\r\n			<button class="save-btn" ng-if="enableSave" ng-click="save()">{{::\'save\' | translate}}</button>\r\n			<button class="close-btn" ng-click="close()">{{::\'close\' | translate}}</button>\r\n		</div>\r\n	</div>\r\n</div>\r\n'),a.put("/src/app/templates/directive-templates/mouse-over.html",'<div class="mouse-over" ng-style="style">\r\n	<div class="mouse-over-simple" ng-if="type.isSimple">\r\n		<div class="mouse-over-simple__header">\r\n			<span class="mouse-over-simple__header__text">{{value.header | translate}}</span>\r\n		</div>\r\n		<div class="mouse-over-simple__body">\r\n			<div ng-repeat="val in value.data" class="mouse-over-simple__body__value">\r\n				<span class="mouse-over-simple__body__value__text">{{::\'Campaing ID\' | translate}}: {{val.campaignId}}</span>\r\n				<span class="mouse-over-simple__body__value__text">{{::\'Ad ID\' | translate}}: {{val.adId}}</span>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="mouse-over-medium" ng-if="type.isMedium">\r\n		<div class="mouse-over-medium__header">\r\n			<span class="mouse-over-simple__medium__text">{{value.header | translate}}</span>\r\n		</div>\r\n		<div class="mouse-over-medium__body">\r\n			<div class="mouse-over-medium__body__blockSegm" ng-style="{float: \'left\'}">\r\n				<span class="mouse-over-medium__body__header">\r\n					{{:: \'topSegments\' | translate}}\r\n				</span>\r\n				<div ng-repeat="prop in value.data.topSegments">\r\n					<span class="mouse-over-medium__body__value__text">{{prop | translate}}</span>\r\n				</div>\r\n			</div>\r\n			<div class="mouse-over-medium__body__blockCampaing" ng-style="{float: \'right\'}">\r\n				<span class="mouse-over-medium__body__header">\r\n					{{:: \'topCampaigns\' | translate}}\r\n				</span>\r\n				<div ng-repeat="prop in value.data.topCampaings">\r\n					<span class="mouse-over-medium__body__value__text">{{prop | translate}}</span>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="mouse-over-custom" ng-if="type.isCustom">\r\n		<div ng-if="type.templateUrl" ng-include="type.templateUrl">\r\n		</div>\r\n		<div ng-if="!type.templateUrl" gr-template="type.template" gr-name="mouseOverTemplate"></div>\r\n	</div>\r\n</div>\r\n'),a.put("/src/app/templates/directive-templates/overlay.html",'<div class="custom-overlay" ng-style="style">\r\n	<div class="custom-overlay__toggle">\r\n		<span ng-click="state = !state" ng-show="!state" class="glyphicon glyphicon-chevron-left"></span>\r\n		<span ng-click="state = !state" ng-show="state" class="glyphicon glyphicon-chevron-right"></span>\r\n	</div>\r\n	<ng-transclude class="custom-overlay__transclude" ng-style="transcludeStyle"></ng-transclude>\r\n</div>\r\n'),a.put("/src/app/templates/directive-templates/page-content-cards.html",'<div class="page-content">\r\n	<div class="page-content__header">\r\n		<div class="page-content__options">\r\n			<content-options-cards options="contentOptions"></content-options-cards>\r\n		</div>\r\n		<div class="page-content__actions">\r\n			<div class="page-content__actions__export" dropdown="exports.options"></div>\r\n		</div>\r\n	</div>\r\n	<div class="page-content__body">\r\n		<div class="page-content__cards" content-options="contentOptions" cards="cardsOptions">\r\n		</div>\r\n		<div class="page-content__list">\r\n			<div custom-ui-grid grid-data="data" grid-options="uiGridOptions" content-options="contentOptions"></div>\r\n		</div>\r\n	</div>\r\n	<div class="page-content__footer">\r\n	</div>\r\n</div>\r\n\r\n'),a.put("/src/app/templates/directive-templates/page-content-d3.html",'<div class="page-content">\r\n	<div class="page-content__header">\r\n		<div class="page-content__options">\r\n			<div content-options-d3 options="contentOptions" filters="filters"></div>\r\n		</div>\r\n		<div class="page-content__cards" cards="cardsOptions" content-options="contentOptions">\r\n		</div>\r\n	</div>\r\n	<div class="page-content__body">\r\n		<div class="page-content__list">\r\n			<div class="core-diagram" core-diagram="{}" sankey-data="sankeyData"></div>\r\n			<div overlay>\r\n				<div class="histogram-content" histogram histogram-data="histogramData"></div>\r\n			</div>\r\n\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n'),a.put("/src/app/templates/directive-templates/page-content.html",'<div class="page-content">\r\n	<div class="page-content__header">\r\n		<div class="page-content__icon">\r\n			<span class="page-content__icon__text icon-text2"></span>\r\n		</div>\r\n		<div class="page-content__name">\r\n			{{grid.name | translate}}\r\n		</div>\r\n		<div class="page-content__count">\r\n			{{grid.count}} {{::\'records\' | translate}}\r\n		</div>\r\n		<div class="page-content__actions">\r\n			<div class="page-content__actions__export" dropdown="exports.options"></div>\r\n			<div class="page-content__actions__view" dropdown="views.options"></div>\r\n		</div>\r\n	</div>\r\n	<div class="page-content__body">\r\n		<div class="page-content__options">\r\n			<content-options options="contentOptions"></content-options>\r\n		</div>\r\n		<div class="page-content__list">\r\n			<div custom-grid grid-data="data" export-to="exports.options.selected" ng-show="views.options.selected.isGrid" grid-options="gridOptions"></div>\r\n			<div custom-ui-grid grid-data="data" ng-if="views.options.selected.isUiGrid" grid-options="uiGridOptions" content-options="contentOptions"></div>\r\n		</div>\r\n	</div>\r\n	<div class="page-content__footer">\r\n	</div>\r\n</div>\r\n\r\n'),a.put("/src/app/templates/directive-templates/search.html",'<div class="search">\r\n	<input type="search" ng-model="searchValue" />\r\n	<span class="search-span icon-search" ng-show="edited">\r\n	</span>\r\n	<span class="search-clear icon-close" ng-click="clear()" ng-show="!edited">\r\n	</span>\r\n</div>\r\n\r\n'),a.put("/src/app/templates/directive-templates/split-button.html",'<button class="split-btn" ng-click="close()">\r\n	<div ng-if="actions.selected">\r\n		<div ng-if="!actions.isComplex">\r\n			{{actions.selected.label | translate}}\r\n		</div>\r\n		<div ng-if="actions.isComplex">\r\n			{{::\'choose\' | translate}} {{actions.selected.label | translate}}\r\n		</div>\r\n	</div>\r\n\r\n	<div ng-if="!actions.selected" style="opacity: 0.5">\r\n		{{typehead | translate}}\r\n	</div>\r\n	<button class="split-btn__toggle" ng-click="toggle()" ng-class="{\'opened\' : isShow}" any-other-click="isShow=false">\r\n		<span class="expand" ng-class="{\'icon-menu-up\': isShow, \'icon-menu-down\' : !isShow}">\r\n		</span>\r\n	</button>\r\n	<ul class="split-btn__list" ng-show="isShow">\r\n		<li ng-repeat="action in actions" ng-click="select(action)"><a>{{action.label | translate}}</a> </li>\r\n	</ul>\r\n</button>'),a.put("/src/app/templates/directive-templates/ui-grid-menu.html",'<div class="ui-grid-menu">\r\n	<dropdown class="ui-grid-menu__options" dropdown-options="options"></dropdown>\r\n</div>\r\n'),a.put("/src/app/templates/directive-templates/upload.html",'<label>\r\n	<input type="file" />\r\n	<span ng-if="!label">{{::\'upload\' | translate}}</span>\r\n	<span ng-if="label">{{label | translate}}</span>\r\n</label>\r\n'),a.put("/src/app/templates/grid-templates/cell-templates/cell-without-sort.html",'<div class="ngHeaderSortColumn {{col.headerClass}}" ng-style="{\'cursor\': col.cursor}" ng-class="{ \'ngSorted\': !noSortVisible }">\r\n	<div ng-click="col.sort($event)" ng-class="\'colt\' + col.index" class="ngHeaderText">\r\n		{{col.displayName | translate}}\r\n	</div>\r\n	<div class="ngSortButtonDown" ng-show="col.showSortButtonDown()">\r\n	</div>\r\n	<div class="ngSortButtonUp" ng-show="col.showSortButtonUp()"></div><div class="ngSortPriority">\r\n		{{col.sortPriority | translate}}\r\n	</div>\r\n	<div ng-class="{ ngPinnedIcon: col.pinned, ngUnPinnedIcon: !col.pinned }" ng-click="togglePin(col)" ng-show="col.pinnable">\r\n	</div>\r\n</div>\r\n<div ng-show="col.resizable" class="ngHeaderGrip" ng-click="col.gripClick($event)" ng-mousedown="col.gripOnMouseDown($event)">\r\n</div>'),
a.put("/src/app/templates/grid-templates/cell-templates/cell.html",'<div class="column" ng-style="{\'cursor\': col.cursor}" ng-class="{ \'ngSorted\': !noSortVisible }" ng-class="{ \'ngSorted\': !noSortVisible }">\r\n	<div class="column__sort" ng-click="col.sort($event)" ng-style="{\'height\': col.headerRowHeight}">\r\n		<div class="column__name" ng-style="{\'height\': col.headerRowHeight}">\r\n			<span class="column__name__span">{{col.displayName | translate}}</span>\r\n			<div class="column__sort-down" ng-show="col.showSortButtonDown()">\r\n				<span class="icon-arrow-down"></span>\r\n			</div>\r\n			<div class="column__sort-up" ng-show="col.showSortButtonUp()">\r\n				<span class="icon-arrow-up"></span>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n'),a.put("/src/app/templates/grid-templates/cell-templates/fields/action.html",'<div class="action" ng-if="row.orig.actions.values.isShow" ng-style="dropdownOpt.style">\r\n	<div class="dynamic-dropdown" dynamic-dropdown orig-opt="row.orig.actions.values.options" dropdown-opt="dropdownOpt" col="col" row="row" re-init="row.orig.actions.values"></div>\r\n	<div class="action__dropdown" dropdown="dropdownOpt" ng-if="dropdownOpt.isVisible"></div>\r\n</div>\r\n'),a.put("/src/app/templates/grid-templates/cell-templates/fields/date.html",'<div class="row-date">\r\n	<div class="row-date__value wrap">\r\n		{{row.getProperty(col.field) | date}}\r\n	</div>\r\n</div>'),a.put("/src/app/templates/grid-templates/cell-templates/fields/details.html",'<div class="cell-details">\r\n	<span class="cell-details__expand" details row="row" details-class="\'toggle\'" ng-class="{\'icon-menu-down\' : !row.orig.actions.isToggle, \'icon-menu-up\': row.orig.actions.isToggle}"></span>\r\n	<div class="cell-details__check">\r\n		<label class="cell-details__input">\r\n			<input type="checkbox" ng-model="row.orig.actions.isCheck" ng-change="row.orig.actions.setCheck(row.orig)" />\r\n			<span class="cell-details__input__check"></span>\r\n		</label>\r\n	</div>\r\n</div>\r\n'),a.put("/src/app/templates/grid-templates/cell-templates/fields/name.html",'<div class="row-name wrap">\r\n	<i class="glyphicon glyphicon-picture"></i>\r\n	<div class="row-name__value">\r\n		<span>{{row.getProperty(col.field) | translate}}</span>\r\n	</div>\r\n</div>'),a.put("/src/app/templates/grid-templates/cell-templates/fields/status.html",'<div class="row-status">\r\n	<div class="row-status__value">\r\n		{{row.getProperty(col.field) | translate}}\r\n	</div>\r\n</div>'),a.put("/src/app/templates/grid-templates/cell-templates/fields/trend.html",'<div class="row-trend wrap">\r\n	<div class="row-trend__value ">\r\n		{{row.getProperty(col.field) | translate}}\r\n	</div>\r\n</div>'),a.put("/src/app/templates/grid-templates/cell-templates/fields/type.html",'<div class="row-type">\r\n	<div class="row-type__value wrap">\r\n		{{row.getProperty(col.field) | translate}}\r\n	</div>\r\n</div>'),a.put("/src/app/templates/grid-templates/cell-templates/fields/value.html",'<div class="row-value">\r\n	<div class="row-value__value">\r\n		{{row.getProperty(col.field) | currency}}\r\n	</div>\r\n</div>'),a.put("/src/app/templates/grid-templates/details-templates/details-example1.html",'<div class="details-template">\r\n	Defrault template 1\r\n	<hr />\r\n</div>'),a.put("/src/app/templates/grid-templates/details-templates/details-example2.html",'<div class="details-template">\r\n	Other details template\r\n	<hr />\r\n</div>\r\n'),a.put("/src/app/templates/grid-templates/details-templates/details-upload.html",'<div class="details-template">\r\n	From upload template\r\n	<hr />\r\n</div>\r\n'),a.put("/src/app/templates/grid-templates/details-templates/details.html",'<div class="details-template" ng-init="row.actions.tab = row.actions.tab || 2">\r\n	<ul>\r\n		<li ng-class="{active:row.actions.tab===1}">\r\n			<label ng-click="row.actions.tab = 1">Overview</label>\r\n		</li>\r\n		<li ng-class="{active:row.actions.tab===2}">\r\n			<label ng-click="row.actions.tab = 2">Details Information</label>\r\n		</li>\r\n	</ul>\r\n	<div class="content">\r\n		<div class="overview" ng-show="row.actions.tab === 1">\r\n			<div class="headers">\r\n				<span class="header-row">Overview:</span>\r\n\r\n			</div>\r\n			<div class="props">\r\n				<span>  Campaign, Refer</span>\r\n			</div>\r\n		</div>\r\n		<div class="details-information" ng-show="row.actions.tab === 2">\r\n			<div class="headers">\r\n				<span class="header-row">Attributes:</span>\r\n				<span class="header-row">Created:</span>\r\n				<span class="header-row">Last Modified:</span>\r\n			</div>\r\n			<div class="props">\r\n				<span>  Campaign, Refer</span>\r\n				<span>  Demo User, 2015-03-03</span>\r\n				<span>  Victoria Rabinovich, 2015-03-03</span>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n'),a.put("/src/app/templates/grid-templates/dynamic-actions.html",'<div ng-repeat="o in dynamicOpt.values" class="dynamic-actions" ng-class="o.label" ng-show="o.isVisible" on-finish-render="ngRepeatFinished">\r\n	<button class="dynamic-actions__btn" ng-click="dynamicOpt.callback(o)">{{o.label | translate}}</button>\r\n</div>'),a.put("/src/app/templates/grid-templates/grid-footer.html",'<div ng-show="showFooter" class="ngFooterPanel" ng-class="{\'ui-widget-CONTENT\': jqueryUITheme, \'ui-corner-bottom\': jqueryUITheme}" ng-style="footerStyle()">\r\n	<div class="ngPagerContainer" style="float: right; margin-top: 10px;" ng-show="enablePaging" ng-class="{\'ngNoMultiSelect\': !multiSelect}">\r\n		<div style="float:left; margin-right: 10px;" class="ngRowCountPicker">\r\n			<span style="float: left; margin-top: 3px;" class="ngLabel">{{i18n.ngPageSizeLabel}}</span>\r\n			<select style="float: left;height: 27px; width: 100px" ng-model="pagingOptions.pageSize">\r\n				<option ng-repeat="size in pagingOptions.pageSizes">{{size}}</option>\r\n			</select>\r\n		</div>\r\n		<div style="float:left; margin-right: 10px; line-height:25px;" class="ngPagerControl" style="float: left; min-width: 135px;">\r\n			<button class="ngPagerButton" ng-click="pageToFirst()" ng-disabled="cantPageBackward()" title="{{i18n.ngPagerFirstTitle}}"><div class="ngPagerFirstTriangle"><div class="ngPagerFirstBar"></div></div></button>\r\n			<button class="ngPagerButton" ng-click="pageBackward()" ng-disabled="cantPageBackward()" title="{{i18n.ngPagerPrevTitle}}"><div class="ngPagerFirstTriangle ngPagerPrevTriangle"></div></button>\r\n			<input class="ngPagerCurrent" min="1" max="{{maxPages()}}" type="number" style="width:50px; height: 24px; margin-top: 1px; padding: 0 4px;" ng-model="pagingOptions.currentPage" />\r\n			<button class="ngPagerButton" ng-click="pageForward()" ng-disabled="cantPageForward()" title="{{i18n.ngPagerNextTitle}}"><div class="ngPagerLastTriangle ngPagerNextTriangle"></div></button>\r\n			<button class="ngPagerButton" ng-click="pageToLast()" ng-disabled="cantPageToLast()" title="{{i18n.ngPagerLastTitle}}"><div class="ngPagerLastTriangle"><div class="ngPagerLastBar"></div></div></button>\r\n		</div>\r\n	</div>\r\n</div>'),a.put("/src/app/templates/grid-templates/row-templates/header-row.html",'<div ng-style="{ height: col.headerRowHeight }" ng-repeat="col in renderedColumns" ng-class="col.colIndex()" class="ngHeaderCell" ng-header-cell></div>'),a.put("/src/app/templates/grid-templates/row-templates/row-with-detalis.html",'<div ng-style="{ \'cursor\': row.cursor }" ng-repeat="col in renderedColumns" ng-class="col.colIndex()" class="ngCell {{col.cellClass}}" row-check="row" ng-click="row.orig.actions.select(row)">\r\n	<div ng-cell>\r\n	</div>\r\n</div>\r\n\r\n'),a.put("/src/app/templates/grid-templates/row-templates/row.html",'<div ng-style="{ \'cursor\': row.cursor }" ng-repeat="col in renderedColumns" ng-class="col.colIndex()" class="ngCell " row-check="row" ng-click="row.orig.actions.select(row)">\r\n	<div ng-cell>\r\n	</div>\r\n</div>\r\n'),a.put("/src/app/templates/ui-grid-templates/cell-templates/action.html",'<div class="action" ng-if="row.isSelected" ng-style="dropdownOpt.style">\r\n	<div class="dynamic-dropdown" dynamic-dropdown orig-opt="row.actions.options" dropdown-opt="dropdownOpt" col="col" row="row" re-init="row.actions.options"></div>\r\n	<div class="action__dropdown" dropdown="dropdownOpt" ng-if="dropdownOpt.isVisible"></div>\r\n</div>\r\n'),a.put("/src/app/templates/ui-grid-templates/cell-templates/details.html",'<div class="cell-details">\r\n	<span class="cell-details__expand" ng-click="row.actions.expand(row)" ng-if="grid.options.enableExpandable" ng-class="{\'icon-menu-down\' : !row.isExpanded, \'icon-menu-up\': row.isExpanded}"></span>\r\n	<div class="cell-details__check" ng-if="!row.actions.disableCheck">\r\n		<label class="cell-details__input">\r\n			<input type="checkbox" ng-model="row.isCheck" ng-change="row.actions.setCheck(row)" />\r\n			<span class="cell-details__input__check"></span>\r\n		</label>\r\n	</div>\r\n</div>\r\n'),a.put("/src/app/templates/ui-grid-templates/cell-templates/header.html",'<div ng-class="{ \'sortable\': sortable }">\r\n	<div class="ui-grid-cell-contents" col-index="renderIndex" title="TOOLTIP">\r\n		<span>{{ col.displayName CUSTOM_FILTERS }}</span>\r\n		<span ng-if="col.sort.direction" ui-grid-visible="col.sort.direction" ng-class="{ \'icon-arrow-up\': col.sort.direction == asc, \'icon-arrow-down\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }">\r\n			&nbsp;\r\n		</span>\r\n	</div>\r\n	<div class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}">\r\n		<i class="ui-grid-icon-angle-down">&nbsp;</i>\r\n	</div>\r\n	<div ui-grid-filter></div>\r\n</div>\r\n'),a.put("/src/app/templates/ui-grid-templates/header.html",'<div class="ui-grid-header">\r\n	<div class="ui-grid-top-panel">\r\n		<div class="ui-grid-header-viewport">\r\n			<div class="ui-grid-header-canvas">\r\n				<div class="ui-grid-header-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()">\r\n					<div class="ui-grid-header-cell-row">\r\n						<div class="ui-grid-header-cell ui-grid-clearfix" ng-repeat="col in colContainer.renderedColumns track by col.uid" ui-grid-header-cell col="col" render-index="$index"></div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n\r\n		</div>\r\n	</div>\r\n</div>'),a.put("/src/app/templates/ui-grid-templates/row.html",'<div ng-click="grid.appScope.fnOne(row)"\r\n	 ng-repeat="col in colContainer.renderedColumns track by col.colDef.name"\r\n	 class="ui-grid-cell" ng-class="{\'checked\': row.isCheck, \'expanded\': row.isExpanded, \'selected\': row.isSelected}" ui-grid-cell>\r\n</div>')}]);