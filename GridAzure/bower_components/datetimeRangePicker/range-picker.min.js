"use strict";angular.module("rgkevin.datetimeRangePicker",["vr.directives.slider"]).filter("rgTime",[function(){return function(n,t){var i=parseInt(n/60,10),r=n-i*60<10?"0"+(n-i*60):n-i*60,u=t?":00":i>=12&&i!==24?" pm":" am";return(!t&&i>12?i===24?"00":(i-12<10?"0":"")+(i-12):(i<10?"0":"")+i)+":"+r+u}}]).directive("rgRangePicker",["$compile","$timeout","$filter",function(n,t,i){return{restrict:"A",scope:{data:"=rgRangePicker",labels:"=",onTimeChange:"&",maxRangeDate:"=",vertical:"="},template:function(){return'<div class="rg-range-picker" ng-class="{\'rg-range-picker-vertical\':vertical}"><div class="rg-range-picker-box well" ng-class="{ \'only-calendars\': !data.hasTimeSliders, \'only-slider\': !data.hasDatePickers }"><div class="rg-range-picker-calendars" ng-show="data.hasDatePickers"><div class="rg-range-picker-calendar-box"><h5 class="rg-range-picker-calendar-label" ng-bind-template="{{datepickerTitles.from}}"><\/h5><datepicker ng-model="data.date.from" max-date="data.date.to" min-date="data.date.min" show-weeks="false" class="clean-calendar"><\/datepicker><\/div><div class="rg-range-picker-calendar-box right"><h5 class="rg-range-picker-calendar-label" ng-bind-template="{{datepickerTitles.to}}"><\/h5><datepicker ng-model="data.date.to" min-date="data.date.from" max-date="data.date.max" show-weeks="false" class="clean-calendar"><\/datepicker><\/div><\/div><div class="rg-range-picker-slider" id="rgRangePickerSliderContainer" ng-show="data.hasTimeSliders"><div class="rg-range-picker-slider-labels"><div class="row"><div class="rg-range-picker-divider xs-hidden"><span class="label">to<\/span><\/div><div class="col-xs-6 text-center"><span class="label label-range-picker">{{data.time.from | rgTime:data.time.hours24}}<\/span><\/div><div class="col-xs-6 text-center"><span class="label label-range-picker">{{data.time.to | rgTime:data.time.hours24}}<\/span><\/div><\/div><\/div><\/div><\/div><\/div>'},link:function(r,u,f){function h(){!s&&r.data.hasTimeSliders&&(p.append(o),n(o)(r),s=!0,u.width()<=y&&angular.element(".rg-range-picker",u[0]).addClass("rg-range-picker-responsive"))}function c(n,u){angular.isUndefined(e)||t.cancel(e);n!==u&&(e=t(function(){r.onTimeChange()({from:i("rgTime")(r.data.time.from,!0),to:i("rgTime")(r.data.time.to,!0),range:i("rgTime")(r.data.time.to-r.data.time.from,!0)})},500))}function v(){var t=r.data.date.to.getTime()-r.data.date.from.getTime(),n=b-t,i=r.data.date.from.getTime()-n<a?a:r.data.date.from.getTime()-n,u=r.data.date.to.getTime()+n>l?l:r.data.date.to.getTime()+n;r.data.date.min=new Date(i);r.data.date.max=new Date(u)}var y=400,p=angular.element("#rgRangePickerSliderContainer",u[0]),o=angular.element('<div slider class="clean-slider" ng-model="data.time.from" ng-model-range="data.time.to" floor="{{data.time.dFrom}}" ceiling="{{data.time.dTo}}" buffer="{{data.time.minRange || 1}}" step="{{data.time.step || 1}}" step-width="{{data.time.step || 1}}" precision="0" stretch="3"><\/div>'),s=!1,w={from:new Date,to:new Date,min:null,max:null},e;r.data.hasDatePickers=angular.isObject(r.data.date);r.data.hasTimeSliders=angular.isObject(r.data.time);r.datepickerTitles=angular.extend({date:{from:"START_DATE",to:"END_DATE"}}.date,r.labels&&r.labels.date);r.data.hasDatePickers&&(r.data.date=angular.extend(w,r.data.date));r.data.hasTimeSliders&&(r.data.time=angular.extend({from:480,to:1020,dFrom:0,dTo:1440,step:15,minRange:15,hours24:!0},r.data.time));f.collapse?r.$watch(function(){return u[0].className},function(){u.hasClass("in")&&h()}):h();!angular.isUndefined(r.onTimeChange())&&r.data.hasTimeSliders&&(r.$watch("data.time.from",c),r.$watch("data.time.to",c));var b=(r.maxRangeDate&&r.maxRangeDate-1||0)*864e5,l=r.data.date&&r.data.date.max&&r.data.date.max.getTime(),a=r.data.date&&r.data.date.min&&r.data.date.min.getTime();r.maxRangeDate&&r.data.hasDatePickers&&(r.$watch("data.date.from",v),r.$watch("data.date.to",v))},controller:function(){}}}]);
//# sourceMappingURL=range-picker.min.js.map
