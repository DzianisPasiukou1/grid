function nFormatter(n,t){for(var r=[{value:1e18,symbol:"E"},{value:1e15,symbol:"P"},{value:1e12,symbol:"T"},{value:1e9,symbol:"G"},{value:1e6,symbol:"M"},{value:1e3,symbol:"k"}],i=0;i<r.length;i++)if(n>=r[i].value)return(n/r[i].value).toFixed(t).replace(/\.?0+$/,"")+r[i].symbol;return n}function columnGenerator(n,t){var i=[],r,u;if(i.push({field:"details",displayName:"",cellTemplate:t+"grid-templates/cell-templates/fields/details.html",headerCellTemplate:t+"grid-templates/cell-templates/cell.html",sortable:!1,width:60,minWidth:60,isColumn:!0}),n[0]){for(r=0;r<n.length;r++)if(n[r].isColumn)return;for(u in n[0])i.push({field:u,displayName:u,headerCellTemplate:t+"grid-templates/cell-templates/cell.html",isColumn:!0})}return i.push({field:"action",displayName:"",cellTemplate:t+"grid-templates/cell-templates/fields/action.html",headerCellTemplate:t+"grid-templates/cell-templates/cell.html",sortable:!1,width:300,minWidth:150,isColumn:!0}),i}function columnsCompare(n,t){if(!Array.isArray(n)||!Array.isArray(t)||n.length!=t.length)return!1;for(var i=0;i<n.length;i++)if(n[i].field!=t[i].field)return!1;return!0}function convertFilterOptions(n){for(var i={filterText:""},t=0;t<n.length;t++)n[t].filter&&(i.filterText+=n[t].label+":"+n[t].filter+";");return i}function ngGridActionsPlugin(n,t){var i=this;i.grid=null;i.scope=null;i.opts=n;i.compile=t;i.init=function(n,t,r){var o,f;i.domUtilityService=r.DomUtilityService;i.grid=t;i.scope=n;o=function(){setTimeout(function(){i.grid.rowCache.forEach(function(n){n&&(n.actions=angular.copy(i.opts),n.actions.isCheck=!1,n.actions.setToggle=c,n.actions.setCheck=a,n.actions.copyRow=v,n.actions.deleteRow=y,n.actions.editRow=p,n.actions.historyRow=w,n.actions.history=[],n.actions.tab=2,n.actions.select=function(n){n.elm.addClass("selected");i.grid.rowCache.forEach(function(n){n.actions.isSelect&&(n.actions.isSelect=!1)});this.isSelect=!0},n.actions.values.options.callback===undefined&&(n.actions.values.options.callback=function(t){t.isEdit?n.actions.editRow(n):t.isCopy?n.actions.copyRow(n):t.isDelete?n.actions.deleteRow(n.entity,i.scope.data,n):t.isHistory&&n.actions.historyRow(n)}))});i.opts.contentOptions.checks.options.callback===undefined&&(i.opts.contentOptions.checks.options.callback=function(n){n&&(n.isAll?i.grid.rowCache.forEach(function(n){n.actions.isCheck=!0}):n.isNoOne?i.grid.rowCache.forEach(function(n){n.actions.isCheck=!1}):n.isMarked?i.grid.rowCache.forEach(function(){}):n.isNotMarked&&i.grid.rowCache.forEach(function(n){n.actions.isCheck=!n.actions.isCheck}))});i.scope.$apply()});i.scope.toggleRow&&(h(i.scope.toggleRow.clone,i.scope.detailsClass,u(i.scope.toggleRow.actions.detailsTemplate,i.scope.toggleRow.actions.detailsCondition,i.scope.toggleRow.entity,i.scope.toggleRow.rowIndex),i.scope.rowHeight,!0),i.scope.toggleRow=undefined);setTimeout(f,1)};f=function(){if(i.scope.toggleRow){var n=!1;for(idx in i.scope.renderedRows)i.scope.renderedRows[idx].orig.actions&&(i.scope.renderedRows[idx].orig.actions.isToggle?(i.scope.renderedRows[idx].elm.hasClass("toggle")||e(i.scope.renderedRows[idx],i.scope.rowHeight,i.scope.step,u(i.scope.toggleRow.actions.detailsTemplate,i.scope.toggleRow.actions.detailsCondition,i.scope.toggleRow.entity,i.scope.toggleRow.rowIndex)),n=!0):i.scope.renderedRows[idx].elm.removeClass("toggle"));n?i.grid.$canvas.css("height",i.scope.newCanvasHeight+"px"):($(".details-template").parent().removeClass("toggle"),$(".details-template").remove())}i.scope.catHashKeys=function(){var t="";for(var n in i.scope.renderedRows)t+=i.scope.renderedRows[n].$$hashKey,i.scope.renderedRows[n].orig.actions&&(i.scope.renderedRows[n].orig.actions.isSelect?(i.scope.renderedRows[n].elm.addClass("selected"),i.scope.renderedRows[n].orig.actions.values.isShow=!0):(i.scope.renderedRows[n].elm.removeClass("selected"),i.scope.renderedRows[n].orig.actions.values.isShow=!1));return t}};i.grid.$viewport.scroll(function(){var n=!1;for(idx in i.scope.renderedRows)i.scope.renderedRows[idx].orig.actions.isToggle?(i.scope.renderedRows[idx].elm.hasClass("toggle")||(idx!=i.scope.renderedRows.length-1,e(i.scope.renderedRows[idx],i.scope.rowHeight,i.scope.step,u(i.scope.toggleRow.actions.detailsTemplate,i.scope.toggleRow.actions.detailsCondition,i.scope.toggleRow.entity,i.scope.toggleRow.rowIndex))),n=!0):i.scope.renderedRows[idx].elm.removeClass("toggle");n?i.grid.$canvas.css("height",i.scope.newCanvasHeight+"px"):($(".details-template").parent().removeClass("toggle"),$(".details-template").remove())});var c=function(n,t,r){var e,f;if(t){if(i.scope.toggleRow){for(f=0;f<i.grid.rowCache.length;f++)if(angular.equals(i.grid.rowCache[f],i.scope.toggleRow)){e=i.grid.rowCache[f];break}s(e,i.scope.detailsClass,u(i.scope.toggleRow.actions.detailsTemplate,i.scope.toggleRow.actions.detailsCondition,i.scope.toggleRow.entity,i.scope.toggleRow.rowIndex),i.scope.rowHeight)}i.scope.toggleRow=n;i.scope.detailsClass=r;l(n.clone,i.scope.detailsClass,u(i.scope.toggleRow.actions.detailsTemplate,i.scope.toggleRow.actions.detailsCondition,i.scope.toggleRow.entity,i.scope.toggleRow.rowIndex),i.scope.rowHeight)}else h(n.clone,r,u(i.scope.toggleRow.actions.detailsTemplate,i.scope.toggleRow.actions.detailsCondition,i.scope.toggleRow.entity,i.scope.toggleRow.rowIndex),i.scope.rowHeight),i.scope.toggleRow=undefined},e=function(n,t,r,u){var r,e,s,o,f;if(u)if(r=r,u.substr(u.length-4)=="html")$.get(u,function(n){$(".details-template").remove();e=angular.element(n)}).fail(function(){$(".details-template").remove();e=angular.element(u)}).always(function(){var o,f,u;for(n.elm.append(e),i.compile(e)(i.scope),$(".details-template").css("top",t+"px"),n.elm.addClass("toggle"),o=Math.round(n.elm.position().top),f=$(n.elm).parent().children(),u=0;u<f.length;u++)parseInt($(f[u]).css("top").replace("px",""))>o&&($(f[u]).css("top",r+"px"),r+=t)});else for($(".details-template").remove(),e=angular.element(u),n.elm.append(e),i.compile(e)(i.scope),$(".details-template").css("top",t+"px"),n.elm.addClass("toggle"),s=Math.round(n.elm.position().top),o=$(n.elm).parent().children(),f=0;f<o.length;f++)parseInt($(o[f]).css("top").replace("px",""))>s&&($(o[f]).css("top",r+"px"),r+=t);else{n.elm.addClass("toggle");$(n.elm).css("height",n.elm.context.scrollHeight+"px");var s=Math.round(n.elm.position().top),o=$(n.elm).parent().children(),r=r;for(f=0;f<o.length;f++)parseInt($(o[f]).css("top").replace("px",""))>s&&($(o[f]).css("top",r+"px"),r+=t)}},l=function(n,t,r,u){var e,h,f;if(n.elm.addClass(t),n.isToggle=!0,r)if(r.substr(r.length-4)=="html")$.get(r,function(n){$(".details-template").remove();e=angular.element(n)}).fail(function(){$(".details-template").remove();e=angular.element(r)}).always(function(){var t,f;n.elm.append(e);i.compile(e)(i.scope);$(".details-template").css("top",n.elm.height()+"px");var s=Math.round(n.elm.position().top),r=$(n.elm).parent().children(),o=n.elm.position().top+n.elm.find(".details-template").height()+u;for(i.scope.step=o,i.canvasHeight=i.grid.$canvas.height(),i.grid.$canvas.css("height",i.canvasHeight+n.elm.context.scrollHeight+"px"),i.scope.newCanvasHeight=i.canvasHeight+n.elm.context.scrollHeight,$(n.elm).css("height",n.elm.context.scrollHeight+"px"),t=0;t<r.length;t++)if($(r[t]).css("top").replace("px","")==n.elm.position().top)for(f=t+1;f<r.length;f++)$(r[f]).css("top",o+"px"),o+=u});else{$(".details-template").remove();e=angular.element(r);n.elm.append(e);i.compile(e)(i.scope);$(".details-template").css("top",n.elm.height()+"px");var c=Math.round(n.elm.position().top),o=$(n.elm).parent().children(),s=n.elm.position().top+n.elm.find(".details-template").height()+u;for(i.scope.step=s,i.canvasHeight=i.grid.$canvas.height(),i.grid.$canvas.css("height",i.canvasHeight+n.elm.context.scrollHeight+"px"),i.scope.newCanvasHeight=i.canvasHeight+n.elm.context.scrollHeight,$(n.elm).css("height",n.elm.context.scrollHeight+"px"),f=0;f<o.length;f++)if($(o[f]).css("top").replace("px","")==n.elm.position().top)for(h=f+1;h<o.length;h++)$(o[h]).css("top",s+"px"),s+=u}else{var c=Math.round(n.elm.position().top),o=$(n.elm).parent().children(),s=n.elm.position().top+n.elm.context.scrollHeight;for(i.scope.step=s,i.canvasHeight=i.grid.$canvas.height(),i.grid.$canvas.css("height",i.canvasHeight+n.elm.context.scrollHeight+"px"),i.scope.newCanvasHeight=i.canvasHeight+n.elm.context.scrollHeight,$(n.elm).css("height",n.elm.context.scrollHeight+"px"),f=0;f<o.length;f++)parseInt($(o[f]).css("top").replace("px",""))>c&&($(o[f]).css("top",s+"px"),s+=u);i.scope.toggleElm=n.elm.clone()}},s=function(n,t,r,u,f){var e;u===undefined&&(u=60);n.clone.elm.removeClass("toggle");$(".details-template").remove();n.actions.isToggle=!1;i.grid.$canvas.css("height",i.canvasHeight+"px");i.scope.newCanvasHeight=i.canvasHeight;var h=Math.round(n.clone.elm.position().top),o=$(n.clone.elm).parent().children(),s=n.clone.elm.position().top+u;for($(n.clone.elm).css("height",u+"px"),e=0;e<o.length;e++)parseInt($(o[e]).css("top").replace("px",""))>h&&($(o[e]).css("top",s+"px"),s+=u);f&&(i.scope.toggleRow=undefined)},h=function(n,t,r,u,f){var e;n.elm.removeClass("toggle");$(".details-template").remove();n.orig.actions.isToggle=!1;i.grid.$canvas.css("height",i.canvasHeight+"px");i.scope.newCanvasHeight=i.canvasHeight;var h=Math.round(n.elm.position().top),o=$(n.elm).parent().children(),s=n.elm.position().top+u;for($(n.elm).css("height",u+"px"),e=0;e<o.length;e++)parseInt($(o[e]).css("top").replace("px",""))>h&&($(o[e]).css("top",s+"px"),s+=u);f&&(i.scope.toggleRow=undefined)},a=function(n){n.actions.onCheck(i.grid.rowCache)},u=function(n,t,i,r){return t!==undefined&&t(i,r)!==undefined&&(n=t(i,r)),n},v=function(n){var i=JSON.stringify(n.entity),t;if(window.clipboardData&&clipboardData.setData)clipboardData.setData("text",i),$.cursorMessage&&$.cursorMessage("Row is copied to clipboard.");else{$(n.clone.elm).append('<input id="holdtext" style="display: none"/>');t=$("#holdtext");t.val(i);t.select();try{document.execCommand("copy");$.cursorMessage&&$.cursorMessage("Row is copied to clipboard.")}catch(r){$.cursorMessage&&$.cursorMessage("Copied ended with error.",{backgroundColor:"rgb(143, 59, 59)"})}finally{t.remove("#holdtext")}}},y=function(n,t){for(var u,r=0;r<i.grid.rowCache.length;r++)if(i.grid.rowCache[r].entity==n){i.grid.rowCache.splice(r,1);break}for(u=!1,r=0;r<i.scope.renderedRows.length;r++){if(i.scope.renderedRows[r].entity==n){i.scope.renderedRows.splice(r,1);break}i.scope.toggleRow&&i.scope.renderedRows[r].entity==i.scope.toggleRow.entity&&(u=!0)}i.grid.setRenderedRows(i.scope.renderedRows);t.splice(t.indexOf(n),1);i.scope.toggleRow&&(i.scope.toggleRow.entity==n?s(i.scope.toggleRow,"toggle",i.scope.toggleRow.actions.detailsTemplate,i.scope.rowHeight,!0):u||(i.scope.step-=60,e(i.scope.toggleRow.clone,i.scope.rowHeight,i.scope.step,i.scope.toggleRow.actions.detailsTemplate)))},p=function(n){$("modal").length!=0&&$("modal").remove();i.scope.rowEditing=n;$("body").append('<modal value="rowEditing"><\/modal>');var t=$("modal");i.compile(t)(i.scope)},w=function(n){$("history").length!=0&&$("history").remove();i.scope.rowHistoried=n;$("body").append('<history value="rowHistoried.actions.history"><\/history>');var t=$("history");i.compile(t)(i.scope)};i.scope.$watch("catHashKeys()",f);i.scope.$watch(i.grid.config.data,o)};i.refreshOpt=function(n){i.opts=n};i.refreshCallback=function(){i.opts.contentOptions.checks.options.callback=function(n){n&&(n.isAll?i.grid.rowCache.forEach(function(n){n.actions.isCheck=!0}):n.isNoOne?i.grid.rowCache.forEach(function(n){n.actions.isCheck=!1}):n.isMarked?i.grid.rowCache.forEach(function(){}):n.isNotMarked&&i.grid.rowCache.forEach(function(n){n.actions.isCheck=!n.actions.isCheck}))}}}function ngGridCsvExportPlugin(n){var t=this;t.grid=null;t.scope=null;t.init=function(i,r){function u(){function c(n){return n==null?"":typeof n=="number"?""+n:typeof n=="boolean"?n?"TRUE":"FALSE":typeof n=="string"?n.replace(/"/g,'""'):JSON.stringify(n).replace(/"/g,'""')}function l(n){var t=n.substr(0,n.length-1);return t+"\n"}var t=[],h,i,u,e,o,a,v,s,f;for(h in r.config.columnDefs)t.push(r.config.columnDefs[h].field);i="";for(u in t)i+='"'+c(t[u])+'",';i=l(i);e=r.data;for(o in e){for(u in t)a=n!=null&&n.columnOverrides!=null&&n.columnOverrides[t[u]]!=null?n.columnOverrides[t[u]](e[o][t[u]]):e[o][t[u]],i+='"'+c(a)+'",';i=l(i)}v=r.$root.find(".ngFooterPanel");s=r.$root.find(".ngFooterPanel .csv-data-link-span");s!=null&&s.remove();f='<span class="csv-data-link-span">';f+='<br><a href="data:text/csv;charset=UTF-8,';f+=encodeURIComponent(i);f+='" download="Export.csv">CSV Export<\/a><\/br><\/span>';v.append(f)}t.grid=r;t.scope=i;setTimeout(u,0);i.catHashKeys=function(){var n="";for(var t in i.renderedRows)n+=i.renderedRows[t].$$hashKey;return n};i.$watch("catHashKeys()",u)}}function ngGridFlexibleHeightPlugin(n){var t=this;t.grid=null;t.scope=null;t.init=function(i,r,u){t.domUtilityService=u.DomUtilityService;t.grid=r;t.scope=i;var e=function(){setTimeout(f,1)},f=function(){var f=t.grid.gridId,e="."+f+" .ngFooterPanel",r=t.grid.$topPanel.height()+$(e).height(),u,i;console.log("extra="+r);u=t.grid.$canvas.height()+1;n!=null&&n.minHeight!=null&&u+r<n.minHeight&&(u=n.minHeight-r-2);i=u+2;t.scope.baseViewportHeight&&t.scope.baseViewportHeight===i||(t.grid.$viewport.css("height",i+"px"),console.log("resetting height to "+(i+r)),t.grid.$root.css("height",i+r+"px"),t.scope.baseViewportHeight=i,t.domUtilityService.UpdateGridLayout(t.scope,t.grid));t.grid.$root.css("height","600px")};t.scope.catHashKeys=function(){var n="";for(var i in t.scope.renderedRows)n+=t.scope.renderedRows[i].$$hashKey;return n};t.scope.$watch("catHashKeys()",f);t.scope.$watch(t.grid.config.data,e)}}angular.module("gridTaskApp",["ngGrid","ui.grid","ui.grid.selection","ui.grid.expandable"]).value("templatesPath","app/templates/");angular.module("gridTaskApp").constant("classes",{menuDown:"icon-menu-down",menuUp:"icon-menu-up"});angular.module("gridTaskApp").constant("content",{checks:{options:{actions:{all:{label:"All",isAll:!0},noOne:{label:"No one",isNoOne:!0},marked:{label:"Marked",isMarked:!0},notMarked:{label:"Not marked",isNotMarked:!0}}}},mores:{options:{label:"More",values:[{label:"View reports"}],isMenu:!0}},exports:{options:{label:"Export to: ",values:[{label:"Excel",isExcel:!0},{label:"Pdf",isPdf:!0}],callback:function(){}}},views:{options:{label:"View: ",values:[{label:"Ng Grid",isGrid:!0,isTiles:!1},{label:"Tiles",isGrid:!1,isTiles:!0},{label:"UI Grid",isUiGrid:!0}],callback:function(){}}},listSelector:".page-content__list",loadingTemplate:'<loading ng-show="contentOptions.isLoading"><\/loading>',gridName:"Default grid",rowTemplate:"grid-templates/row-templates/row-with-detalis.html",rowHeight:60,headerRowHeight:40,showFooter:!0,footerRowHeight:30,footerTemplate:"grid-templates/grid-footer.html",rowActions:{options:{label:"Actions",values:[{label:"Edit",isEdit:!0,priority:4},{label:"Copy",isCopy:!0,priority:3},{label:"History",isHistory:!0,priority:2},{label:"Delete",isDelete:!0,priority:1}],isMenu:!0},isShow:!1},detailsTemplate:"grid-templates/details-templates/details.html",rowCheckAction:function(n){var t=n.filter(function(n){if(n.actions.isCheck)return!0});this.contentOptions.checks.options.selected=t.length==0?this.contentOptions.checks.options.actions.noOne:t.length==n.length?this.contentOptions.checks.options.actions.all:this.contentOptions.checks.options.actions.marked},filterOptions:function(n){var i=[],t;if(Array.isArray(n)&&n[0])for(t in n[0])t!="$$hashKey"&&i.push({label:t,isColumn:!0});return i},searchOptions:function(n){var t=[],i;if(t.push({label:"everywhere",isEverywhere:!0}),Array.isArray(n)&&n[0])for(i in n[0])i!="$$hashKey"&&t.push({label:i,isColumn:!0});return t}});angular.module("gridTaskApp").constant("constantOfData",{count:100,startDate:new Date(2e3,1,1)});angular.module("gridTaskApp").controller("cardsCtrl",["$scope",function(){}]);angular.module("gridTaskApp").directive("cards",["templatesPath","$timeout",function(n,t){return{restrict:"A",templateUrl:n+"directive-templates/cards.html",scope:{cards:"=",startDate:"=",endDate:"="},controller:"cardsCtrl",link:function(){t(function(){$("#card1").flip();$("#card2").flip();$("#card3").flip();$("#card4").flip();$("#card5").flip();$("#card6").flip();$("#card7").flip()})}}}]);angular.module("gridTaskApp").controller("checkboxSelectCtrl",["$scope","classes",function(n,t){n.options.showClass||(n.options.showClass=t.menuUp);n.options.hideClass||(n.options.hideClass=t.menuDown);n.options.selected===undefined&&(n.options.selected={});n.select=function(t){n.isShow=!1;n.options.selected=t;n.options.selected.check=t.isAll?!0:!1;n.options.callback&&n.options.callback(t)};n.toggle=function(){n.isShow=!n.isShow};n.checked=function(t){t?(n.options.selected=n.options.actions.all,n.options.selected===undefined&&(n.options.selected={}),n.options.selected.check=!0):(n.options.selected=n.options.actions.noOne,n.options.selected===undefined&&(n.options.selected={}),n.options.selected.check=!1);n.options.callback&&n.options.callback(n.options.selected);n.isShow=!1;setTimeout(function(){n.$apply()})}}]);angular.module("gridTaskApp").directive("checkboxSelect",["templatesPath",function(n){return{restrict:"E",scope:{options:"="},templateUrl:n+"directive-templates/checkbox-select.html",controller:"checkboxSelectCtrl",link:function(n,t){t.find(".checkbox-select__expand").addClass(n.options.hideClass);n.$watch("isShow",function(i){i?(t.find(".checkbox-select__expand").removeClass(n.options.hideClass),t.find(".checkbox-select__expand").addClass(n.options.showClass),t.find(".checkbox-select__btn").addClass("opened")):(t.find(".checkbox-select__expand").addClass(n.options.hideClass),t.find(".checkbox-select__expand").removeClass(n.options.showClass),t.find(".checkbox-select__btn").removeClass("opened"))});$(document).click(function(i){$(i.target).closest(t).length||(n.isShow=!1,t.find(".checkbox-select__expand").addClass(n.options.hideClass),t.find(".checkbox-select__expand").removeClass(n.options.showClass),t.find("checkbox-select__btn").removeClass("opened"))});n.$watch("options.selected",function(n){n&&(n.isMarked||n.isNotMarked?t.find(".checkbox-select__input-control__span").addClass("marked"):t.find(".checkbox-select__input-control__span").removeClass("marked"),n.check=n.isAll?!0:!1)})}}}]);angular.module("gridTaskApp").directive("customDatepicker",["templatesPath","classes",function(n,t){return{restrict:"E",templateUrl:n+"directive-templates/custom-datepicker.html",link:function(n,i){i.find(".expand").addClass(t.menuDown);n.config={singleMonth:!0,showShortcuts:!1,showTopbar:!1};$(i.find(".date-btn__toggle")).dateRangePicker(n.config).bind("datepicker-change",function(t,i){n.startDate=i.date1;n.endDate=i.date2;n.$apply()}).bind("datepicker-close",function(){n.isShow=!1;i.find(".expand").addClass(t.menuDown);i.find(".expand").removeClass(t.menuUp);i.find(".date-btn__toggle").removeClass("opened")});n.toggle=function(){n.isShow=!n.isShow;n.isShow?(i.find(".expand").removeClass(t.menuDown),i.find(".expand").addClass(t.menuUp),i.find(".date-btn__toggle").addClass("opened"),$(i.find(".date-btn__toggle")).data("dateRangePicker").open()):(i.find(".expand").addClass(t.menuDown),i.find(".expand").removeClass(t.menuUp),i.find(".date-btn__toggle").removeClass("opened"),$(i.find(".date-btn__toggle")).data("dateRangePicker").close())};n.close=function(){n.isShow=!1;$(i.find(".date-btn__toggle")).data("dateRangePicker").close();i.find(".expand").addClass(t.menuDown);i.find(".expand").removeClass(t.menuUp);i.find(".date-btn__toggle").removeClass("opened")}}}}]);angular.module("gridTaskApp").controller("customGridCtrl",["$scope","templatesPath",function(){}]);angular.module("gridTaskApp").directive("customGrid",["templatesPath",function(n){return{restrict:"E",controller:"customGridCtrl",scope:{data:"=gridData",exportTo:"=",options:"=gridOptions"},templateUrl:n+"directive-templates/custom-grid.html",link:function(){}}}]);angular.module("gridTaskApp").controller("gridMenuCtrl",["$scope",function(n){n.options={isMenu:!0,label:"",values:[],isCheckbox:!0,onCheck:function(t,i){n.columns[i].toggleVisible();n.resize(t)},withSave:!1,onSave:function(){},callback:function(){}}}]);angular.module("gridTaskApp").directive("gridMenu",["templatesPath",function(n){return{restrict:"E",templateUrl:n+"directive-templates/grid-menu.html",controller:"gridMenuCtrl",link:function(n){n.$watch("columns",function(t){var r,i;if(Array.isArray(t)&&t.length>0){if(n.colCache=[],n.options.values=[],r=t.reduce(function(n,t){return n+t.minWidth},0),$(window).width()<r)for(i=t.length-2;i>1;i--)if(t[i].visible&&(t[i].toggleVisible(),r-=t[i].minWidth,n.colCache.push({label:t[i].field,element:t[i]})),$(window).width()>r)break;for((n.colCache.length>0||n.$parent.options.showResponsMenu)&&(n.isShow=!0),i=0;i<t.length;i++)n.options.values.push({label:t[i].field,element:t[i],isVisible:t[i].visible});$(window).resize(function(){var u=t.reduce(function(n,t){return t.visible?n+t.minWidth:n},0),f,r,i;if($(window).width()<u){for(i=t.length-2;i>1;i--)if(t[i].visible&&(t[i].toggleVisible(),u-=t[i].minWidth,n.colCache.push({label:t[i].field,element:t[i]})),$(window).width()>u)break}else for(i=0;i<t.length;i++)if(!t[i].visible){for(t[i].toggleVisible(),u+=t[i].minWidth,r=0;r<n.colCache.length;r++)n.colCache[r].label==t[i].field&&n.colCache.splice(r,1);if($(window).width()<u){for(t[i].toggleVisible(),u-=t[i].minWidth,f=!1,r=0;r<n.colCache.length;r++)n.colCache[r].label==t[i].field&&(f=!0);if(f)for(n.colCache=[],r=0;r<t.length;r++)t[r].visible||n.colCache.push({label:t[r].field,element:t[r]});else n.colCache.push({label:t[i].field,element:t[i]});break}}for(n.options.values=[],i=0;i<t.length;i++)n.options.values.push({label:t[i].field,element:t[i],isVisible:t[i].visible});n.isShow=n.colCache.length>0||n.$parent.options.showResponsMenu?!0:!1})}});n.resize=function(t){for(var r=n.columns.reduce(function(n,t){return t.visible?n+t.minWidth:n},0),i=0;i<n.colCache.length;i++)n.colCache[i].label==t.label&&n.colCache.splice(i,1);$(window).width()<r?$(".page-content").css("minWidth",r+"px"):$(".page-content").css("minWidth","500px")}}}}]);angular.module("gridTaskApp").directive("rowCheck",[function(){return{restrict:"A",scope:{value:"=rowCheck"},link:function(n,t){n.$watch("value.orig.actions.isCheck",function(n){n?t.parent().addClass("checked"):t.parent().removeClass("checked")})}}}]);angular.module("gridTaskApp").controller("customUiGridCtrl",["$scope","templatesPath","$compile","$interval",function(n,t,i){n.opt2={data:"data",rowHeight:60,showGridFooter:!0,enableColumnMenus:!1,enableRowSelection:!0,enableGridMenu:!0,multiSelect:!1,modifierKeysToMultiSelect:!1,noUnselect:!0,enableExpandable:!0,enableRowHeaderSelection:!1,expandableRowTemplate:t+"grid-templates/details-templates/details.html",expandableRowHeight:220,selectionRowHeaderWidth:35,enableExpandableRowHeader:!1,enableFiltering:!0,rowTemplate:t+"ui-grid-templates/row.html",expandableRowScope:{subGridVariable:"subGridScopeVariable"},onRegisterApi:function(t){n.gridApi=t;t.core.on.rowsRendered(n,function(){n.gridApi.grid.rows.forEach(function(t){t.actions=angular.copy(n.options.rowActions);t.actions.tab=2;t.actions.expand=function(){n.gridApi.expandable.toggleRowExpansion(t.entity)};t.actions.setCheck=function(){var t=n.gridApi.grid.rows,i=t.filter(function(n){if(n.isCheck)return!0});n.contentOptions.checks.options.selected=i.length==0?n.contentOptions.checks.options.actions.noOne:i.length==t.length?n.contentOptions.checks.options.actions.all:n.contentOptions.checks.options.actions.marked;n.gridApi.grid.refresh()};t.actions.copyRow=r;t.actions.deleteRow=u;t.actions.editRow=f;t.actions.historyRow=e;t.actions.history=[];t.actions.options.callback=function(i){i.isEdit?t.actions.editRow(t):i.isCopy?t.actions.copyRow(t):i.isDelete?t.actions.deleteRow(t.entity,n.data,t):i.isHistory&&t.actions.historyRow(t)}})});n.gridApi.grid.registerRowsProcessor(n.singleFilter,200);t.selection.on.rowSelectionChanged(n,function(n){var t="row selected "+n.isSelected;console.log(t)});t.expandable.on.rowExpandedStateChanged(n,function(t){t.isExpanded&&n.gridApi.grid.rows.forEach(function(n){n.isExpanded&&t.entity!=n.entity&&n.actions.expand()})});n.contentOptions.checks.options.callback=function(t){t&&(t.isAll?n.gridApi.grid.rows.forEach(function(n){n.isCheck=!0}):t.isNoOne?n.gridApi.grid.rows.forEach(function(n){n.isCheck=!1}):t.isMarked?n.gridApi.grid.rows.forEach(function(){}):t.isNotMarked&&n.gridApi.grid.rows.forEach(function(n){n.isCheck=!n.isCheck}))}},gridFooterTemplate:'<div class="grid-footer"><\/div>',headerTemplate:t+"ui-grid-templates/header.html"};n.singleFilter=function(t){var i=n.options.filterOptions.filterText.split(";"),u,r;if(i.length==1&&i[0].indexOf(":")==-1)u=new RegExp(n.options.filterOptions.filterText),t.forEach(function(t){var i=!1;n.opt2.columnDefs.forEach(function(n){t.entity[n.field]!==undefined&&t.entity[n.field].toString().match(u)&&(i=!0)});i||(t.visible=!1)});else for(r=0;r<i.length;r++){if(i[r]=="")break;var f=i[r].substr(0,i[r].indexOf(":")),e=i[r].substr(i[r].indexOf(":")+1),u=new RegExp(e);t.forEach(function(t){var i=!1;n.opt2.columnDefs.forEach(function(){t.entity[f]!==undefined&&t.entity[f].toString().match(u)&&(i=!0)});i||(t.visible=!1)})}return t};n.rowChangedClass=function(n){return n};n.$watch("options.filterOptions.filterText",function(){n.gridApi.grid.refresh()});var r=function(n){var i=JSON.stringify(n.entity),t;if(window.clipboardData&&clipboardData.setData)clipboardData.setData("text",i),$.cursorMessage&&$.cursorMessage("Row is copied to clipboard.");else{$("body").append('<input id="holdtext" style="display: none"/>');t=$("#holdtext");t.val(i);t.select();try{document.execCommand("copy");$.cursorMessage&&$.cursorMessage("Row is copied to clipboard.")}catch(r){$.cursorMessage&&$.cursorMessage("Copied ended with error.",{backgroundColor:"rgb(143, 59, 59)"})}finally{t.remove("#holdtext")}}},u=function(n,t){t.splice(t.indexOf(n),1)},f=function(t){$("modal").length!=0&&$("modal").remove();n.editingRow=t;$("body").append('<modal value="editingRow"><\/modal>');var r=$("modal");i(r)(n)},e=function(t){$("history").length!=0&&$("history").remove();n.historiedRow=t;$("body").append('<history value="historiedRow.actions.history"><\/history>');var r=$("history");i(r)(n)};n.$watch("data",function(i){var r=[],u,f;if(r.push({field:"details",displayName:"",headerCellTemplate:t+"ui-grid-templates/cell-templates/header.html",cellTemplate:t+"ui-grid-templates/cell-templates/details.html",enableSorting:!1,width:60,minWidth:60,enableFiltering:!1,cellClass:function(n,t){return t.isChecked?"checked":t.isExpanded?"expanded":void 0}}),i[0]){for(u=0;u<i.length;u++)if(i[u].isColumn)return;for(f in i[0])f!="$$hashKey"&&r.push({field:f,displayName:f,enableFiltering:!1,minWidth:80,cellClass:function(n,t){return t.isChecked?"checked":t.isExpanded?"expanded":void 0}})}r.push({field:"action",displayName:"",cellTemplate:t+"ui-grid-templates/cell-templates/action.html",headerCellTemplate:t+"ui-grid-templates/cell-templates/header.html",enableSorting:!1,width:250,minWidth:115,enableFiltering:!1,cellClass:function(n,t){return t.isChecked?"checked":t.isExpanded?"expanded":void 0}});n.opt2.columnDefs=r})}]);angular.module("gridTaskApp").directive("customUiGrid",["templatesPath",function(n){return{restrict:"E",scope:{data:"=gridData",options:"=gridOptions",contentOptions:"="},controller:"customUiGridCtrl",templateUrl:n+"directive-templates/custom-ui-grid.html",link:function(){}}}]);angular.module("gridTaskApp").directive("uiGridCustomMenu",["$timeout","uiGridGridMenuService",function(n,t){return{restrict:"A",link:function(i){var r={};r.scope=i;r.uiGridGridMenuService=t;n(function(){var t=this.scope.gridApi.grid.columns.reduce(function(n,t){return n+t.minWidth},0),n;if($(window).width()<t)for(n=this.scope.gridApi.grid.columns.length-2;n>1;n--)if(this.scope.gridApi.grid.columns[n].visible&&(this.uiGridGridMenuService.toggleColumnVisibility(this.scope.gridApi.grid.columns[n]),t-=this.scope.gridApi.grid.columns[n].minWidth),$(window).width()>t)break;$(window).resize(function(){var t=this.scope.gridApi.grid.columns.reduce(function(n,t){return t.visible?n+t.minWidth:n},0),n;if($(window).width()<t){for(n=this.scope.gridApi.grid.columns.length-2;n>1;n--)if(this.scope.gridApi.grid.columns[n].visible&&(this.uiGridGridMenuService.toggleColumnVisibility(this.scope.gridApi.grid.columns[n]),t-=this.scope.gridApi.grid.columns[n].minWidth),$(window).width()>t)break}else for(n=0;n<this.scope.gridApi.grid.columns.length;n++)if(!this.scope.gridApi.grid.columns[n].visible){if($(window).width()<t+this.scope.gridApi.grid.columns[n].minWidth)break;this.uiGridGridMenuService.toggleColumnVisibility(this.scope.gridApi.grid.columns[n]);t+=this.scope.gridApi.grid.columns[n].minWidth}}.bind(this))}.bind(r))}}}]);angular.module("gridTaskApp").directive("details",["$compile","$timeout",function(){return{restict:"A",scope:{row:"=",detailsClass:"="},link:function(n,t){t.click(function(){n.row.orig.actions.isToggle=!n.row.orig.actions.isToggle;n.row.orig.actions.setToggle(n.row.orig,n.row.orig.actions.isToggle,n.detailsClass)})}}}]);angular.module("gridTaskApp").controller("dropdownCtrl",["$scope","classes",function(n,t){n.options.showClass||(n.options.showClass=t.menuUp);n.options.hideClass||(n.options.hideClass=t.menuDown);n.options.isMenu?n.options.selected={}:(n.options.selected=n.options.values[0],n.options.callback&&n.options.callback(n.options.selected));n.select=function(t){n.options.selected=t;n.options.callback&&n.options.callback(t)}}]);angular.module("gridTaskApp").directive("dropdown",["templatesPath",function(n){return{restrict:"E",scope:{options:"=dropdownOptions"},controller:"dropdownCtrl",templateUrl:n+"directive-templates/dropdown.html",link:function(n,t){t.find("ul").hide();t.find(".my-dropdown__expand").addClass(n.options.hideClass);t.click(function(){t.find("ul").is(":visible")?(t.find("ul").hide(),t.find(".my-dropdown__expand").addClass(n.options.hideClass),t.find(".my-dropdown__expand").removeClass(n.options.showClass),t.find(".my-dropdown__btn").removeClass("opened")):(t.find("ul").show(),t.find(".my-dropdown__expand").removeClass(n.options.hideClass),t.find(".my-dropdown__expand").addClass(n.options.showClass),t.find(".my-dropdown__btn").addClass("opened"))});$(document).click(function(i){t.find("ul").is(":visible")&&($(i.target).closest(t).length||(t.find("ul").hide(),t.find(".my-dropdown__expand").addClass(n.options.hideClass),t.find(".my-dropdown__expand").removeClass(n.options.showClass),t.find(".my-dropdown__btn").removeClass("opened")))})}}}]);angular.module("gridTaskApp").directive("dynamicDropdown",["templatesPath","$compile","$timeout",function(n){return{restrict:"A",scope:{origOpt:"=",dropdownOpt:"=",col:"=",row:"=",reInit:"=",toResize:"="},templateUrl:n+"grid-templates/dynamic-actions.html",link:function(n,t){var r=function(){for(var i=0;i<n.dynamicOpt.values.length;i++)if(!n.dynamicOpt.values[i].isVisible)if(n.totalWidth+=n.dynamicOpt.values[i].width,n.totalWidth+n.offset.left>$("body").prop("scrollWidth")){n.totalWidth-=n.dynamicOpt.values[i].width;break}else n.dynamicOpt.values[i].toggleVisible(!0);if(n.$apply(),n.dropdownOpt.isVisible)for(n.dropdownOpt.width===undefined&&(n.dropdownOpt.width=t.parent().find("dropdown").width()),n.totalWidth+=n.dropdownOpt.width,i=0;i<n.dynamicOpt.values.length;i++)n.dynamicOpt.values[i].isVisible?n.dropdownOpt.values.splice(n.dropdownOpt.values.indexOf(n.dynamicOpt.values[i]),1):n.dropdownOpt.values.indexOf(n.dynamicOpt.values[i])==-1&&n.dropdownOpt.values.push(n.dynamicOpt.values[i]);else n.totalWidth-=n.dropdownOpt.width;if(n.totalWidth+n.offset.left>$("body").prop("scrollWidth")){for(i=n.dynamicOpt.values.length-1;i>-1;i--)if(n.dynamicOpt.values[i].isVisible&&(n.dynamicOpt.values[i].toggleVisible(!1),n.totalWidth-=n.dynamicOpt.values[i].width,n.totalWidth+n.offset.left<$("body").prop("scrollWidth")))break;for(i=0;i<n.dynamicOpt.values.length;i++)n.dynamicOpt.values[i].isVisible?n.dropdownOpt.values.splice(n.dropdownOpt.values.indexOf(n.dynamicOpt.values[i]),1):n.dropdownOpt.values.indexOf(n.dynamicOpt.values[i])==-1&&n.dropdownOpt.values.push(n.dynamicOpt.values[i])}},u=function(){for(var i=n.dynamicOpt.values.length-1;i>-1;i--)if(n.dynamicOpt.values[i].isVisible&&(n.dynamicOpt.values[i].toggleVisible(!1),n.totalWidth-=n.dynamicOpt.values[i].width,n.totalWidth+n.offset.left<$("body").prop("scrollWidth")))break;if(n.$apply(),n.dropdownOpt.isVisible)for(n.dropdownOpt.width===undefined&&(n.dropdownOpt.width=t.parent().find("dropdown").width()),n.totalWidth+=n.dropdownOpt.width,i=0;i<n.dynamicOpt.values.length;i++)n.dynamicOpt.values[i].isVisible?n.dropdownOpt.values.splice(n.dropdownOpt.values.indexOf(n.dynamicOpt.values[i]),1):n.dropdownOpt.values.indexOf(n.dynamicOpt.values[i])==-1&&n.dropdownOpt.values.push(n.dynamicOpt.values[i]);else n.totalWidth-=n.dropdownOpt.width;if(n.totalWidth+n.offset.left>$("body").prop("scrollWidth")){for(i=n.dynamicOpt.values.length-1;i>-1;i--)if(n.dynamicOpt.values[i].isVisible&&(n.dynamicOpt.values[i].toggleVisible(!1),n.totalWidth-=n.dynamicOpt.values[i].width,n.totalWidth+n.offset.left<$("body").prop("scrollWidth")))break;for(i=0;i<n.dynamicOpt.values.length;i++)n.dynamicOpt.values[i].isVisible?n.dropdownOpt.values.splice(n.dropdownOpt.values.indexOf(n.dynamicOpt.values[i]),1):n.dropdownOpt.values.indexOf(n.dynamicOpt.values[i])==-1&&n.dropdownOpt.values.push(n.dynamicOpt.values[i])}},i;for(n.dynamicOpt=angular.copy(n.origOpt),n.dropdownOpt=angular.copy(n.origOpt),n.dropdownOpt.values=[],n.dropdownOpt.style={"z-index":"-1"},n.dropdownOpt.isVisible=!0,i=0;i<n.dynamicOpt.values.length;i++)n.dynamicOpt.values[i].isVisible=!0,n.dynamicOpt.values[i].toggleVisible=function(n){this.isVisible=n};n.$watch("toResize",function(n){n});n.$on("ngRepeatFinished",function(){var f,i;for(n.totalWidth=20,n.offset=t.parent().offset(),i=0;i<n.dynamicOpt.values.length;i++)n.dynamicOpt.values[i].width=t.find("."+n.dynamicOpt.values[i].label).width(),n.totalWidth+=n.dynamicOpt.values[i].width;for(n.totalWidth+n.offset.left<$("body").prop("scrollWidth")?r():u(),f=0,i=0;i<n.dynamicOpt.values.length;i++)n.dynamicOpt.values[i].isVisible&&(f+=1,f>2&&(f-=1,n.dynamicOpt.values[i].toggleVisible(!1)));n.dropdownOpt.label=f>0?"More":"Actions";n.dropdownOpt.style={"z-index":"9"}});$(window).resize(function(){var r,i;for(t.parent().offset().left!=0&&(n.offset=t.parent().offset()),n.totalWidth=20,i=0;i<n.dynamicOpt.values.length;i++)n.dynamicOpt.values[i].isVisible&&(n.totalWidth+=n.dynamicOpt.values[i].width);if(n.dropdownOpt.isVisible&&(n.totalWidth+=n.dropdownOpt.width),n.totalWidth+n.offset.left<$("body").prop("scrollWidth")){for(n.dynamicOpt.values.sort(function(n,t){return n.priority>t.priority?-1:n.priority<t.priority?1:0}),r=0,i=0;i<n.dynamicOpt.values.length;i++)if(n.dynamicOpt.values[i].isVisible&&(n.totalWidth-=n.dynamicOpt.values[i].width,n.dynamicOpt.values[i].toggleVisible(!1)),n.totalWidth+n.offset.left+n.dynamicOpt.values[i].width<$("body").prop("scrollWidth")&&(n.totalWidth+=n.dynamicOpt.values[i].width,n.dynamicOpt.values[i].toggleVisible(!0),r+=1),r==2)break;n.dropdownOpt.label=r>0?"More":"Actions"}else{for(n.dynamicOpt.values.sort(function(n,t){return n.priority>t.priority?1:n.priority<t.priority?-1:0}),r=0,i=0;i<n.dynamicOpt.values.length;i++)if(n.dynamicOpt.values[i].isVisible&&(n.totalWidth-=n.dynamicOpt.values[i].width,n.dynamicOpt.values[i].toggleVisible(!1)),n.totalWidth+n.offset.left+n.dynamicOpt.values[i].width<$("body").prop("scrollWidth")&&(n.totalWidth+=n.dynamicOpt.values[i].width,n.dynamicOpt.values[i].toggleVisible(!0),r+=1),r==2)break;n.dropdownOpt.label=r>0?"More":"Actions"}for(n.dropdownOpt.values=[],i=0;i<n.dynamicOpt.values.length;i++)n.dynamicOpt.values[i].isVisible||n.dropdownOpt.values.push(n.dynamicOpt.values[i]);n.$apply()})}}}]);angular.module("gridTaskApp").controller("filterCtrl",["$scope",function(n){n.listState=!1;n.filterClick=function(){n.listState=!n.listState;n.listState&&n.filterOptions.forEach(function(n){n.filter=""})};n.showRecords=function(){n.listState=!1;n.filtrate(n.filterOptions)}}]);angular.module("gridTaskApp").directive("filter",["templatesPath","classes",function(n,t){return{restrict:"E",scope:{listState:"=",filterOptions:"=options",filtrate:"="},controller:"filterCtrl",templateUrl:n+"directive-templates/filter.html",link:function(n,i){$(document).click(function(t){$(t.target).closest(i).length||(n.listState=!1,n.$apply())});i.find("span.expand").addClass(t.menuDown);n.$watch("listState",function(n){n?(i.find("filter-list").resize(),i.addClass("filter-selected"),i.find("span.expand").removeClass(t.menuDown),i.find("span.expand").addClass(t.menuUp)):(i.removeClass("filter-selected"),i.find("span.expand").addClass(t.menuDown),i.find("span.expand").removeClass(t.menuUp))})}}}]);angular.module("gridTaskApp").controller("filterListCtrl",["$scope",function(n){n.filter=function(){n.isFiltrate=!0}}]);angular.module("gridTaskApp").directive("filterList",["templatesPath",function(n){return{restrict:"E",templateUrl:n+"directive-templates/filter-list.html",controller:"filterListCtrl",link:function(){}}}]);angular.module("gridTaskApp").directive("graphs",["templatesPath",function(n){return{restrict:"A",scope:{graphs:"="},templateUrl:n+"directive-templates/graphs.html",link:function(){}}}]);angular.module("gridTaskApp").controller("historyCtrl",["$scope",function(n){n.isModal=!0;n.close=function(){n.isModal=!1}}]);angular.module("gridTaskApp").directive("history",["templatesPath","$timeout",function(n,t){return{restrict:"E",templateUrl:n+"directive-templates/history.html",controller:"historyCtrl",scope:{history:"=value"},link:function(n,i){n.$watch("isModal",function(n){t(function(){n?(i.find(".fade").css("height",i.find(".modal").prop("scrollHeight")+"px"),i.find(".fade").css("width",i.find(".modal").prop("scrollWidth")+"px"),$("body").css("overflow","hidden")):($("body").css("overflow","inherit"),i.remove())})});$(window).resize(function(){i.find(".fade").css("height",i.find(".modal").prop("scrollHeight")+"px");i.find(".fade").css("width",i.find(".modal").prop("scrollWidth")+"px")})}}}]);angular.module("gridTaskApp").directive("loading",["templatesPath",function(n){return{restrict:"E",templateUrl:n+"directive-templates/loading.html",link:function(n,t){t.css("height",t.parent().parent().height()+"px");t.css("width",t.parent().parent().width()+"px");t.find(".loading-disabled").css("top",0);t.find(".loading-disabled").css("height",t.parent().parent().height()+"px");t.find(".loading-disabled").css("width",t.parent().parent().width()+"px");$(window).resize(function(){t.css("height",t.parent().parent().height()+"px");t.css("width",t.parent().parent().width()+"px");t.find(".loading-disabled").css("top",0);t.find(".loading-disabled").css("height",t.parent().parent().height()+"px");t.find(".loading-disabled").css("width",t.parent().parent().width()+"px")})}}}]);angular.module("gridTaskApp").controller("modalCtrl",["$scope",function(n){n.isModal=!0;n.fields=[];n.myEntity={};n.myEntity=angular.copy(n.value.entity);n.save=function(){Array.isArray(n.value.actions.history)||(n.value.actions.history=[]);n.value.actions.history.push({dateChange:new Date,oldObj:angular.copy(n.value.entity),newObj:angular.copy(n.myEntity)});for(var t in n.myEntity)n.value.entity[t]=n.myEntity[t];n.close()};n.close=function(){n.myEntity={};n.isModal=!1}}]);angular.module("gridTaskApp").directive("modal",["templatesPath","$timeout",function(n,t){return{restrict:"E",templateUrl:n+"directive-templates/modal.html",scope:{value:"="},controller:"modalCtrl",link:function(n,i){n.$watch("isModal",function(n){t(function(){n?(i.find(".fade").css("height",i.find(".modal").prop("scrollHeight")+"px"),i.find(".fade").css("width",i.find(".modal").prop("scrollWidth")+"px"),$("body").css("overflow","hidden")):($("body").css("overflow","inherit"),i.remove())})});$(window).resize(function(){i.find(".fade").css("height",i.find(".modal").prop("scrollHeight")+"px");i.find(".fade").css("width",i.find(".modal").prop("scrollWidth")+"px")})}}}]);angular.module("gridTaskApp").directive("numberFormat",[function(){return{restrict:"A",scope:{number:"=numberFormat"},link:function(n,t){t.html(nFormatter(n.number,1));n.$watch("number",function(n){t.html(nFormatter(n,1))})}}}]);angular.module("gridTaskApp").directive("onFinishRender",function(n){return{restrict:"A",link:function(t){t.$last===!0&&n(function(){t.$emit("ngRepeatFinished")})}}});angular.module("gridTaskApp").directive("pageContent",["templatesPath","$compile","content",function(n,t,i){return{restrict:"E",scope:{data:"=gridData",contentOptions:"=",grid:"=",gridOptions:"="},templateUrl:n+"directive-templates/page-content.html",link:function(r,u){var f=new Initializer(r,u,i,n,t);f.init();r.$watch("contentOptions",function(){f.init();f.refreshOpt()});r.$watch("data",function(n){n&&f.refreshData(n)});r.$watch("data.length",function(){Array.isArray(r.data)&&(r.grid.count=r.data.length)});r.$watch("views.options.selected",function(n){n&&(f.refreshOpt(),n.isGrid&&f.refreshCheckCallback())})}}}]);angular.module("gridTaskApp").controller("contentOptionsCtrl",["$scope",function(n){n.$watch("options.searchValue",function(t){n.options.searchOptions&&(n.options.searchOptions.selected.label=="everywhere"?n.options.search(t):n.options.search(n.options.searchOptions.selected.label+":"+t))})}]);angular.module("gridTaskApp").directive("contentOptions",["templatesPath",function(n){return{restrict:"E",controller:"contentOptionsCtrl",scope:{options:"="},templateUrl:n+"directive-templates/content-options.html"}}]);angular.module("gridTaskApp").directive("pageContentBody",[function(){return{restrict:"E",link:function(n,t){t.append(n.contentOptions.contentBodyTemplate);n.$watch("contentOptions.contentBodyTemplate",function(n){t.html("");t.append(n)})}}}]);angular.module("gridTaskApp").directive("pageContentFooter",[function(){return{restrict:"E",link:function(n,t){t.append(n.contentOptions.contentFooterTempalte);n.$watch("contentOptions.contentFooterTempalte",function(n){t.html("");t.append(n)})}}}]);angular.module("gridTaskApp").directive("pageContentHeader",[function(){return{restrict:"E",link:function(n,t){t.append(n.contentOptions.contentHeaderTempalte);n.$watch("contentOptions.contentHeaderTempalte",function(n){t.html("");t.append(n)})}}}]);angular.module("gridTaskApp").directive("pageContentCards",["templatesPath","content","$compile",function(n,t,i){return{restrict:"E",scope:{data:"=gridData",contentOptions:"=",gridOptions:"="},templateUrl:n+"directive-templates/page-content-cards.html",link:function(r,u){var f=new Initializer(r,u,t,n,i);f.init();r.startDate=new Date;r.startDate.setDate(r.startDate.getDate()-1);r.endDate=new Date;r.$watch("startDate",function(){for(var n in r.cards)r.cards[n].counter&&(r.cards[n].count=r.cards[n].counter.calculate(r.startDate,r.endDate))});r.cards={clicks:{count:0,counter:undefined,graphs:[{style:{"background-color":"rgb(233, 124, 130)",height:"55px"}},{style:{"background-color":"rgb(165, 189, 215)",height:"35px"}},{style:{"background-color":"rgb(165, 215, 208)",height:"55px"}},{style:{"background-color":"rgb(251, 201, 135)",height:"10px"}},{style:{"background-color":"rgb(57, 124, 130)",height:"30px"}}]},views:{count:191e4,graphs:[{style:{"background-color":"rgb(10, 124, 130)",height:"30px"}},{style:{"background-color":"rgb(165, 25, 215)",height:"50px"}},{style:{"background-color":"rgb(165, 200, 208)",height:"60px"}},{style:{"background-color":"rgb(30, 201, 135)",height:"25px"}},{style:{"background-color":"rgb(57, 124, 100)",height:"30px"}}]},conversion:{count:2010,graphs:[{style:{"background-color":"rgb(233, 44, 130)",height:"20px"}},{style:{"background-color":"rgb(165, 189, 300)",height:"30px"}},{style:{"background-color":"rgb(1, 215, 208)",height:"45px"}},{style:{"background-color":"rgb(251, 201, 54)",height:"34px"}},{style:{"background-color":"rgb(57, 33, 130)",height:"60px"}}]},spend:{count:2150,graphs:[{style:{"background-color":"rgb(10, 124, 130)",height:"10px"}},{style:{"background-color":"rgb(165, 189, 55)",height:"5px"}},{style:{"background-color":"rgb(165, 231, 208)",height:"50px"}},{style:{"background-color":"rgb(251, 201, 29)",height:"30px"}},{style:{"background-color":"rgb(57, 124, 1)",height:"34px"}}]},actions:{count:191e4,graphs:[{style:{"background-color":"rgb(10, 124, 130)",height:"30px"}},{style:{"background-color":"rgb(165, 25, 215)",height:"50px"}},{style:{"background-color":"rgb(165, 200, 208)",height:"60px"}},{style:{"background-color":"rgb(30, 201, 135)",height:"25px"}},{style:{"background-color":"rgb(57, 124, 100)",height:"30px"}}]},time:{count:new Date,graphs:[{style:{"background-color":"rgb(233, 44, 130)",height:"20px"}},{style:{"background-color":"rgb(165, 189, 300)",height:"30px"}},{style:{"background-color":"rgb(1, 215, 208)",height:"45px"}},{style:{"background-color":"rgb(251, 201, 54)",height:"34px"}},{style:{"background-color":"rgb(57, 33, 130)",height:"60px"}}]},date:{count:2015,graphs:[{style:{"background-color":"rgb(10, 124, 130)",height:"10px"}},{style:{"background-color":"rgb(165, 189, 55)",height:"5px"}},{style:{"background-color":"rgb(165, 231, 208)",height:"50px"}},{style:{"background-color":"rgb(251, 201, 29)",height:"30px"}},{style:{"background-color":"rgb(57, 124, 1)",height:"34px"}}]}};r.cards.views.counter=new Counter(r.cards.views);r.cards.conversion.counter=new Counter(r.cards.conversion);r.cards.spend.counter=new Counter(r.cards.spend);r.cards.actions.counter=new Counter(r.cards.actions);r.cards.time.counter=new Counter(r.cards.time);r.cards.date.counter=new Counter(r.cards.date);$(document).click(function(){r.cards.clicks.count+=1});r.$watch("contentOptions",function(){f.init();f.refreshOpt()});r.$watch("data",function(n){n&&f.refreshData(n)});r.$watch("data.length",function(){Array.isArray(r.data)&&(r.grid.count=r.data.length)});r.$watch("views.options.selected",function(){f.refreshOpt()})}}}]);angular.module("gridTaskApp").controller("contentOptionsCardsCtrl",["$scope",function(n){n.$watch("options.searchValue",function(t){n.options.searchOptions&&(n.options.searchOptions.selected.label=="everywhere"?n.options.search(t):n.options.search(n.options.searchOptions.selected.label+":"+t))})}]);angular.module("gridTaskApp").directive("contentOptionsCards",["templatesPath",function(n){return{restrict:"E",controller:"contentOptionsCardsCtrl",scope:{options:"=",startDate:"=",endDate:"="},templateUrl:n+"directive-templates/content-options-cards.html"}}]);angular.module("gridTaskApp").directive("resizeOn",[function(){return{restrict:"A",link:function(n,t){t.css("width",t.parent().position().left+t.parent().width()+"px");t.width()<t.css("min-width").replace("px","")?(t.css("right","auto"),t.css("width","450px"),t.css("left",t.parent().position().left+"px")):(t.css("right","0"),t.css("left","auto"));t.css("top",t.parent().height()+"px");$(window).resize(function(){t.css("width",t.parent().position().left+t.parent().width()+"px");t.width()<t.css("min-width").replace("px","")?(t.css("right","auto"),t.css("width","450px"),t.css("left",t.parent().position().left+"px")):(t.css("right","0"),t.css("left","auto"))})}}}]);angular.module("gridTaskApp").controller("searchCtrl",["$scope",function(n){n.edited=!1;n.focus=function(){};n.blur=function(){};n.clear=function(){n.searchValue=""}}]);angular.module("gridTaskApp").directive("search",["templatesPath",function(n){return{restrict:"E",scope:{searchValue:"=",edited:"="},controller:"searchCtrl",templateUrl:n+"directive-templates/search.html",link:function(n){n.$watch("searchValue",function(t){n.edited=t.length>0?!1:!0})}}}]);angular.module("gridTaskApp").controller("splitButtonCtrl",["$scope",function(n){n.actions||(n.actions=[]);n.actions.everywhere={label:"everywhere",isEverywhere:!0};n.actions.selected=n.actions.everywhere;n.select=function(t){n.actions.selected=t;n.search="";n.close()}}]);angular.module("gridTaskApp").directive("splitButton",["templatesPath","classes",function(n,t){return{restrict:"E",scope:{actions:"=",selected:"=",search:"="},templateUrl:n+"directive-templates/split-button.html",controller:"splitButtonCtrl",link:function(n,i){i.find("ul").hide();i.find(".expand").addClass(t.menuDown);n.toggle=function(){i.find("ul").is(":visible")?(i.find("ul").hide(),i.find(".expand").addClass(t.menuDown),i.find(".expand").removeClass(t.menuUp),i.find(".split-btn__toggle").removeClass("opened")):(i.find("ul").show(),i.find(".expand").removeClass(t.menuDown),i.find(".expand").addClass(t.menuUp),i.find(".split-btn__toggle").addClass("opened"))};n.close=function(){i.find("ul").is(":visible")&&(i.find("ul").hide(),i.find(".expand").addClass(t.menuDown),i.find(".expand").removeClass(t.menuUp),i.find(".split-btn__toggle").removeClass("opened"))};$(document).click(function(n){$(n.target).closest(i).length||(i.find("ul").hide(),i.find(".expand").addClass(t.menuDown),i.find(".expand").removeClass(t.menuUp),i.find(".split-btn__toggle").removeClass("opened"))})}}}]);angular.module("gridTaskApp").directive("upload",["templatesPath",function(n){return{restrict:"E",templateUrl:n+"directive-templates/upload.html",scope:{upload:"=uploadCallback"},link:function(n,t){t.find(":file").change(function(){var r=this.files[0],i;r.name.indexOf("json")!=-1?(i=new FileReader,i.readAsText(r),i.onloadend=function(){var t=i.result;n.jsonData=JSON.parse(t);n.upload&&n.upload(n.jsonData)},t.find(":file").val("")):t.find(":file").val("")})}}}]);var Counter=function(){function n(n){this.card=n}return n.prototype.calculate=function(n,t){for(var r,u=t.getDate()-n.getDate(),f=Math.floor(Math.random()*1e3+1),i=0;i<this.card.graphs.length;i++)r=Math.floor(Math.random()*60+1),this.card.graphs[i].style.height=r+"px";return f*u},n}(),Initializer=function(){function n(n,t,i,r,u){this.scope=n;this.element=t;this.content=i;this.templatesPath=r;this.$compile=u}return n.prototype.init=function(){this.initContentOpt();this.initGrid();this.initGridOpt()},n.prototype.initContentOpt=function(){this.scope.contentOptions===undefined&&(this.scope.contentOptions={});this.scope.contentOptions.loading&&(this.scope.contentOptions.isLoading=!0,$("loading").length==0&&(this.element.find(this.content.listSelector).append(this.content.loadingTemplate),this.$compile($("loading"))(this.scope)));this.scope.contentOptions.checks===undefined&&(this.scope.contentOptions.checks=this.content.checks);this.scope.contentOptions.mores===undefined&&(this.scope.contentOptions.mores=this.content.mores);this.scope.contentOptions.filtrate===undefined&&(this.scope.contentOptions.filtrate=function(n){this.scope.gridOptions.filterOptions.filterText=convertFilterOptions(n).filterText}.bind(this));this.scope.contentOptions.search===undefined&&(this.scope.contentOptions.search=function(n){this.scope.gridOptions.filterOptions.filterText=n}.bind(this));this.scope.contentOptions.refresh===undefined&&(this.scope.contentOptions.refresh=function(){this.scope.contentOptions.loading&&(this.scope.contentOptions.isLoading=!0);this.scope.contentOptions.refreshCallback()}.bind(this));(this.scope.contentOptions.withUpload||this.scope.contentOptions.upload!==undefined)&&(this.scope.contentOptions.isDynamic=!0,this.scope.contentOptions.upload===undefined&&(this.scope.contentOptions.upload=function(n){this.scope.contentOptions.loading&&(this.scope.contentOptions.isLoading=!0);this.scope.data=n;this.scope.grid.count=this.scope.data.length;this.scope.$apply()}.bind(this)))},n.prototype.initGrid=function(){this.scope.exports===undefined&&(this.scope.exports=this.content.exports,this.scope.exports.options.callback=function(n){this.scope.export=n}.bind(this));this.scope.views===undefined&&(this.scope.views=this.content.views,this.scope.views.options.callback=function(n){this.scope.view=n}.bind(this));this.scope.grid===undefined&&(this.scope.grid={},this.scope.grid.name=this.content.gridName,Array.isArray(this.scope.data)&&(this.scope.grid.count=this.scope.data.length));this.scope.grid.name===undefined&&(this.scope.grid.name=this.content.gridName);this.scope.grid.count===undefined&&Array.isArray(this.scope.data)&&(this.scope.grid.count=this.scope.data.length)},n.prototype.initGridOpt=function(){var t,n;if(this.scope.gridOptions===undefined&&(this.scope.gridOptions={}),this.scope.gridOptions.data===undefined&&(this.scope.gridOptions.data="data"),this.scope.gridOptions.multiSelect===undefined&&(this.scope.gridOptions.multiSelect=!1),this.scope.gridOptions.rowTemplate===undefined&&(this.scope.gridOptions.rowTemplate=this.templatesPath+this.content.rowTemplate),this.scope.gridOptions.filterOptions===undefined&&(this.scope.gridOptions.filterOptions={filterText:""}),this.scope.gridOptions.rowHeight===undefined&&(this.scope.gridOptions.rowHeight=this.content.rowHeight),this.scope.gridOptions.headerRowHeight===undefined&&(this.scope.gridOptions.headerRowHeight=this.content.headerRowHeight),this.scope.gridOptions.showFooter===undefined&&(this.scope.gridOptions.showFooter=this.content.showFooter),this.scope.gridOptions.footerRowHeight===undefined&&(this.scope.gridOptions.footerRowHeight=this.content.footerRowHeight),this.scope.gridOptions.footerTemplate===undefined&&(this.scope.gridOptions.footerTemplate=this.templatesPath+this.content.footerTemplate),this.scope.gridOptions.init===undefined&&this.scope.contentOptions.loading&&(this.scope.gridOptions.init=function(){this.scope.contentOptions.isLoading=!1}.bind(this)),this.scope.gridOptions.detailsTemplate===undefined&&this.scope.gridOptions.withDetails&&(this.scope.gridOptions.detailsTemplate=this.templatesPath+this.content.detailsTemplate),this.scope.gridOptions.rowActions===undefined&&(this.scope.gridOptions.rowActions=this.content.rowActions),this.scope.gridOptions.rowCheckAction===undefined&&(this.scope.gridOptions.rowCheckAction=this.content.rowCheckAction),this.scope.gridOptions.beforeSelectionChange===undefined&&(this.scope.gridOptions.beforeSelectionChange=function(){return!1}.bind(this)),this.scope.pluginActionOpt={values:this.scope.gridOptions.rowActions,detailsTemplate:this.scope.gridOptions.detailsTemplate,detailsCondition:this.scope.gridOptions.detailsCondition,onCheck:this.scope.gridOptions.rowCheckAction.bind(this.scope),contentOptions:this.scope.contentOptions},this.scope.gridOptions.plugins===undefined)this.scope.gridOptions.plugins=[],this.scope.gridOptions.plugins.push(new ngGridActionsPlugin(this.scope.pluginActionOpt,this.$compile));else{for(t=!1,n=0;n<this.scope.gridOptions.plugins.length;n++)if(this.scope.gridOptions.plugins[n].constructor.name=="ngGridActionsPlugin"){t=!0;break}t||this.scope.gridOptions.plugins.push(new ngGridActionsPlugin(this.scope.pluginActionOpt,this.$compile))}},n.prototype.refreshOpt=function(){var t,i,n;for(this.scope.contentOptions.filterOptions=this.content.filterOptions(this.scope.data),this.scope.contentOptions.searchOptions=this.content.searchOptions(this.scope.data),this.scope.contentOptions.searchOptions.selected=this.scope.contentOptions.searchOptions[0],this.scope.contentOptions.searchValue="",this.scope.contentOptions.checks.options.selected=this.scope.contentOptions.checks.options.actions.noOne,t=!1,i=0,n=0;n<this.scope.gridOptions.plugins.length;n++)if(this.scope.gridOptions.plugins[n].constructor.name=="ngGridActionsPlugin"){t=!0;i=n;break}t||(this.scope.pluginActionOpt={values:this.scope.gridOptions.rowActions,detailsTemplate:this.scope.gridOptions.detailsTemplate,detailsCondition:this.scope.gridOptions.detailsCondition,onCheck:this.scope.gridOptions.rowCheckAction.bind(this.scope),contentOptions:this.scope.contentOptions},this.scope.gridOptions.plugins[i].refreshOpt(this.scope.pluginActionOpt));this.scope.contentOptions.loading&&(this.scope.contentOptions.isLoading=!1)},n.prototype.refreshCheckCallback=function(){for(var n=0;n<this.scope.gridOptions.plugins.length;n++)if(this.scope.gridOptions.plugins[n].constructor.name=="ngGridActionsPlugin"){isFindAct=!0;indexAct=n;break}this.scope.gridOptions.plugins[indexAct].refreshCallback()},n.prototype.refreshData=function(n){this.refreshOpt();this.scope.grid.count=this.scope.data.length;this.scope.gridOptions.filterOptions.filterText="";var i=angular.copy(this.scope.gridOptions.columnDefs),t=columnGenerator(n,this.templatesPath);this.scope.gridOptions.reInit===undefined?columnsCompare(i,t)||(this.scope.gridOptions.columnDefs=t,this.$compile($("custom-grid"))(this.scope)):this.$compile($("custom-grid"))(this.scope);this.scope.contentOptions.loading&&(this.scope.contentOptions.isLoading=!1)},n}();jQuery.fn.center=function(){return this.css("position","absolute"),this.css("top",Math.max(0,($(this.parent()).height()-$(this).outerHeight())/2+$(this.parent()).scrollTop())+"px"),this.css("left",Math.max(0,($(this.parent()).width()-$(this).outerWidth())/2+$(this.parent()).scrollLeft())+"px"),this.css("z-index",1e4),this};jQuery&&function(n){n.cursorMessageData={};n(window).ready(function(){n(".cursor-message").length==0&&(n("body").append('<div class="cursor-message">&nbsp;<\/div>'),n(".cursor-message").hide());n("body").mousemove(function(t){n.cursorMessageData.mouseX=t.pageX;n.cursorMessageData.mouseY=t.pageY;n.cursorMessageData.options!=undefined&&n._showCursorMessage()})});n.extend({cursorMessage:function(t,i){i==undefined&&(i={});i.offsetX==undefined&&(i.offsetX=5);i.offsetY==undefined&&(i.offsetY=5);i.hideTimeout==undefined&&(i.hideTimeout=2e3);n(".cursor-message").html(t).fadeIn("slow");jQuery.cursorMessageData.hideTimeoutId!=undefined&&clearTimeout(jQuery.cursorMessageData.hideTimeoutId);i.hideTimeout>0&&(jQuery.cursorMessageData.hideTimeoutId=setTimeout(n.hideCursorMessage,i.hideTimeout));jQuery.cursorMessageData.options=i;n._showCursorMessage()},hideCursorMessage:function(){n(".cursor-message").fadeOut("slow")},_showCursorMessage:function(){n(".cursor-message").css({top:n.cursorMessageData.mouseY+n.cursorMessageData.options.offsetY+30+"px",left:n.cursorMessageData.mouseX+n.cursorMessageData.options.offsetX-150});n.cursorMessageData.options.backgroundColor&&n(".cursor-message").css({"background-color":n.cursorMessageData.options.backgroundColor})}})}(jQuery);
//# sourceMappingURL=custom-grid.min.js.map
